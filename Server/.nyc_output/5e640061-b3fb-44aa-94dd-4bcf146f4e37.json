{"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\helpers\\geo.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\helpers\\geo.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":160}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":26},"end":{"line":12,"column":101}},"5":{"start":{"line":14,"column":25},"end":{"line":14,"column":99}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":41}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":41}},"8":{"start":{"line":20,"column":17},"end":{"line":20,"column":40}},"9":{"start":{"line":22,"column":25},"end":{"line":32,"column":1}},"10":{"start":{"line":23,"column":10},"end":{"line":23,"column":33}},"11":{"start":{"line":24,"column":13},"end":{"line":24,"column":33}},"12":{"start":{"line":26,"column":13},"end":{"line":26,"column":33}},"13":{"start":{"line":27,"column":10},"end":{"line":27,"column":143}},"14":{"start":{"line":28,"column":10},"end":{"line":28,"column":56}},"15":{"start":{"line":29,"column":10},"end":{"line":29,"column":15}},"16":{"start":{"line":31,"column":2},"end":{"line":31,"column":11}},"17":{"start":{"line":34,"column":0},"end":{"line":34,"column":48}},"18":{"start":{"line":37,"column":2},"end":{"line":37,"column":31}},"19":{"start":{"line":40,"column":46},"end":{"line":122,"column":3}},"20":{"start":{"line":41,"column":13},"end":{"line":117,"column":5}},"21":{"start":{"line":43,"column":4},"end":{"line":116,"column":16}},"22":{"start":{"line":44,"column":6},"end":{"line":115,"column":7}},"23":{"start":{"line":45,"column":8},"end":{"line":114,"column":9}},"24":{"start":{"line":47,"column":12},"end":{"line":47,"column":27}},"25":{"start":{"line":48,"column":12},"end":{"line":52,"column":14}},"26":{"start":{"line":53,"column":12},"end":{"line":53,"column":37}},"27":{"start":{"line":54,"column":12},"end":{"line":54,"column":18}},"28":{"start":{"line":57,"column":12},"end":{"line":60,"column":13}},"29":{"start":{"line":58,"column":14},"end":{"line":58,"column":33}},"30":{"start":{"line":59,"column":14},"end":{"line":59,"column":20}},"31":{"start":{"line":62,"column":12},"end":{"line":72,"column":14}},"32":{"start":{"line":73,"column":12},"end":{"line":73,"column":30}},"33":{"start":{"line":74,"column":12},"end":{"line":74,"column":61}},"34":{"start":{"line":77,"column":12},"end":{"line":77,"column":44}},"35":{"start":{"line":79,"column":12},"end":{"line":83,"column":13}},"36":{"start":{"line":80,"column":14},"end":{"line":82,"column":15}},"37":{"start":{"line":81,"column":16},"end":{"line":81,"column":88}},"38":{"start":{"line":85,"column":12},"end":{"line":88,"column":13}},"39":{"start":{"line":86,"column":14},"end":{"line":86,"column":33}},"40":{"start":{"line":87,"column":14},"end":{"line":87,"column":20}},"41":{"start":{"line":90,"column":12},"end":{"line":90,"column":48}},"42":{"start":{"line":93,"column":12},"end":{"line":93,"column":16}},"43":{"start":{"line":94,"column":12},"end":{"line":94,"column":30}},"44":{"start":{"line":95,"column":12},"end":{"line":95,"column":18}},"45":{"start":{"line":98,"column":12},"end":{"line":98,"column":83}},"46":{"start":{"line":100,"column":12},"end":{"line":108,"column":15}},"47":{"start":{"line":101,"column":31},"end":{"line":101,"column":95}},"48":{"start":{"line":102,"column":29},"end":{"line":102,"column":89}},"49":{"start":{"line":103,"column":27},"end":{"line":103,"column":48}},"50":{"start":{"line":104,"column":31},"end":{"line":104,"column":95}},"51":{"start":{"line":105,"column":29},"end":{"line":105,"column":89}},"52":{"start":{"line":106,"column":27},"end":{"line":106,"column":48}},"53":{"start":{"line":107,"column":14},"end":{"line":107,"column":37}},"54":{"start":{"line":109,"column":12},"end":{"line":109,"column":56}},"55":{"start":{"line":113,"column":12},"end":{"line":113,"column":35}},"56":{"start":{"line":119,"column":2},"end":{"line":121,"column":4}},"57":{"start":{"line":120,"column":4},"end":{"line":120,"column":39}},"58":{"start":{"line":125,"column":0},"end":{"line":125,"column":64}},"59":{"start":{"line":127,"column":39},"end":{"line":195,"column":3}},"60":{"start":{"line":128,"column":14},"end":{"line":190,"column":5}},"61":{"start":{"line":133,"column":17},"end":{"line":133,"column":26}},"62":{"start":{"line":134,"column":4},"end":{"line":189,"column":17}},"63":{"start":{"line":135,"column":6},"end":{"line":188,"column":7}},"64":{"start":{"line":136,"column":8},"end":{"line":187,"column":9}},"65":{"start":{"line":138,"column":12},"end":{"line":138,"column":86}},"66":{"start":{"line":139,"column":12},"end":{"line":139,"column":111}},"67":{"start":{"line":140,"column":12},"end":{"line":182,"column":18}},"68":{"start":{"line":141,"column":26},"end":{"line":177,"column":17}},"69":{"start":{"line":143,"column":16},"end":{"line":176,"column":29}},"70":{"start":{"line":144,"column":18},"end":{"line":175,"column":19}},"71":{"start":{"line":145,"column":20},"end":{"line":174,"column":21}},"72":{"start":{"line":147,"column":24},"end":{"line":147,"column":43}},"73":{"start":{"line":148,"column":24},"end":{"line":148,"column":76}},"74":{"start":{"line":151,"column":24},"end":{"line":151,"column":51}},"75":{"start":{"line":152,"column":24},"end":{"line":152,"column":43}},"76":{"start":{"line":153,"column":24},"end":{"line":156,"column":58}},"77":{"start":{"line":159,"column":24},"end":{"line":159,"column":51}},"78":{"start":{"line":160,"column":24},"end":{"line":162,"column":27}},"79":{"start":{"line":161,"column":26},"end":{"line":161,"column":44}},"80":{"start":{"line":164,"column":24},"end":{"line":164,"column":43}},"81":{"start":{"line":165,"column":24},"end":{"line":165,"column":89}},"82":{"start":{"line":168,"column":24},"end":{"line":168,"column":51}},"83":{"start":{"line":169,"column":24},"end":{"line":169,"column":68}},"84":{"start":{"line":173,"column":24},"end":{"line":173,"column":48}},"85":{"start":{"line":179,"column":14},"end":{"line":181,"column":16}},"86":{"start":{"line":180,"column":16},"end":{"line":180,"column":52}},"87":{"start":{"line":186,"column":12},"end":{"line":186,"column":36}},"88":{"start":{"line":192,"column":2},"end":{"line":194,"column":4}},"89":{"start":{"line":193,"column":4},"end":{"line":193,"column":40}},"90":{"start":{"line":197,"column":0},"end":{"line":197,"column":50}},"91":{"start":{"line":199,"column":25},"end":{"line":246,"column":1}},"92":{"start":{"line":200,"column":18},"end":{"line":200,"column":33}},"93":{"start":{"line":201,"column":17},"end":{"line":201,"column":31}},"94":{"start":{"line":202,"column":2},"end":{"line":245,"column":7}},"95":{"start":{"line":203,"column":16},"end":{"line":240,"column":7}},"96":{"start":{"line":205,"column":6},"end":{"line":239,"column":19}},"97":{"start":{"line":206,"column":8},"end":{"line":238,"column":9}},"98":{"start":{"line":207,"column":10},"end":{"line":237,"column":11}},"99":{"start":{"line":209,"column":14},"end":{"line":209,"column":33}},"100":{"start":{"line":210,"column":14},"end":{"line":217,"column":17}},"101":{"start":{"line":220,"column":14},"end":{"line":220,"column":41}},"102":{"start":{"line":222,"column":14},"end":{"line":225,"column":15}},"103":{"start":{"line":223,"column":16},"end":{"line":223,"column":35}},"104":{"start":{"line":224,"column":16},"end":{"line":224,"column":22}},"105":{"start":{"line":227,"column":14},"end":{"line":227,"column":63}},"106":{"start":{"line":230,"column":14},"end":{"line":230,"column":38}},"107":{"start":{"line":231,"column":14},"end":{"line":231,"column":113}},"108":{"start":{"line":232,"column":14},"end":{"line":232,"column":32}},"109":{"start":{"line":236,"column":14},"end":{"line":236,"column":38}},"110":{"start":{"line":242,"column":4},"end":{"line":244,"column":6}},"111":{"start":{"line":243,"column":6},"end":{"line":243,"column":42}},"112":{"start":{"line":253,"column":0},"end":{"line":253,"column":48}},"113":{"start":{"line":255,"column":37},"end":{"line":326,"column":3}},"114":{"start":{"line":256,"column":14},"end":{"line":321,"column":5}},"115":{"start":{"line":258,"column":4},"end":{"line":320,"column":34}},"116":{"start":{"line":259,"column":6},"end":{"line":319,"column":7}},"117":{"start":{"line":260,"column":8},"end":{"line":318,"column":9}},"118":{"start":{"line":262,"column":12},"end":{"line":262,"column":77}},"119":{"start":{"line":263,"column":12},"end":{"line":263,"column":34}},"120":{"start":{"line":264,"column":12},"end":{"line":264,"column":31}},"121":{"start":{"line":266,"column":12},"end":{"line":275,"column":14}},"122":{"start":{"line":276,"column":12},"end":{"line":288,"column":14}},"123":{"start":{"line":289,"column":12},"end":{"line":289,"column":31}},"124":{"start":{"line":290,"column":12},"end":{"line":290,"column":67}},"125":{"start":{"line":293,"column":12},"end":{"line":293,"column":41}},"126":{"start":{"line":294,"column":12},"end":{"line":303,"column":15}},"127":{"start":{"line":296,"column":14},"end":{"line":296,"column":102}},"128":{"start":{"line":298,"column":14},"end":{"line":302,"column":15}},"129":{"start":{"line":299,"column":16},"end":{"line":301,"column":33}},"130":{"start":{"line":304,"column":12},"end":{"line":304,"column":32}},"131":{"start":{"line":305,"column":12},"end":{"line":305,"column":18}},"132":{"start":{"line":308,"column":12},"end":{"line":308,"column":32}},"133":{"start":{"line":309,"column":12},"end":{"line":309,"column":49}},"134":{"start":{"line":310,"column":12},"end":{"line":310,"column":48}},"135":{"start":{"line":313,"column":12},"end":{"line":313,"column":62}},"136":{"start":{"line":317,"column":12},"end":{"line":317,"column":36}},"137":{"start":{"line":323,"column":2},"end":{"line":325,"column":4}},"138":{"start":{"line":324,"column":4},"end":{"line":324,"column":40}},"139":{"start":{"line":328,"column":0},"end":{"line":328,"column":46}}},"fnMap":{"0":{"name":"computeGeoDistance","decl":{"start":{"line":22,"column":34},"end":{"line":22,"column":52}},"loc":{"start":{"line":22,"column":77},"end":{"line":32,"column":1}},"line":22},"1":{"name":"deg2rad","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":16}},"loc":{"start":{"line":36,"column":22},"end":{"line":38,"column":1}},"line":36},"2":{"name":"(anonymous_2)","decl":{"start":{"line":40,"column":46},"end":{"line":40,"column":47}},"loc":{"start":{"line":40,"column":58},"end":{"line":122,"column":1}},"line":40},"3":{"name":"_callee","decl":{"start":{"line":41,"column":100},"end":{"line":41,"column":107}},"loc":{"start":{"line":41,"column":134},"end":{"line":117,"column":3}},"line":41},"4":{"name":"_callee$","decl":{"start":{"line":43,"column":49},"end":{"line":43,"column":57}},"loc":{"start":{"line":43,"column":68},"end":{"line":116,"column":5}},"line":43},"5":{"name":"(anonymous_5)","decl":{"start":{"line":100,"column":27},"end":{"line":100,"column":28}},"loc":{"start":{"line":100,"column":43},"end":{"line":108,"column":13}},"line":100},"6":{"name":"findClosestTrackersAndSort","decl":{"start":{"line":119,"column":18},"end":{"line":119,"column":44}},"loc":{"start":{"line":119,"column":54},"end":{"line":121,"column":3}},"line":119},"7":{"name":"(anonymous_7)","decl":{"start":{"line":127,"column":39},"end":{"line":127,"column":40}},"loc":{"start":{"line":127,"column":51},"end":{"line":195,"column":1}},"line":127},"8":{"name":"_callee3","decl":{"start":{"line":128,"column":101},"end":{"line":128,"column":109}},"loc":{"start":{"line":128,"column":117},"end":{"line":190,"column":3}},"line":128},"9":{"name":"_callee3$","decl":{"start":{"line":134,"column":49},"end":{"line":134,"column":58}},"loc":{"start":{"line":134,"column":70},"end":{"line":189,"column":5}},"line":134},"10":{"name":"(anonymous_10)","decl":{"start":{"line":140,"column":72},"end":{"line":140,"column":73}},"loc":{"start":{"line":140,"column":84},"end":{"line":182,"column":13}},"line":140},"11":{"name":"_callee2","decl":{"start":{"line":141,"column":113},"end":{"line":141,"column":121}},"loc":{"start":{"line":141,"column":131},"end":{"line":177,"column":15}},"line":141},"12":{"name":"_callee2$","decl":{"start":{"line":143,"column":61},"end":{"line":143,"column":70}},"loc":{"start":{"line":143,"column":82},"end":{"line":176,"column":17}},"line":143},"13":{"name":"(anonymous_13)","decl":{"start":{"line":160,"column":54},"end":{"line":160,"column":55}},"loc":{"start":{"line":160,"column":67},"end":{"line":162,"column":25}},"line":160},"14":{"name":"(anonymous_14)","decl":{"start":{"line":179,"column":21},"end":{"line":179,"column":22}},"loc":{"start":{"line":179,"column":36},"end":{"line":181,"column":15}},"line":179},"15":{"name":"findClosestTrackers","decl":{"start":{"line":192,"column":18},"end":{"line":192,"column":37}},"loc":{"start":{"line":192,"column":43},"end":{"line":194,"column":3}},"line":192},"16":{"name":"findClosestAirport","decl":{"start":{"line":199,"column":34},"end":{"line":199,"column":52}},"loc":{"start":{"line":199,"column":60},"end":{"line":246,"column":1}},"line":199},"17":{"name":"(anonymous_17)","decl":{"start":{"line":202,"column":35},"end":{"line":202,"column":36}},"loc":{"start":{"line":202,"column":47},"end":{"line":245,"column":3}},"line":202},"18":{"name":"_callee4","decl":{"start":{"line":203,"column":103},"end":{"line":203,"column":111}},"loc":{"start":{"line":203,"column":121},"end":{"line":240,"column":5}},"line":203},"19":{"name":"_callee4$","decl":{"start":{"line":205,"column":51},"end":{"line":205,"column":60}},"loc":{"start":{"line":205,"column":72},"end":{"line":239,"column":7}},"line":205},"20":{"name":"(anonymous_20)","decl":{"start":{"line":242,"column":11},"end":{"line":242,"column":12}},"loc":{"start":{"line":242,"column":26},"end":{"line":244,"column":5}},"line":242},"21":{"name":"(anonymous_21)","decl":{"start":{"line":255,"column":37},"end":{"line":255,"column":38}},"loc":{"start":{"line":255,"column":49},"end":{"line":326,"column":1}},"line":255},"22":{"name":"_callee5","decl":{"start":{"line":256,"column":101},"end":{"line":256,"column":109}},"loc":{"start":{"line":256,"column":122},"end":{"line":321,"column":3}},"line":256},"23":{"name":"_callee5$","decl":{"start":{"line":258,"column":49},"end":{"line":258,"column":58}},"loc":{"start":{"line":258,"column":70},"end":{"line":320,"column":5}},"line":258},"24":{"name":"(anonymous_24)","decl":{"start":{"line":294,"column":32},"end":{"line":294,"column":33}},"loc":{"start":{"line":294,"column":51},"end":{"line":303,"column":13}},"line":294},"25":{"name":"getClosestAirport","decl":{"start":{"line":323,"column":18},"end":{"line":323,"column":35}},"loc":{"start":{"line":323,"column":41},"end":{"line":325,"column":3}},"line":323}},"branchMap":{"0":{"loc":{"start":{"line":45,"column":8},"end":{"line":114,"column":9}},"type":"switch","locations":[{"start":{"line":46,"column":10},"end":{"line":54,"column":18}},{"start":{"line":56,"column":10},"end":{"line":74,"column":61}},{"start":{"line":76,"column":10},"end":{"line":90,"column":48}},{"start":{"line":92,"column":10},"end":{"line":95,"column":18}},{"start":{"line":97,"column":10},"end":{"line":109,"column":56}},{"start":{"line":111,"column":10},"end":{"line":111,"column":18}},{"start":{"line":112,"column":10},"end":{"line":113,"column":35}}],"line":45},"1":{"loc":{"start":{"line":57,"column":12},"end":{"line":60,"column":13}},"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":60,"column":13}},{"start":{"line":57,"column":12},"end":{"line":60,"column":13}}],"line":57},"2":{"loc":{"start":{"line":80,"column":14},"end":{"line":82,"column":15}},"type":"if","locations":[{"start":{"line":80,"column":14},"end":{"line":82,"column":15}},{"start":{"line":80,"column":14},"end":{"line":82,"column":15}}],"line":80},"3":{"loc":{"start":{"line":85,"column":12},"end":{"line":88,"column":13}},"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":88,"column":13}},{"start":{"line":85,"column":12},"end":{"line":88,"column":13}}],"line":85},"4":{"loc":{"start":{"line":101,"column":31},"end":{"line":101,"column":95}},"type":"cond-expr","locations":[{"start":{"line":101,"column":65},"end":{"line":101,"column":89}},{"start":{"line":101,"column":92},"end":{"line":101,"column":95}}],"line":101},"5":{"loc":{"start":{"line":102,"column":29},"end":{"line":102,"column":89}},"type":"cond-expr","locations":[{"start":{"line":102,"column":61},"end":{"line":102,"column":83}},{"start":{"line":102,"column":86},"end":{"line":102,"column":89}}],"line":102},"6":{"loc":{"start":{"line":104,"column":31},"end":{"line":104,"column":95}},"type":"cond-expr","locations":[{"start":{"line":104,"column":65},"end":{"line":104,"column":89}},{"start":{"line":104,"column":92},"end":{"line":104,"column":95}}],"line":104},"7":{"loc":{"start":{"line":105,"column":29},"end":{"line":105,"column":89}},"type":"cond-expr","locations":[{"start":{"line":105,"column":61},"end":{"line":105,"column":83}},{"start":{"line":105,"column":86},"end":{"line":105,"column":89}}],"line":105},"8":{"loc":{"start":{"line":136,"column":8},"end":{"line":187,"column":9}},"type":"switch","locations":[{"start":{"line":137,"column":10},"end":{"line":182,"column":18}},{"start":{"line":184,"column":10},"end":{"line":184,"column":17}},{"start":{"line":185,"column":10},"end":{"line":186,"column":36}}],"line":136},"9":{"loc":{"start":{"line":139,"column":29},"end":{"line":139,"column":110}},"type":"cond-expr","locations":[{"start":{"line":139,"column":76},"end":{"line":139,"column":85}},{"start":{"line":139,"column":88},"end":{"line":139,"column":110}}],"line":139},"10":{"loc":{"start":{"line":139,"column":29},"end":{"line":139,"column":73}},"type":"binary-expr","locations":[{"start":{"line":139,"column":29},"end":{"line":139,"column":46}},{"start":{"line":139,"column":50},"end":{"line":139,"column":73}}],"line":139},"11":{"loc":{"start":{"line":145,"column":20},"end":{"line":174,"column":21}},"type":"switch","locations":[{"start":{"line":146,"column":22},"end":{"line":148,"column":76}},{"start":{"line":150,"column":22},"end":{"line":156,"column":58}},{"start":{"line":158,"column":22},"end":{"line":165,"column":89}},{"start":{"line":167,"column":22},"end":{"line":169,"column":68}},{"start":{"line":171,"column":22},"end":{"line":171,"column":30}},{"start":{"line":172,"column":22},"end":{"line":173,"column":48}}],"line":145},"12":{"loc":{"start":{"line":207,"column":10},"end":{"line":237,"column":11}},"type":"switch","locations":[{"start":{"line":208,"column":12},"end":{"line":217,"column":17}},{"start":{"line":219,"column":12},"end":{"line":227,"column":63}},{"start":{"line":229,"column":12},"end":{"line":232,"column":32}},{"start":{"line":234,"column":12},"end":{"line":234,"column":19}},{"start":{"line":235,"column":12},"end":{"line":236,"column":38}}],"line":207},"13":{"loc":{"start":{"line":222,"column":14},"end":{"line":225,"column":15}},"type":"if","locations":[{"start":{"line":222,"column":14},"end":{"line":225,"column":15}},{"start":{"line":222,"column":14},"end":{"line":225,"column":15}}],"line":222},"14":{"loc":{"start":{"line":260,"column":8},"end":{"line":318,"column":9}},"type":"switch","locations":[{"start":{"line":261,"column":10},"end":{"line":290,"column":67}},{"start":{"line":292,"column":10},"end":{"line":305,"column":18}},{"start":{"line":307,"column":10},"end":{"line":310,"column":48}},{"start":{"line":312,"column":10},"end":{"line":313,"column":62}},{"start":{"line":315,"column":10},"end":{"line":315,"column":18}},{"start":{"line":316,"column":10},"end":{"line":317,"column":36}}],"line":260},"15":{"loc":{"start":{"line":298,"column":14},"end":{"line":302,"column":15}},"type":"if","locations":[{"start":{"line":298,"column":14},"end":{"line":302,"column":15}},{"start":{"line":298,"column":14},"end":{"line":302,"column":15}}],"line":298},"16":{"loc":{"start":{"line":298,"column":18},"end":{"line":298,"column":71}},"type":"binary-expr","locations":[{"start":{"line":298,"column":18},"end":{"line":298,"column":33}},{"start":{"line":298,"column":37},"end":{"line":298,"column":71}}],"line":298}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":1,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":1,"91":1,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":1,"113":1,"114":1,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":1},"f":{"0":0,"1":0,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0},"b":{"0":[0,0,0,0,0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0,0,0],"12":[0,0,0,0,0],"13":[0,0],"14":[0,0,0,0,0,0],"15":[0,0],"16":[0,0]},"inputSourceMap":{"version":3,"sources":["geo.js"],"names":["computeGeoDistance","lat1","lon1","lat2","lon2","R","EARTH_RADIUS","dLat","deg2rad","dLon","a","Math","sin","cos","c","atan2","sqrt","d","deg","PI","findClosestTrackersAndSort","airports","numberTrackers","cTrackers","fields","_id","from","to","trackersByID","Map","i","length","query","$and","type","$or","trackersQueried","j","has","toString","set","size","values","sort","b","aScoreFrom","indexOf","aScoreTo","aScore","bScoreFrom","bScoreTo","bScore","findClosestTrackers","longitude","latitude","city","NB_TRACKERS","Promise","resolve","tAirports","cAirports","cAirportsIata","map","iataCode","slice","findClosestAirport","$ne","cAirport","distance","getClosestAirport","userIPInfo","closestAirport","name","continent","country","region","bigAirports","forEach","airport","Object","assign","_doc","console","log"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\helpers\\","sourcesContent":["import { listFrequentTrackersAirports, findTrackers } from '../data/tracker';\r\nimport { closestAirports, closestAirportsLocal, airportsWithFilter, closestAirportsFromDb } from '../data/airport';\r\n\r\nimport { NB_TRACKERS, EARTH_RADIUS } from '../constants';\r\n\r\nexport const computeGeoDistance = (lat1, lon1, lat2, lon2) => {\r\n\tlet R = EARTH_RADIUS; \r\n\tlet dLat = deg2rad(lat2-lat1);  // deg2rad below\r\n\tlet dLon = deg2rad(lon2-lon1); \r\n\tlet a = \r\n\t\tMath.sin(dLat/2) * Math.sin(dLat/2) +\r\n\t\tMath.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \r\n\t\tMath.sin(dLon/2) * Math.sin(dLon/2); \r\n\tlet c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n\tlet d = R * c; // Distance in km\r\n\treturn d;\r\n}\r\n\r\nfunction deg2rad(deg) {\r\n\treturn deg * (Math.PI/180)\r\n}\r\n\r\nexport const findClosestTrackersAndSort = async(airports, numberTrackers) =>{\r\n\tlet cTrackers = [];\r\n\tlet query;\r\n\tconst fields = {_id: 1, from: 1, to: 1};\r\n\tlet trackersByID = new Map();\r\n\tfor(let i = 0; i < airports.length; i++){\r\n\t\tquery = {$and: [{type: 'F'},{$or: [{\"from\": airports[i]}, {\"to\": airports[i]}]}]}\r\n\t\tlet trackersQueried  = await findTrackers(query, fields);\r\n\t\t\r\n\t\tfor(let j = 0; j < trackersQueried.length; j++){\r\n\t\t\tif(!trackersByID.has(trackersQueried[j]._id.toString())){\r\n\t\t\t\ttrackersByID.set(trackersQueried[j]._id.toString(), trackersQueried[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(trackersByID.size >= numberTrackers) break;\r\n\t}\r\n\r\n\tcTrackers = [...trackersByID.values()];\r\n\t//Sort out, based on airports\r\n\tcTrackers.sort((a, b) => {\r\n\t\tlet aScoreFrom = airports.indexOf(a.from) !== -1 ? airports.indexOf(a.from) : 100;\r\n\t\tlet aScoreTo   = airports.indexOf(a.to) !== -1 ? airports.indexOf(a.to) : 100;\r\n\t\tlet aScore = aScoreFrom + aScoreTo;\r\n\r\n\t\tlet bScoreFrom = airports.indexOf(b.from) !== -1 ? airports.indexOf(b.from) : 100;\r\n\t\tlet bScoreTo   = airports.indexOf(b.to) !== -1 ? airports.indexOf(b.to) : 100;\r\n\t\tlet bScore = bScoreFrom + bScoreTo;\r\n\t\treturn aScore - bScore;\r\n\t});\r\n\t\r\n\treturn cTrackers;\r\n};\r\n\r\n//Get the most interesting trackers (closest airports from the user)\r\nexport const findClosestTrackers = async({longitude, latitude, city}, numberTrackers = NB_TRACKERS) => {\r\n\treturn new Promise(async (resolve) => {\r\n\t\t//List all airports used for trackers\r\n\t\tlet tAirports = await listFrequentTrackersAirports();\r\n\r\n\t\t//Then find the closest airports\r\n\t\t//let cAirports = await closestAirports({longitude, latitude}, numberAirports * 2, {iataCode: {$in: tAirports}});\r\n\t\tlet cAirports = await closestAirports({longitude, latitude}, numberTrackers * 2, tAirports);\r\n\t\tlet cAirportsIata = cAirports.map(a => a.iataCode);\r\n\r\n\t\t//Then return trackers with the closest airports\r\n\t\tlet cTrackers = await findClosestTrackersAndSort(cAirportsIata, numberTrackers);\r\n\r\n\t\tresolve(cTrackers.slice(0, numberTrackers));\r\n\t})\r\n};\r\n\r\nexport const findClosestAirport = ({longitude, latitude}) => {\r\n\treturn new Promise(async (resolve) => {\r\n\t\tlet cAirports = await closestAirportsFromDb({longitude, latitude}, 1, {iataCode: {$ne: ''}});\r\n\t\tif(cAirports.length === 0) return resolve(null);\r\n\t\tlet cAirport = cAirports[0];\r\n\t\tcAirport.distance = computeGeoDistance(latitude, longitude, cAirport.latitude, cAirport.longitude);\r\n\t\tresolve(cAirport);\r\n\t});\r\n}\r\n\r\n/**\r\n * Deprecated, use findClosestAirport instead\r\n * @param {*} userIPInfo \r\n */\r\nexport const getClosestAirport = async (userIPInfo) => {\r\n\tconst {latitude, longitude} = userIPInfo;\r\n\tlet closestAirport = null;\r\n\tlet distance;\r\n\r\n\ttry{\r\n\t\t//Retrive airports from the database, only medium and large ones \r\n\t\tlet fields = {name: 1, continent: 1, country: 1, region: 1, city: 1, iataCode: 1, longitude: 1, latitude: 1};\r\n\t\tlet query = { $and: [\r\n\t\t\t{$or: [{type: 'medium_airport'}, {type: 'large_airport'}]}, \r\n\t\t\t{iataCode:{$ne: ''}}\r\n\t\t]};\r\n\r\n\t\tconst bigAirports = await airportsWithFilter(query, fields);\r\n\t\t\r\n\t\tbigAirports.forEach((airport) => {\r\n\t\t\t//Compute distance between user and airports\r\n\t\t\tdistance = computeGeoDistance(latitude, longitude, airport.latitude, airport.longitude);\r\n\r\n\t\t\tif(!closestAirport || distance < closestAirport.distance){\r\n\t\t\t\tclosestAirport = Object.assign({}, {distance}, airport._doc);\r\n\t\t\t}\r\n\t\t});\r\n\t}catch(error){\r\n\t\tconsole.log(\"Error:\", error);\r\n\t}\r\n\r\n\treturn closestAirport;\r\n};\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d4dabb94bbbfbd87daaedc596b34155fdbf3666c","contentHash":"5563a14e8aac4225744e1371e86a1e92bf560604a65a19ce3bab9de62b4a5461"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\data\\tracker.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\data\\tracker.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":218}},"3":{"start":{"line":10,"column":23},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":19},"end":{"line":12,"column":80}},"5":{"start":{"line":14,"column":25},"end":{"line":14,"column":99}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":17},"end":{"line":18,"column":40}},"8":{"start":{"line":20,"column":54},"end":{"line":20,"column":73}},"9":{"start":{"line":20,"column":75},"end":{"line":20,"column":326}},"10":{"start":{"line":20,"column":125},"end":{"line":20,"column":161}},"11":{"start":{"line":20,"column":163},"end":{"line":20,"column":292}},"12":{"start":{"line":20,"column":183},"end":{"line":20,"column":292}},"13":{"start":{"line":20,"column":225},"end":{"line":20,"column":288}},"14":{"start":{"line":20,"column":293},"end":{"line":20,"column":324}},"15":{"start":{"line":20,"column":327},"end":{"line":20,"column":339}},"16":{"start":{"line":22,"column":33},"end":{"line":22,"column":534}},"17":{"start":{"line":22,"column":46},"end":{"line":22,"column":47}},"18":{"start":{"line":22,"column":91},"end":{"line":22,"column":131}},"19":{"start":{"line":22,"column":133},"end":{"line":22,"column":532}},"20":{"start":{"line":22,"column":146},"end":{"line":22,"column":264}},"21":{"start":{"line":22,"column":201},"end":{"line":22,"column":260}},"22":{"start":{"line":22,"column":272},"end":{"line":22,"column":532}},"23":{"start":{"line":22,"column":312},"end":{"line":22,"column":386}},"24":{"start":{"line":22,"column":396},"end":{"line":22,"column":530}},"25":{"start":{"line":22,"column":445},"end":{"line":22,"column":526}},"26":{"start":{"line":22,"column":535},"end":{"line":22,"column":549}},"27":{"start":{"line":24,"column":19},"end":{"line":26,"column":1}},"28":{"start":{"line":25,"column":2},"end":{"line":25,"column":47}},"29":{"start":{"line":28,"column":0},"end":{"line":28,"column":36}},"30":{"start":{"line":30,"column":21},"end":{"line":37,"column":1}},"31":{"start":{"line":31,"column":19},"end":{"line":31,"column":88}},"32":{"start":{"line":32,"column":2},"end":{"line":36,"column":6}},"33":{"start":{"line":39,"column":0},"end":{"line":39,"column":40}},"34":{"start":{"line":41,"column":37},"end":{"line":68,"column":3}},"35":{"start":{"line":42,"column":13},"end":{"line":63,"column":5}},"36":{"start":{"line":44,"column":4},"end":{"line":62,"column":16}},"37":{"start":{"line":45,"column":6},"end":{"line":61,"column":7}},"38":{"start":{"line":46,"column":8},"end":{"line":60,"column":9}},"39":{"start":{"line":48,"column":12},"end":{"line":48,"column":30}},"40":{"start":{"line":49,"column":12},"end":{"line":49,"column":36}},"41":{"start":{"line":52,"column":12},"end":{"line":52,"column":37}},"42":{"start":{"line":53,"column":12},"end":{"line":55,"column":16}},"43":{"start":{"line":54,"column":14},"end":{"line":54,"column":27}},"44":{"start":{"line":59,"column":12},"end":{"line":59,"column":35}},"45":{"start":{"line":65,"column":2},"end":{"line":67,"column":4}},"46":{"start":{"line":66,"column":4},"end":{"line":66,"column":39}},"47":{"start":{"line":70,"column":0},"end":{"line":70,"column":46}},"48":{"start":{"line":72,"column":48},"end":{"line":121,"column":3}},"49":{"start":{"line":73,"column":14},"end":{"line":116,"column":5}},"50":{"start":{"line":75,"column":4},"end":{"line":115,"column":17}},"51":{"start":{"line":76,"column":6},"end":{"line":114,"column":7}},"52":{"start":{"line":77,"column":8},"end":{"line":113,"column":9}},"53":{"start":{"line":79,"column":12},"end":{"line":79,"column":31}},"54":{"start":{"line":80,"column":12},"end":{"line":104,"column":16}},"55":{"start":{"line":107,"column":12},"end":{"line":107,"column":33}},"56":{"start":{"line":108,"column":12},"end":{"line":108,"column":84}},"57":{"start":{"line":112,"column":12},"end":{"line":112,"column":36}},"58":{"start":{"line":118,"column":2},"end":{"line":120,"column":4}},"59":{"start":{"line":119,"column":4},"end":{"line":119,"column":40}},"60":{"start":{"line":123,"column":0},"end":{"line":123,"column":68}},"61":{"start":{"line":125,"column":43},"end":{"line":160,"column":3}},"62":{"start":{"line":126,"column":14},"end":{"line":155,"column":5}},"63":{"start":{"line":127,"column":4},"end":{"line":154,"column":17}},"64":{"start":{"line":128,"column":6},"end":{"line":153,"column":7}},"65":{"start":{"line":129,"column":8},"end":{"line":152,"column":9}},"66":{"start":{"line":131,"column":12},"end":{"line":147,"column":17}},"67":{"start":{"line":151,"column":12},"end":{"line":151,"column":36}},"68":{"start":{"line":157,"column":2},"end":{"line":159,"column":4}},"69":{"start":{"line":158,"column":4},"end":{"line":158,"column":40}},"70":{"start":{"line":162,"column":0},"end":{"line":162,"column":58}},"71":{"start":{"line":164,"column":28},"end":{"line":172,"column":1}},"72":{"start":{"line":165,"column":16},"end":{"line":169,"column":4}},"73":{"start":{"line":171,"column":2},"end":{"line":171,"column":17}},"74":{"start":{"line":174,"column":0},"end":{"line":174,"column":54}},"75":{"start":{"line":176,"column":26},"end":{"line":202,"column":1}},"76":{"start":{"line":177,"column":20},"end":{"line":188,"column":3}},"77":{"start":{"line":178,"column":20},"end":{"line":178,"column":37}},"78":{"start":{"line":179,"column":16},"end":{"line":179,"column":23}},"79":{"start":{"line":182,"column":4},"end":{"line":185,"column":5}},"80":{"start":{"line":183,"column":6},"end":{"line":183,"column":39}},"81":{"start":{"line":184,"column":6},"end":{"line":184,"column":28}},"82":{"start":{"line":187,"column":4},"end":{"line":187,"column":21}},"83":{"start":{"line":190,"column":16},"end":{"line":199,"column":4}},"84":{"start":{"line":201,"column":2},"end":{"line":201,"column":17}},"85":{"start":{"line":204,"column":0},"end":{"line":204,"column":50}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":16}},"loc":{"start":{"line":20,"column":41},"end":{"line":20,"column":341}},"line":20},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":208},"end":{"line":20,"column":209}},"loc":{"start":{"line":20,"column":223},"end":{"line":20,"column":290}},"line":20},"2":{"name":"_objectSpread","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":22}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":551}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":184},"end":{"line":22,"column":185}},"loc":{"start":{"line":22,"column":199},"end":{"line":22,"column":262}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":428},"end":{"line":22,"column":429}},"loc":{"start":{"line":22,"column":443},"end":{"line":22,"column":528}},"line":22},"5":{"name":"findTrackers","decl":{"start":{"line":24,"column":28},"end":{"line":24,"column":40}},"loc":{"start":{"line":24,"column":57},"end":{"line":26,"column":1}},"line":24},"6":{"name":"randomTrackers","decl":{"start":{"line":30,"column":30},"end":{"line":30,"column":44}},"loc":{"start":{"line":30,"column":47},"end":{"line":37,"column":1}},"line":30},"7":{"name":"(anonymous_7)","decl":{"start":{"line":41,"column":37},"end":{"line":41,"column":38}},"loc":{"start":{"line":41,"column":49},"end":{"line":68,"column":1}},"line":41},"8":{"name":"_callee","decl":{"start":{"line":42,"column":100},"end":{"line":42,"column":107}},"loc":{"start":{"line":42,"column":110},"end":{"line":63,"column":3}},"line":42},"9":{"name":"_callee$","decl":{"start":{"line":44,"column":49},"end":{"line":44,"column":57}},"loc":{"start":{"line":44,"column":68},"end":{"line":62,"column":5}},"line":44},"10":{"name":"(anonymous_10)","decl":{"start":{"line":53,"column":58},"end":{"line":53,"column":59}},"loc":{"start":{"line":53,"column":71},"end":{"line":55,"column":13}},"line":53},"11":{"name":"randomTrackersIDs","decl":{"start":{"line":65,"column":18},"end":{"line":65,"column":35}},"loc":{"start":{"line":65,"column":38},"end":{"line":67,"column":3}},"line":65},"12":{"name":"(anonymous_12)","decl":{"start":{"line":72,"column":48},"end":{"line":72,"column":49}},"loc":{"start":{"line":72,"column":60},"end":{"line":121,"column":1}},"line":72},"13":{"name":"_callee2","decl":{"start":{"line":73,"column":101},"end":{"line":73,"column":109}},"loc":{"start":{"line":73,"column":112},"end":{"line":116,"column":3}},"line":73},"14":{"name":"_callee2$","decl":{"start":{"line":75,"column":49},"end":{"line":75,"column":58}},"loc":{"start":{"line":75,"column":70},"end":{"line":115,"column":5}},"line":75},"15":{"name":"listFrequentTrackersAirports","decl":{"start":{"line":118,"column":18},"end":{"line":118,"column":46}},"loc":{"start":{"line":118,"column":49},"end":{"line":120,"column":3}},"line":118},"16":{"name":"(anonymous_16)","decl":{"start":{"line":125,"column":43},"end":{"line":125,"column":44}},"loc":{"start":{"line":125,"column":55},"end":{"line":160,"column":1}},"line":125},"17":{"name":"_callee3","decl":{"start":{"line":126,"column":101},"end":{"line":126,"column":109}},"loc":{"start":{"line":126,"column":118},"end":{"line":155,"column":3}},"line":126},"18":{"name":"_callee3$","decl":{"start":{"line":127,"column":49},"end":{"line":127,"column":58}},"loc":{"start":{"line":127,"column":70},"end":{"line":154,"column":5}},"line":127},"19":{"name":"aggregateTrackerAirport","decl":{"start":{"line":157,"column":18},"end":{"line":157,"column":41}},"loc":{"start":{"line":157,"column":46},"end":{"line":159,"column":3}},"line":157},"20":{"name":"formatFrequentTracker","decl":{"start":{"line":164,"column":37},"end":{"line":164,"column":58}},"loc":{"start":{"line":164,"column":63},"end":{"line":172,"column":1}},"line":164},"21":{"name":"formatNormalTracker","decl":{"start":{"line":176,"column":35},"end":{"line":176,"column":54}},"loc":{"start":{"line":176,"column":78},"end":{"line":202,"column":1}},"line":176},"22":{"name":"formatDates","decl":{"start":{"line":177,"column":29},"end":{"line":177,"column":40}},"loc":{"start":{"line":177,"column":59},"end":{"line":188,"column":3}},"line":177}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":75},"end":{"line":20,"column":326}},"type":"if","locations":[{"start":{"line":20,"column":75},"end":{"line":20,"column":326}},{"start":{"line":20,"column":75},"end":{"line":20,"column":326}}],"line":20},"1":{"loc":{"start":{"line":20,"column":163},"end":{"line":20,"column":292}},"type":"if","locations":[{"start":{"line":20,"column":163},"end":{"line":20,"column":292}},{"start":{"line":20,"column":163},"end":{"line":20,"column":292}}],"line":20},"2":{"loc":{"start":{"line":22,"column":91},"end":{"line":22,"column":131}},"type":"cond-expr","locations":[{"start":{"line":22,"column":114},"end":{"line":22,"column":126}},{"start":{"line":22,"column":129},"end":{"line":22,"column":131}}],"line":22},"3":{"loc":{"start":{"line":22,"column":133},"end":{"line":22,"column":532}},"type":"if","locations":[{"start":{"line":22,"column":133},"end":{"line":22,"column":532}},{"start":{"line":22,"column":133},"end":{"line":22,"column":532}}],"line":22},"4":{"loc":{"start":{"line":22,"column":272},"end":{"line":22,"column":532}},"type":"if","locations":[{"start":{"line":22,"column":272},"end":{"line":22,"column":532}},{"start":{"line":22,"column":272},"end":{"line":22,"column":532}}],"line":22},"5":{"loc":{"start":{"line":31,"column":19},"end":{"line":31,"column":88}},"type":"cond-expr","locations":[{"start":{"line":31,"column":72},"end":{"line":31,"column":84}},{"start":{"line":31,"column":87},"end":{"line":31,"column":88}}],"line":31},"6":{"loc":{"start":{"line":31,"column":19},"end":{"line":31,"column":69}},"type":"binary-expr","locations":[{"start":{"line":31,"column":19},"end":{"line":31,"column":39}},{"start":{"line":31,"column":43},"end":{"line":31,"column":69}}],"line":31},"7":{"loc":{"start":{"line":46,"column":8},"end":{"line":60,"column":9}},"type":"switch","locations":[{"start":{"line":47,"column":10},"end":{"line":49,"column":36}},{"start":{"line":51,"column":10},"end":{"line":55,"column":16}},{"start":{"line":57,"column":10},"end":{"line":57,"column":17}},{"start":{"line":58,"column":10},"end":{"line":59,"column":35}}],"line":46},"8":{"loc":{"start":{"line":77,"column":8},"end":{"line":113,"column":9}},"type":"switch","locations":[{"start":{"line":78,"column":10},"end":{"line":104,"column":16}},{"start":{"line":106,"column":10},"end":{"line":108,"column":84}},{"start":{"line":110,"column":10},"end":{"line":110,"column":17}},{"start":{"line":111,"column":10},"end":{"line":112,"column":36}}],"line":77},"9":{"loc":{"start":{"line":108,"column":46},"end":{"line":108,"column":82}},"type":"cond-expr","locations":[{"start":{"line":108,"column":63},"end":{"line":108,"column":75}},{"start":{"line":108,"column":78},"end":{"line":108,"column":82}}],"line":108},"10":{"loc":{"start":{"line":129,"column":8},"end":{"line":152,"column":9}},"type":"switch","locations":[{"start":{"line":130,"column":10},"end":{"line":147,"column":17}},{"start":{"line":149,"column":10},"end":{"line":149,"column":17}},{"start":{"line":150,"column":10},"end":{"line":151,"column":36}}],"line":129},"11":{"loc":{"start":{"line":166,"column":17},"end":{"line":166,"column":72}},"type":"binary-expr","locations":[{"start":{"line":166,"column":17},"end":{"line":166,"column":31}},{"start":{"line":166,"column":35},"end":{"line":166,"column":72}}],"line":166}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":1,"30":1,"31":0,"32":0,"33":1,"34":1,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":1,"48":1,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":1,"61":1,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":1,"71":1,"72":0,"73":0,"74":1,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0,0],"8":[0,0,0,0],"9":[0,0],"10":[0,0,0],"11":[0,0]},"inputSourceMap":{"version":3,"sources":["tracker.js"],"names":["findTrackers","filter","fields","Tracker","find","randomTrackers","nbTrackers","aggregate","$sample","size","randomTrackersIDs","trackers","map","t","_id","listFrequentTrackersAirports","$match","$and","type","isActive","$group","iataCodesFrom","$addToSet","iataCodesTo","$project","iatas","$setUnion","res","length","aggregateTrackerAirport","$lookup","from","localField","foreignField","as","formatFrequentTracker","tr","tracker","occurrences","FrequentTrackerOccurrences","formatNormalTracker","userId","userEmail","formatDates","dateMin","dateMax","listDates","clone","cDate","tDate","addDays","push","startDates","Date","endDates","isAlertActive","triggerPrice","sources"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\data\\","sourcesContent":["import { Tracker } from '../../database/models/Tracker';\r\nimport { FrequentTrackerOccurrences } from '../constants';\r\n\r\nexport const findTrackers = (filter, fields) => {\r\n\treturn Tracker.find(filter, fields);\r\n};\r\n\r\nexport const randomTrackers = (nbTrackers = 6) => {\r\n    return Tracker.aggregate([\r\n        { $sample: { size: nbTrackers }} \r\n    ]);\r\n}\r\n\r\nexport const randomTrackersIDs = async () => {\r\n    let trackers = await randomTrackers();\r\n    return trackers.map(t => t._id);\r\n}\r\n\r\nexport const listFrequentTrackersAirports = async() => {\r\n\tlet res = await Tracker.aggregate([\r\n\t\t{ $match: { \t\r\n\t\t\t$and: [\r\n\t\t\t\t{ type : \"F\" }, \r\n\t\t\t\t{ isActive: true }\r\n\t\t\t]\r\n\t\t}},\r\n\t\t{\r\n\t\t\t$group: {\r\n\t\t\t\t_id: 0,\r\n\t\t\t\tiataCodesFrom: {$addToSet: \"$from\"},\r\n\t\t\t\tiataCodesTo: {$addToSet: \"$to\"}\r\n\t\t\t}\r\n\t\t},{\r\n\t\t\t$project: {\r\n\t\t\t\tiatas: { $setUnion: [\"$iataCodesFrom\", \"$iataCodesTo\"]}\r\n\t\t\t}\r\n\t\t}\r\n\t]);\r\n\treturn res.length > 0 ? res[0].iatas : null;\r\n}\r\n\r\nexport const aggregateTrackerAirport = async (filter) => {\r\n    return Tracker.aggregate([\r\n        { $match : filter},\r\n        {\r\n            $lookup:{\r\n              from: \"airports\",\r\n              localField: \"from\",\r\n              foreignField: \"iataCode\",\r\n              as: \"airportInfoFrom\"\r\n            }\r\n       },{\r\n            $lookup:{\r\n                from: \"airports\",\r\n                localField: \"to\",\r\n                foreignField: \"iataCode\",\r\n                as: \"airportInfoTo\"\r\n            }\r\n        }\r\n     ]);\r\n} \r\n\r\nexport const formatFrequentTracker = (tr) => {\r\n    let tracker = {\r\n        ...tr,\r\n        occurrences: tr.occurrences || FrequentTrackerOccurrences,\r\n        isActive: true, \r\n        type: 'F'\r\n    }\r\n    \r\n    return tracker;\r\n}\r\n\r\nexport const formatNormalTracker = (tr, userId, userEmail) => {\r\n    const formatDates = (dateMin, dateMax) => {\r\n        let listDates = [dateMin.clone()];\r\n        let cDate = dateMin, tDate;\r\n\r\n        while(cDate < dateMax){\r\n            tDate = cDate.addDays(1).clone();\r\n            listDates.push(tDate);\r\n        }\r\n\r\n        return listDates;\r\n    };\r\n\r\n    let tracker = {\r\n        ...tr,\r\n        startDates: formatDates(new Date(tr.startDates[0]), new Date(tr.startDates[1])),\r\n        endDates: formatDates(new Date(tr.endDates[0]), new Date(tr.endDates[1])),\r\n        isActive: true,  \r\n        isAlertActive: !!tr.triggerPrice, \r\n        type: 'N', \r\n        userId, \r\n        userEmail, \r\n        sources: [\"5dc39bba581d45d4af0f7f5fc46701d2\"], \r\n    };\r\n\r\n    return tracker;\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e5bcc9955984f31774428d1bd593ec6a60a1b176","contentHash":"4241e57b85892b22a431b52cc90e92410e34da733b9b815578bb5bf9588cea0a"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\models\\Tracker.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\models\\Tracker.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":34}},"3":{"start":{"line":11,"column":20},"end":{"line":63,"column":2}},"4":{"start":{"line":27,"column":6},"end":{"line":27,"column":31}},"5":{"start":{"line":33,"column":6},"end":{"line":33,"column":31}},"6":{"start":{"line":51,"column":6},"end":{"line":51,"column":47}},"7":{"start":{"line":57,"column":6},"end":{"line":57,"column":50}},"8":{"start":{"line":64,"column":14},"end":{"line":64,"column":54}},"9":{"start":{"line":65,"column":0},"end":{"line":65,"column":26}}},"fnMap":{"0":{"name":"required","decl":{"start":{"line":26,"column":23},"end":{"line":26,"column":31}},"loc":{"start":{"line":26,"column":34},"end":{"line":28,"column":5}},"line":26},"1":{"name":"required","decl":{"start":{"line":32,"column":23},"end":{"line":32,"column":31}},"loc":{"start":{"line":32,"column":34},"end":{"line":34,"column":5}},"line":32},"2":{"name":"required","decl":{"start":{"line":50,"column":23},"end":{"line":50,"column":31}},"loc":{"start":{"line":50,"column":34},"end":{"line":52,"column":5}},"line":50},"3":{"name":"required","decl":{"start":{"line":56,"column":23},"end":{"line":56,"column":31}},"loc":{"start":{"line":56,"column":34},"end":{"line":58,"column":5}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":51,"column":13},"end":{"line":51,"column":46}},"type":"binary-expr","locations":[{"start":{"line":51,"column":13},"end":{"line":51,"column":30}},{"start":{"line":51,"column":34},"end":{"line":51,"column":46}}],"line":51},"1":{"loc":{"start":{"line":57,"column":13},"end":{"line":57,"column":49}},"type":"binary-expr","locations":[{"start":{"line":57,"column":13},"end":{"line":57,"column":30}},{"start":{"line":57,"column":34},"end":{"line":57,"column":49}}],"line":57}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"sources":["Tracker.js"],"names":["mongoose","require","trackerSchema","Schema","from","type","String","required","to","isActive","Boolean","startDates","Array","endDates","occurrences","sources","isAlertActive","userEmail","userId","triggerPrice","Number","timestamps","Tracker","model"],"mappings":";;;;;;;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB,C,CAEA;;;AACA,IAAMC,aAAa,GAAGF,QAAQ,CAACG,MAAT,CAAgB;AAClCC,EAAAA,IAAI,EAAC;AACDC,IAAAA,IAAI,EAAEC,MADL;AAEDC,IAAAA,QAAQ,EAAE;AAFT,GAD6B;AAKlCC,EAAAA,EAAE,EAAC;AACCH,IAAAA,IAAI,EAAEC,MADP;AAECC,IAAAA,QAAQ,EAAE;AAFX,GAL+B;AASlCE,EAAAA,QAAQ,EAAE;AACNJ,IAAAA,IAAI,EAAEK,OADA;AAENH,IAAAA,QAAQ,EAAE;AAFJ,GATwB;AAalCI,EAAAA,UAAU,EAAE;AACRN,IAAAA,IAAI,EAAEO,KADE;AAERL,IAAAA,QAAQ,EAAE,oBAAU;AAAC,aAAQ,KAAKF,IAAL,KAAc,GAAtB;AAA2B;AAFxC,GAbsB;AAiBlCQ,EAAAA,QAAQ,EAAG;AACPR,IAAAA,IAAI,EAAEO,KADC;AAEPL,IAAAA,QAAQ,EAAE,oBAAU;AAAC,aAAQ,KAAKF,IAAL,KAAc,GAAtB;AAA2B;AAFzC,GAjBuB;;AAsBlC;AACJ;AACA;AACA;AACIA,EAAAA,IAAI,EAAEC,MA1B4B;AA2BlC;AACAQ,EAAAA,WAAW,EAAEF,KA5BqB;AA6BlC;AACAG,EAAAA,OAAO,EAAEH,KA9ByB;AA+BlCI,EAAAA,aAAa,EAAEN,OA/BmB;AAgClC;AACAO,EAAAA,SAAS,EAAE;AACPZ,IAAAA,IAAI,EAAEC,MADC;AAEPC,IAAAA,QAAQ,EAAE,oBAAU;AAAC,aAAO,KAAKF,IAAL,KAAc,GAAd,IAAqB,CAAC,KAAKa,MAAlC;AAAyC;AAFvD,GAjCuB;AAqClCA,EAAAA,MAAM,EAAE;AACJb,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAE,oBAAU;AAAC,aAAO,KAAKF,IAAL,KAAc,GAAd,IAAqB,CAAC,KAAKY,SAAlC;AAA4C;AAF7D,GArC0B;AAyClCE,EAAAA,YAAY,EAAEC;AAzCoB,CAAhB,EA0CpB;AACEC,EAAAA,UAAU,EAAE;AADd,CA1CoB,CAAtB;AA8CO,IAAMC,OAAO,GAAGtB,QAAQ,CAACuB,KAAT,CAAe,SAAf,EAA0BrB,aAA1B,CAAhB","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\models\\","sourcesContent":["const mongoose = require('mongoose');\r\n\r\n//Tracker schema\r\nconst trackerSchema = mongoose.Schema({\r\n    from:{\r\n        type: String,\r\n        required: true\r\n    },\r\n    to:{\r\n        type: String,\r\n        required: true\r\n    },\r\n    isActive: {\r\n        type: Boolean,\r\n        required: true\r\n    },\r\n    startDates: {\r\n        type: Array,\r\n        required: function(){return (this.type === 'N')}\r\n    },\r\n    endDates:  {\r\n        type: Array,\r\n        required: function(){return (this.type === 'N')}\r\n    },\r\n\r\n    /**\r\n     * N - Normal, trackers created by users\r\n     * F - Frequent routes - Can only be created by an ADMIN\r\n     */\r\n    type: String,\r\n    //If type is F\r\n    occurrences: Array,\r\n    //Array of sources' ids\r\n    sources: Array,\r\n    isAlertActive: Boolean,\r\n    //If the user is not registered, alert is send to the user email\r\n    userEmail: {\r\n        type: String,\r\n        required: function(){return this.type === 'N' && !this.userId}\r\n    },\r\n    userId: {\r\n        type: String,\r\n        required: function(){return this.type === 'N' && !this.userEmail} \r\n    },\r\n    triggerPrice: Number,\r\n},{\r\n    timestamps: true\r\n});\r\n\r\nexport const Tracker = mongoose.model('Tracker', trackerSchema);\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a720c70a25ab01cc1a4b0c01e181925233cbffd3","contentHash":"8ccecc194aca5fd9ce8d4464bb704adb92c2f62d6d1f22c1015b6718600836c0"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\constants\\index.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\constants\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":166}},"2":{"start":{"line":7,"column":33},"end":{"line":27,"column":2}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":64}},"4":{"start":{"line":29,"column":18},"end":{"line":29,"column":19}},"5":{"start":{"line":30,"column":0},"end":{"line":30,"column":34}},"6":{"start":{"line":31,"column":27},"end":{"line":34,"column":1}},"7":{"start":{"line":35,"column":0},"end":{"line":35,"column":52}},"8":{"start":{"line":36,"column":19},"end":{"line":36,"column":23}},"9":{"start":{"line":38,"column":0},"end":{"line":38,"column":36}},"10":{"start":{"line":39,"column":20},"end":{"line":39,"column":72}},"11":{"start":{"line":40,"column":0},"end":{"line":40,"column":38}},"12":{"start":{"line":41,"column":18},"end":{"line":45,"column":1}},"13":{"start":{"line":111,"column":0},"end":{"line":111,"column":34}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["FrequentTrackerOccurrences","interval","length","NB_TRACKERS","NB_TRACKERS_PER_USER","REGISTERED","VISITOR","EARTH_RADIUS","AIRPORT_TYPES","TERMS_TYPES","shortTerm","mediumTerm","longTerm"],"mappings":";;;;;;AAAO,IAAMA,0BAA0B,GAAG,CACtC;AACA;AACA;AAACC,EAAAA,QAAQ,EAAE,IAAX;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CAHsC,EAItC;AAACD,EAAAA,QAAQ,EAAE,IAAX;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CAJsC,EAKtC;AACA;AAACD,EAAAA,QAAQ,EAAE,IAAX;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CANsC,EAOtC;AAACD,EAAAA,QAAQ,EAAE,IAAX;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CAPsC,EAQtC;AACA;AACA;AAACD,EAAAA,QAAQ,EAAE,IAAX;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CAVsC,CAAnC;;AAaA,IAAMC,WAAW,GAAG,CAApB;;AACA,IAAMC,oBAAoB,GAAG;AAChCC,EAAAA,UAAU,EAAE,CADoB;AAEhCC,EAAAA,OAAO,EAAE;AAFuB,CAA7B;;AAIA,IAAMC,YAAY,GAAG,IAArB,C,CAA2B;;;AAC3B,IAAMC,aAAa,GAAG,CAAC,gBAAD,EAAmB,eAAnB,EAAoC,eAApC,CAAtB;;AAEA,IAAMC,WAAW,GAAG;AACvBC,EAAAA,SAAS,EAAE,YADY;AAEvBC,EAAAA,UAAU,EAAE,aAFW;AAGvBC,EAAAA,QAAQ,EAAE;AAHa,CAApB;AAKP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEI;AACJ;AACA;AACA;AACA;AACA;AACA","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\constants\\","sourcesContent":["export const FrequentTrackerOccurrences = [\r\n    //Short term travels\r\n    //{interval: '1w', length: '1w'},\r\n    {interval: '2w', length: '1w'},\r\n    {interval: '1m', length: '2w'},\r\n    //Medium term travels\r\n    {interval: '2m', length: '1w'},\r\n    {interval: '4m', length: '2w'},\r\n    //Long term travels\r\n    //{interval: '6m', length: '1w'},\r\n    {interval: '9m', length: '2w'}\r\n];\r\n\r\nexport const NB_TRACKERS = 6;\r\nexport const NB_TRACKERS_PER_USER = {\r\n    REGISTERED: 6,\r\n    VISITOR: 3\r\n};\r\nexport const EARTH_RADIUS = 6371; // Radius of the earth in km\r\nexport const AIRPORT_TYPES = ['medium_airport', 'large_airport', 'multi_airport'];\r\n\r\nexport const TERMS_TYPES = {\r\n    shortTerm: 'short_term',\r\n    mediumTerm: 'medium_term',\r\n    longTerm: 'long_term'\r\n}\r\n/** AUSTRALIA - Local\r\n * Melbourne - Sydney   X\r\n * Brisbane - Sydney    X\r\n * Brisbane - Melbourne X\r\n * Adelaide - Melbourne X\r\n * Melbourne - Perth    X\r\n * Perth - Sydney       X\r\n * Adelaide - Sydney    X\r\n * Hobart - Melbourne   X\r\n */\r\n\r\n /** AUSTRALIA - International\r\n  * Sydney - Los Angeles    X\r\n  * Sydney - London         X\r\n  * Sydney - Paris          X\r\n  * Sydney - Tokyo          X\r\n  * Sydney - Beijing        X\r\n  * Sydney - Hong Kong      X\r\n  * Sydney - Bali           X\r\n  * Sydney - Auckland       X\r\n  * Syndey - Singapore      X\r\n  * Sydney - Rio de Janeiro X\r\n  */\r\n\r\n /** AMERICA\r\n  * New York, Miami, Boston, Chicago, Washington, Dallas, San Francisco, Atlanta, Los Angeles, Seatle, \r\n  * Toronto, Vancouver, Mexico\r\n  * \r\n  * New York - Miami   X\r\n  * Los Angeles - New York  X\r\n  * Los Angeles - San Francisco  X\r\n  * New York - Chicago  X\r\n  * New York - Toronto X\r\n  */\r\n\r\n  /** EUROPE\r\n   * London, Paris, Berlin, Madrid, Rome, Dublin\r\n   * Dublin - London\r\n   * Paris - London X\r\n   * London - Madrid X\r\n   * London - Rome X\r\n   * Paris - Madrid X\r\n   * Paris - Rome X\r\n   */\r\n\r\n   /** ASIA\r\n    * \r\n    * Hong Kong - Taipei X\r\n    * Kuala Lumpur - Singapore X\r\n    * Jakarta - Singapore X\r\n    * Jakarta - Kuala Lumpur X\r\n    * Hong Kong - Shanghai X\r\n    * Hong Kong - Seoul (SEL) not existing\r\n    * Beijing - Hong Kong X\r\n    * Bangkok - Singapore X\r\n    */\r\n\r\n    /** FRANCE\r\n     *  Paris, Marseille, Toulouse, Nice, Lyon\r\n     *  Paris - Toulouse X\r\n     *  Paris - Nice X\r\n     *  Paris - Lyon X\r\n     *  Paris - Marseille X\r\n     */"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5a9cd3de049d9c14e2bfec4916456d7f7982cd3a","contentHash":"da9bbd0d91311a21514dc9e02b204a354bf318ce5d0ff068d305ada0963f1ad9"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\data\\airport.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\data\\airport.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":58}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":185}},"4":{"start":{"line":11,"column":23},"end":{"line":11,"column":95}},"5":{"start":{"line":13,"column":19},"end":{"line":13,"column":80}},"6":{"start":{"line":15,"column":25},"end":{"line":15,"column":99}},"7":{"start":{"line":17,"column":18},"end":{"line":17,"column":73}},"8":{"start":{"line":19,"column":15},"end":{"line":19,"column":55}},"9":{"start":{"line":21,"column":21},"end":{"line":21,"column":59}},"10":{"start":{"line":23,"column":11},"end":{"line":23,"column":36}},"11":{"start":{"line":25,"column":17},"end":{"line":25,"column":40}},"12":{"start":{"line":27,"column":54},"end":{"line":27,"column":73}},"13":{"start":{"line":27,"column":75},"end":{"line":27,"column":326}},"14":{"start":{"line":27,"column":125},"end":{"line":27,"column":161}},"15":{"start":{"line":27,"column":163},"end":{"line":27,"column":292}},"16":{"start":{"line":27,"column":183},"end":{"line":27,"column":292}},"17":{"start":{"line":27,"column":225},"end":{"line":27,"column":288}},"18":{"start":{"line":27,"column":293},"end":{"line":27,"column":324}},"19":{"start":{"line":27,"column":327},"end":{"line":27,"column":339}},"20":{"start":{"line":29,"column":33},"end":{"line":29,"column":534}},"21":{"start":{"line":29,"column":46},"end":{"line":29,"column":47}},"22":{"start":{"line":29,"column":91},"end":{"line":29,"column":131}},"23":{"start":{"line":29,"column":133},"end":{"line":29,"column":532}},"24":{"start":{"line":29,"column":146},"end":{"line":29,"column":264}},"25":{"start":{"line":29,"column":201},"end":{"line":29,"column":260}},"26":{"start":{"line":29,"column":272},"end":{"line":29,"column":532}},"27":{"start":{"line":29,"column":312},"end":{"line":29,"column":386}},"28":{"start":{"line":29,"column":396},"end":{"line":29,"column":530}},"29":{"start":{"line":29,"column":445},"end":{"line":29,"column":526}},"30":{"start":{"line":29,"column":535},"end":{"line":29,"column":549}},"31":{"start":{"line":36,"column":41},"end":{"line":77,"column":3}},"32":{"start":{"line":37,"column":14},"end":{"line":72,"column":5}},"33":{"start":{"line":39,"column":4},"end":{"line":71,"column":16}},"34":{"start":{"line":40,"column":6},"end":{"line":70,"column":7}},"35":{"start":{"line":41,"column":8},"end":{"line":69,"column":9}},"36":{"start":{"line":43,"column":12},"end":{"line":43,"column":65}},"37":{"start":{"line":44,"column":12},"end":{"line":64,"column":38}},"38":{"start":{"line":68,"column":12},"end":{"line":68,"column":35}},"39":{"start":{"line":74,"column":2},"end":{"line":76,"column":4}},"40":{"start":{"line":75,"column":4},"end":{"line":75,"column":40}},"41":{"start":{"line":79,"column":0},"end":{"line":79,"column":54}},"42":{"start":{"line":81,"column":35},"end":{"line":123,"column":3}},"43":{"start":{"line":82,"column":14},"end":{"line":118,"column":5}},"44":{"start":{"line":84,"column":4},"end":{"line":117,"column":17}},"45":{"start":{"line":85,"column":6},"end":{"line":116,"column":7}},"46":{"start":{"line":86,"column":8},"end":{"line":115,"column":9}},"47":{"start":{"line":88,"column":12},"end":{"line":88,"column":67}},"48":{"start":{"line":90,"column":12},"end":{"line":93,"column":13}},"49":{"start":{"line":91,"column":14},"end":{"line":91,"column":33}},"50":{"start":{"line":92,"column":14},"end":{"line":92,"column":20}},"51":{"start":{"line":95,"column":12},"end":{"line":99,"column":14}},"52":{"start":{"line":100,"column":12},"end":{"line":103,"column":40}},"53":{"start":{"line":106,"column":12},"end":{"line":110,"column":41}},"54":{"start":{"line":107,"column":14},"end":{"line":107,"column":56}},"55":{"start":{"line":109,"column":14},"end":{"line":109,"column":173}},"56":{"start":{"line":114,"column":12},"end":{"line":114,"column":36}},"57":{"start":{"line":120,"column":2},"end":{"line":122,"column":4}},"58":{"start":{"line":121,"column":4},"end":{"line":121,"column":40}},"59":{"start":{"line":125,"column":0},"end":{"line":125,"column":42}},"60":{"start":{"line":135,"column":2},"end":{"line":135,"column":29}},"61":{"start":{"line":138,"column":27},"end":{"line":190,"column":1}},"62":{"start":{"line":139,"column":14},"end":{"line":139,"column":83}},"63":{"start":{"line":141,"column":2},"end":{"line":189,"column":7}},"64":{"start":{"line":142,"column":16},"end":{"line":184,"column":7}},"65":{"start":{"line":144,"column":6},"end":{"line":183,"column":19}},"66":{"start":{"line":145,"column":8},"end":{"line":182,"column":9}},"67":{"start":{"line":146,"column":10},"end":{"line":181,"column":11}},"68":{"start":{"line":148,"column":14},"end":{"line":153,"column":17}},"69":{"start":{"line":154,"column":14},"end":{"line":154,"column":33}},"70":{"start":{"line":155,"column":14},"end":{"line":155,"column":43}},"71":{"start":{"line":158,"column":14},"end":{"line":158,"column":40}},"72":{"start":{"line":159,"column":14},"end":{"line":159,"column":34}},"73":{"start":{"line":160,"column":14},"end":{"line":160,"column":42}},"74":{"start":{"line":161,"column":14},"end":{"line":174,"column":17}},"75":{"start":{"line":168,"column":18},"end":{"line":168,"column":109}},"76":{"start":{"line":171,"column":16},"end":{"line":173,"column":19}},"77":{"start":{"line":175,"column":14},"end":{"line":175,"column":45}},"78":{"start":{"line":176,"column":14},"end":{"line":176,"column":43}},"79":{"start":{"line":180,"column":14},"end":{"line":180,"column":38}},"80":{"start":{"line":186,"column":4},"end":{"line":188,"column":6}},"81":{"start":{"line":187,"column":6},"end":{"line":187,"column":42}},"82":{"start":{"line":192,"column":0},"end":{"line":192,"column":52}},"83":{"start":{"line":194,"column":25},"end":{"line":196,"column":1}},"84":{"start":{"line":195,"column":2},"end":{"line":195,"column":46}},"85":{"start":{"line":204,"column":0},"end":{"line":204,"column":48}},"86":{"start":{"line":206,"column":45},"end":{"line":244,"column":3}},"87":{"start":{"line":207,"column":14},"end":{"line":239,"column":5}},"88":{"start":{"line":209,"column":17},"end":{"line":209,"column":26}},"89":{"start":{"line":210,"column":4},"end":{"line":238,"column":17}},"90":{"start":{"line":211,"column":6},"end":{"line":237,"column":7}},"91":{"start":{"line":212,"column":8},"end":{"line":236,"column":9}},"92":{"start":{"line":214,"column":12},"end":{"line":214,"column":84}},"93":{"start":{"line":215,"column":12},"end":{"line":215,"column":36}},"94":{"start":{"line":216,"column":12},"end":{"line":231,"column":32}},"95":{"start":{"line":235,"column":12},"end":{"line":235,"column":36}},"96":{"start":{"line":241,"column":2},"end":{"line":243,"column":4}},"97":{"start":{"line":242,"column":4},"end":{"line":242,"column":40}},"98":{"start":{"line":246,"column":0},"end":{"line":246,"column":62}},"99":{"start":{"line":247,"column":20},"end":{"line":247,"column":54}},"100":{"start":{"line":248,"column":0},"end":{"line":248,"column":38}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":16}},"loc":{"start":{"line":27,"column":41},"end":{"line":27,"column":341}},"line":27},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":208},"end":{"line":27,"column":209}},"loc":{"start":{"line":27,"column":223},"end":{"line":27,"column":290}},"line":27},"2":{"name":"_objectSpread","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":22}},"loc":{"start":{"line":29,"column":31},"end":{"line":29,"column":551}},"line":29},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":184},"end":{"line":29,"column":185}},"loc":{"start":{"line":29,"column":199},"end":{"line":29,"column":262}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":29,"column":428},"end":{"line":29,"column":429}},"loc":{"start":{"line":29,"column":443},"end":{"line":29,"column":528}},"line":29},"5":{"name":"(anonymous_5)","decl":{"start":{"line":36,"column":41},"end":{"line":36,"column":42}},"loc":{"start":{"line":36,"column":53},"end":{"line":77,"column":1}},"line":36},"6":{"name":"_callee","decl":{"start":{"line":37,"column":101},"end":{"line":37,"column":108}},"loc":{"start":{"line":37,"column":139},"end":{"line":72,"column":3}},"line":37},"7":{"name":"_callee$","decl":{"start":{"line":39,"column":49},"end":{"line":39,"column":57}},"loc":{"start":{"line":39,"column":68},"end":{"line":71,"column":5}},"line":39},"8":{"name":"closestAirportsFromDb","decl":{"start":{"line":74,"column":18},"end":{"line":74,"column":39}},"loc":{"start":{"line":74,"column":54},"end":{"line":76,"column":3}},"line":74},"9":{"name":"(anonymous_9)","decl":{"start":{"line":81,"column":35},"end":{"line":81,"column":36}},"loc":{"start":{"line":81,"column":47},"end":{"line":123,"column":1}},"line":81},"10":{"name":"_callee2","decl":{"start":{"line":82,"column":101},"end":{"line":82,"column":109}},"loc":{"start":{"line":82,"column":150},"end":{"line":118,"column":3}},"line":82},"11":{"name":"_callee2$","decl":{"start":{"line":84,"column":49},"end":{"line":84,"column":58}},"loc":{"start":{"line":84,"column":70},"end":{"line":117,"column":5}},"line":84},"12":{"name":"(anonymous_12)","decl":{"start":{"line":106,"column":66},"end":{"line":106,"column":67}},"loc":{"start":{"line":106,"column":86},"end":{"line":108,"column":13}},"line":106},"13":{"name":"(anonymous_13)","decl":{"start":{"line":108,"column":20},"end":{"line":108,"column":21}},"loc":{"start":{"line":108,"column":36},"end":{"line":110,"column":13}},"line":108},"14":{"name":"closestAirports","decl":{"start":{"line":120,"column":18},"end":{"line":120,"column":33}},"loc":{"start":{"line":120,"column":49},"end":{"line":122,"column":3}},"line":120},"15":{"name":"initializeAirportSearch","decl":{"start":{"line":127,"column":9},"end":{"line":127,"column":32}},"loc":{"start":{"line":127,"column":35},"end":{"line":136,"column":1}},"line":127},"16":{"name":"airportsBySearchTerm","decl":{"start":{"line":138,"column":36},"end":{"line":138,"column":56}},"loc":{"start":{"line":138,"column":69},"end":{"line":190,"column":1}},"line":138},"17":{"name":"(anonymous_17)","decl":{"start":{"line":141,"column":35},"end":{"line":141,"column":36}},"loc":{"start":{"line":141,"column":47},"end":{"line":189,"column":3}},"line":141},"18":{"name":"_callee3","decl":{"start":{"line":142,"column":103},"end":{"line":142,"column":111}},"loc":{"start":{"line":142,"column":121},"end":{"line":184,"column":5}},"line":142},"19":{"name":"_callee3$","decl":{"start":{"line":144,"column":51},"end":{"line":144,"column":60}},"loc":{"start":{"line":144,"column":72},"end":{"line":183,"column":7}},"line":144},"20":{"name":"sort","decl":{"start":{"line":167,"column":31},"end":{"line":167,"column":35}},"loc":{"start":{"line":167,"column":42},"end":{"line":169,"column":17}},"line":167},"21":{"name":"(anonymous_21)","decl":{"start":{"line":170,"column":21},"end":{"line":170,"column":22}},"loc":{"start":{"line":170,"column":34},"end":{"line":174,"column":15}},"line":170},"22":{"name":"(anonymous_22)","decl":{"start":{"line":186,"column":11},"end":{"line":186,"column":12}},"loc":{"start":{"line":186,"column":26},"end":{"line":188,"column":5}},"line":186},"23":{"name":"airportsWithFilter","decl":{"start":{"line":194,"column":34},"end":{"line":194,"column":52}},"loc":{"start":{"line":194,"column":68},"end":{"line":196,"column":1}},"line":194},"24":{"name":"(anonymous_24)","decl":{"start":{"line":206,"column":45},"end":{"line":206,"column":46}},"loc":{"start":{"line":206,"column":57},"end":{"line":244,"column":1}},"line":206},"25":{"name":"_callee4","decl":{"start":{"line":207,"column":101},"end":{"line":207,"column":109}},"loc":{"start":{"line":207,"column":122},"end":{"line":239,"column":3}},"line":207},"26":{"name":"_callee4$","decl":{"start":{"line":210,"column":49},"end":{"line":210,"column":58}},"loc":{"start":{"line":210,"column":70},"end":{"line":238,"column":5}},"line":210},"27":{"name":"airportsBySearchTermMongo","decl":{"start":{"line":241,"column":18},"end":{"line":241,"column":43}},"loc":{"start":{"line":241,"column":49},"end":{"line":243,"column":3}},"line":241}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":75},"end":{"line":27,"column":326}},"type":"if","locations":[{"start":{"line":27,"column":75},"end":{"line":27,"column":326}},{"start":{"line":27,"column":75},"end":{"line":27,"column":326}}],"line":27},"1":{"loc":{"start":{"line":27,"column":163},"end":{"line":27,"column":292}},"type":"if","locations":[{"start":{"line":27,"column":163},"end":{"line":27,"column":292}},{"start":{"line":27,"column":163},"end":{"line":27,"column":292}}],"line":27},"2":{"loc":{"start":{"line":29,"column":91},"end":{"line":29,"column":131}},"type":"cond-expr","locations":[{"start":{"line":29,"column":114},"end":{"line":29,"column":126}},{"start":{"line":29,"column":129},"end":{"line":29,"column":131}}],"line":29},"3":{"loc":{"start":{"line":29,"column":133},"end":{"line":29,"column":532}},"type":"if","locations":[{"start":{"line":29,"column":133},"end":{"line":29,"column":532}},{"start":{"line":29,"column":133},"end":{"line":29,"column":532}}],"line":29},"4":{"loc":{"start":{"line":29,"column":272},"end":{"line":29,"column":532}},"type":"if","locations":[{"start":{"line":29,"column":272},"end":{"line":29,"column":532}},{"start":{"line":29,"column":272},"end":{"line":29,"column":532}}],"line":29},"5":{"loc":{"start":{"line":41,"column":8},"end":{"line":69,"column":9}},"type":"switch","locations":[{"start":{"line":42,"column":10},"end":{"line":64,"column":38}},{"start":{"line":66,"column":10},"end":{"line":66,"column":17}},{"start":{"line":67,"column":10},"end":{"line":68,"column":35}}],"line":41},"6":{"loc":{"start":{"line":86,"column":8},"end":{"line":115,"column":9}},"type":"switch","locations":[{"start":{"line":87,"column":10},"end":{"line":103,"column":40}},{"start":{"line":105,"column":10},"end":{"line":110,"column":41}},{"start":{"line":112,"column":10},"end":{"line":112,"column":17}},{"start":{"line":113,"column":10},"end":{"line":114,"column":36}}],"line":86},"7":{"loc":{"start":{"line":90,"column":12},"end":{"line":93,"column":13}},"type":"if","locations":[{"start":{"line":90,"column":12},"end":{"line":93,"column":13}},{"start":{"line":90,"column":12},"end":{"line":93,"column":13}}],"line":90},"8":{"loc":{"start":{"line":139,"column":14},"end":{"line":139,"column":83}},"type":"cond-expr","locations":[{"start":{"line":139,"column":67},"end":{"line":139,"column":79}},{"start":{"line":139,"column":82},"end":{"line":139,"column":83}}],"line":139},"9":{"loc":{"start":{"line":139,"column":14},"end":{"line":139,"column":64}},"type":"binary-expr","locations":[{"start":{"line":139,"column":14},"end":{"line":139,"column":34}},{"start":{"line":139,"column":38},"end":{"line":139,"column":64}}],"line":139},"10":{"loc":{"start":{"line":146,"column":10},"end":{"line":181,"column":11}},"type":"switch","locations":[{"start":{"line":147,"column":12},"end":{"line":155,"column":43}},{"start":{"line":157,"column":12},"end":{"line":176,"column":43}},{"start":{"line":178,"column":12},"end":{"line":178,"column":19}},{"start":{"line":179,"column":12},"end":{"line":180,"column":38}}],"line":146},"11":{"loc":{"start":{"line":212,"column":8},"end":{"line":236,"column":9}},"type":"switch","locations":[{"start":{"line":213,"column":10},"end":{"line":231,"column":32}},{"start":{"line":233,"column":10},"end":{"line":233,"column":17}},{"start":{"line":234,"column":10},"end":{"line":235,"column":36}}],"line":212},"12":{"loc":{"start":{"line":214,"column":23},"end":{"line":214,"column":83}},"type":"cond-expr","locations":[{"start":{"line":214,"column":70},"end":{"line":214,"column":79}},{"start":{"line":214,"column":82},"end":{"line":214,"column":83}}],"line":214},"13":{"loc":{"start":{"line":214,"column":23},"end":{"line":214,"column":67}},"type":"binary-expr","locations":[{"start":{"line":214,"column":23},"end":{"line":214,"column":40}},{"start":{"line":214,"column":44},"end":{"line":214,"column":67}}],"line":214}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":1,"60":2,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":1,"84":0,"85":1,"86":1,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":1,"99":1,"100":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":2,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0,0],"11":[0,0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"sources":["airport.js"],"names":["closestAirportsFromDb","numberAirports","filter","longitude","latitude","Airport","find","$and","$or","type","coordinates","$nearSphere","$geometry","Number","limit","closestAirports","airportsTracker","airportSearch","dataLoaded","iataCode","$in","map","getAirport","sort","a","b","slice","initializeAirportSearch","initialize","airportsBySearchTerm","searchTerm","Promise","resolve","index","FlexSearch","doc","id","field","fetch","airports","add","console","time","res","search","query","threshold","depth","AIRPORT_TYPES","indexOf","r","_id","timeEnd","airportsWithFilter","fields","airportsBySearchTermMongo","limitRes","log","$text","$search","$caseSensitive","AirportSearch"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\data\\","sourcesContent":["//const FlexSearch = require(\"@talaikis/flexsearch\");\r\nimport FlexSearch from '@talaikis/flexsearch';\r\nimport { Airport } from '../../database/models/Airport';\r\nimport { AirportSearch } from '../../classes/AirportSearch';\r\n\r\nimport { computeGeoDistance } from '../helpers/geo';\r\n\r\nimport { AIRPORT_TYPES } from '../constants';\r\n\r\n/**\r\n * Return only medium or large airports, and with a iata code\r\n * @param {Object} param0 \r\n * @param {Number} numberAirports \r\n */\r\nexport const closestAirportsFromDb = async ({longitude, latitude}, numberAirports, filter) => {\r\n\treturn Airport.find(\r\n\t\t{ $and: [\r\n\t\t\t{$or: [{type: 'medium_airport'}, {type: 'large_airport'}, {type: 'multi_airport'}]}, \r\n\t\t\tfilter,\r\n\t\t\t/*{iataCode:{$ne: ''}},*/\r\n\t\t\t{\r\n\t\t\t\tcoordinates: {\r\n\t\t\t\t\t$nearSphere: {\r\n\t\t\t\t\t\t$geometry: {coordinates: [Number(longitude), Number(latitude)]}, \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]}\r\n\t).limit(numberAirports);\r\n}\r\n\r\nexport const closestAirports = async ({longitude, latitude}, numberAirports, airportsTracker) =>{\r\n    //If the aiports have not been loaded yet, check closest airports directly in the database\r\n    if(!airportSearch.dataLoaded()){\r\n        let filter = {iataCode: {$in: airportsTracker}};\r\n        return closestAirportsFromDb({longitude, latitude}, numberAirports, filter);\r\n    } \r\n\r\n    return airportsTracker\r\n    .map(iataCode => airportSearch.getAirport(iataCode))\r\n    .sort((a, b) => (computeGeoDistance(latitude, longitude, a.latitude, a.longitude) - computeGeoDistance(latitude, longitude, b.latitude, b.longitude)))\r\n    .slice(0, numberAirports);\r\n}\r\n\r\nexport function initializeAirportSearch(){\r\n    /*let filter = {$and: \r\n        [\r\n            {$or: [{type: 'medium_airport'}, {type: 'large_airport'}, {type: 'multi_airport'}]}, \r\n            {iataCode:{$ne: ''}}\r\n        ]\r\n    };\r\n    airportSearch = new AirportSearch({filter});*/\r\n    airportSearch.initialize();\r\n}\r\n\r\nexport const airportsBySearchTerm = (searchTerm, limit = 6) => {\r\n    //if(!airportSearch) initializeAirportSearch();\r\n\r\n    return new Promise(async (resolve) => {\r\n        let index = new FlexSearch({\r\n            doc: {\r\n                id: \"_id\",\r\n                field: [\"city\", \"name\", \"iataCode\", \"country\"]\r\n            }\r\n        });\r\n    \r\n        let airports = await airportSearch.fetch();\r\n    \r\n        index.add(airports);\r\n    \r\n        console.time('Flex search');\r\n        let res = index.search({\r\n            query: searchTerm,\r\n            limit: 100,\r\n            threshold: 5, // >= threshold\r\n            depth: 3,\r\n            sort: (a, b) => AIRPORT_TYPES.indexOf(b.type) - AIRPORT_TYPES.indexOf(a.type)\r\n        }).map(r => ({...r, id: r._id}));\r\n        console.timeEnd('Flex search');\r\n        resolve(res.slice(0, limit));\r\n    });\r\n};\r\n\r\nexport const airportsWithFilter = (query, fields) =>{\r\n    return Airport.find(query, fields);\r\n}\r\n\r\n/**\r\n * Deprecated, full match search\r\n * @param {*} searchTerm \r\n * @param {*} limitRes \r\n */\r\nexport const airportsBySearchTermMongo = async (searchTerm, limitRes = 6) => {\r\n    console.log(searchTerm)\r\n    return Airport.find(\r\n        {$and: [\r\n            {$or: [{type: 'medium_airport'}, {type: 'large_airport'}, {type: 'multi_airport'}]},\r\n            { $text: {$search: searchTerm, $caseSensitive: false}},\r\n        ]}\r\n    ).limit(limitRes);\r\n};\r\n\r\nexport let airportSearch = new AirportSearch();"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e77f83d18afb2eec22f6c2eb0777ce4e194e86cf","contentHash":"eec7c03b9849810cb826c58d8cc265c457d5b84d211944f4d0e3e8990be3d26a"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\models\\Airport.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\models\\Airport.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":34}},"4":{"start":{"line":13,"column":20},"end":{"line":40,"column":2}},"5":{"start":{"line":41,"column":14},"end":{"line":41,"column":54}},"6":{"start":{"line":42,"column":0},"end":{"line":42,"column":26}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["Airport.js"],"names":["mongoose","require","AirportSchema","Schema","identification","String","name","type","text","iataCode","city","region","country","continent","latitude","Number","longitude","localCode","gpsCode","elevation","isSingleAirport","Boolean","coordinates","Array","timestamps","Airport","model"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB,C,CAEA;;;AACA,IAAMC,aAAa,GAAGF,QAAQ,CAACG,MAAT,CAAgB;AAClCC,EAAAA,cAAc,EAAEC,MADkB;AAElCC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEF,MAAR;AAAgBG,IAAAA,IAAI,EAAE;AAAtB,GAF4B;AAGlCC,EAAAA,QAAQ,EAAE;AAAEF,IAAAA,IAAI,EAAEF,MAAR;AAAgBG,IAAAA,IAAI,EAAE;AAAtB,GAHwB;AAIlCD,EAAAA,IAAI,EAAEF,MAJ4B;AAKlCK,EAAAA,IAAI,EAAE;AAAEH,IAAAA,IAAI,EAAEF,MAAR;AAAgBG,IAAAA,IAAI,EAAE;AAAtB,GAL4B;AAMlCG,EAAAA,MAAM,EAAEN,MAN0B;AAOlCO,EAAAA,OAAO,EAAEP,MAPyB;AAQlCQ,EAAAA,SAAS,EAAER,MARuB;AASlCS,EAAAA,QAAQ,EAAEC,MATwB;AAUlCC,EAAAA,SAAS,EAAED,MAVuB;AAWlCE,EAAAA,SAAS,EAAEZ,MAXuB;AAYlCa,EAAAA,OAAO,EAAEb,MAZyB;AAalCc,EAAAA,SAAS,EAAEJ,MAbuB;AAclCK,EAAAA,eAAe,EAAEC,OAdiB;AAelCC,EAAAA,WAAW,EAAEC;AAfqB,CAAhB,EAgBpB;AACEC,EAAAA,UAAU,EAAE;AADd,CAhBoB,CAAtB;AAoBO,IAAMC,OAAO,GAAGzB,QAAQ,CAAC0B,KAAT,CAAe,SAAf,EAA0BxB,aAA1B,CAAhB","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\models\\","sourcesContent":["import {ObjectID} from 'mongodb';\r\n\r\nconst mongoose = require('mongoose');\r\n\r\n//Tracker schema\r\nconst AirportSchema = mongoose.Schema({\r\n    identification: String,\r\n    name: { type: String, text: true },\r\n    iataCode: { type: String, text: true },\r\n    type: String,\r\n    city: { type: String, text: true },\r\n    region: String,\r\n    country: String,\r\n    continent: String,\r\n    latitude: Number,\r\n    longitude: Number,\r\n    localCode: String,\r\n    gpsCode: String,\r\n    elevation: Number,\r\n    isSingleAirport: Boolean,\r\n    coordinates: Array\r\n},{\r\n    timestamps: true\r\n});\r\n\r\nexport const Airport = mongoose.model('Airport', AirportSchema);\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"98baaea11da24588813b4ab5d6cd4d71e312d05f","contentHash":"0c1832fc2739bc6a7cefc23926b19b43e28c14fd4f96c6b19d689f8bc48ffaec"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\AirportSearch.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\AirportSearch.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":52}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":37}},"9":{"start":{"line":22,"column":65},"end":{"line":22,"column":623}},"10":{"start":{"line":22,"column":132},"end":{"line":22,"column":463}},"11":{"start":{"line":22,"column":252},"end":{"line":22,"column":267}},"12":{"start":{"line":22,"column":260},"end":{"line":22,"column":267}},"13":{"start":{"line":22,"column":276},"end":{"line":22,"column":277}},"14":{"start":{"line":22,"column":287},"end":{"line":22,"column":302}},"15":{"start":{"line":22,"column":304},"end":{"line":22,"column":461}},"16":{"start":{"line":22,"column":337},"end":{"line":22,"column":378}},"17":{"start":{"line":22,"column":356},"end":{"line":22,"column":378}},"18":{"start":{"line":22,"column":379},"end":{"line":22,"column":417}},"19":{"start":{"line":22,"column":441},"end":{"line":22,"column":450}},"20":{"start":{"line":22,"column":464},"end":{"line":22,"column":621}},"21":{"start":{"line":22,"column":647},"end":{"line":22,"column":651}},"22":{"start":{"line":22,"column":662},"end":{"line":22,"column":667}},"23":{"start":{"line":22,"column":674},"end":{"line":22,"column":995}},"24":{"start":{"line":22,"column":701},"end":{"line":22,"column":727}},"25":{"start":{"line":22,"column":760},"end":{"line":22,"column":769}},"26":{"start":{"line":22,"column":771},"end":{"line":22,"column":800}},"27":{"start":{"line":22,"column":801},"end":{"line":22,"column":813}},"28":{"start":{"line":22,"column":838},"end":{"line":22,"column":852}},"29":{"start":{"line":22,"column":853},"end":{"line":22,"column":863}},"30":{"start":{"line":22,"column":885},"end":{"line":22,"column":990}},"31":{"start":{"line":22,"column":891},"end":{"line":22,"column":953}},"32":{"start":{"line":22,"column":938},"end":{"line":22,"column":953}},"33":{"start":{"line":22,"column":966},"end":{"line":22,"column":988}},"34":{"start":{"line":22,"column":978},"end":{"line":22,"column":988}},"35":{"start":{"line":24,"column":50},"end":{"line":24,"column":65}},"36":{"start":{"line":24,"column":58},"end":{"line":24,"column":65}},"37":{"start":{"line":24,"column":66},"end":{"line":24,"column":129}},"38":{"start":{"line":24,"column":93},"end":{"line":24,"column":129}},"39":{"start":{"line":24,"column":138},"end":{"line":24,"column":184}},"40":{"start":{"line":24,"column":186},"end":{"line":24,"column":246}},"41":{"start":{"line":24,"column":223},"end":{"line":24,"column":246}},"42":{"start":{"line":24,"column":247},"end":{"line":24,"column":300}},"43":{"start":{"line":24,"column":279},"end":{"line":24,"column":300}},"44":{"start":{"line":24,"column":301},"end":{"line":24,"column":414}},"45":{"start":{"line":24,"column":378},"end":{"line":24,"column":414}},"46":{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},"47":{"start":{"line":26,"column":76},"end":{"line":26,"column":93}},"48":{"start":{"line":26,"column":94},"end":{"line":26,"column":168}},"49":{"start":{"line":26,"column":107},"end":{"line":26,"column":108}},"50":{"start":{"line":26,"column":117},"end":{"line":26,"column":131}},"51":{"start":{"line":26,"column":149},"end":{"line":26,"column":166}},"52":{"start":{"line":26,"column":169},"end":{"line":26,"column":181}},"53":{"start":{"line":28,"column":20},"end":{"line":42,"column":1}},"54":{"start":{"line":44,"column":33},"end":{"line":345,"column":3}},"55":{"start":{"line":53,"column":15},"end":{"line":53,"column":85}},"56":{"start":{"line":54,"column":22},"end":{"line":54,"column":33}},"57":{"start":{"line":55,"column":17},"end":{"line":55,"column":69}},"58":{"start":{"line":56,"column":29},"end":{"line":56,"column":47}},"59":{"start":{"line":57,"column":24},"end":{"line":57,"column":86}},"60":{"start":{"line":58,"column":28},"end":{"line":58,"column":45}},"61":{"start":{"line":59,"column":23},"end":{"line":61,"column":25}},"62":{"start":{"line":63,"column":4},"end":{"line":63,"column":58}},"63":{"start":{"line":64,"column":4},"end":{"line":64,"column":23}},"64":{"start":{"line":65,"column":4},"end":{"line":65,"column":33}},"65":{"start":{"line":66,"column":4},"end":{"line":66,"column":25}},"66":{"start":{"line":67,"column":4},"end":{"line":67,"column":26}},"67":{"start":{"line":68,"column":4},"end":{"line":68,"column":39}},"68":{"start":{"line":69,"column":4},"end":{"line":69,"column":20}},"69":{"start":{"line":70,"column":4},"end":{"line":70,"column":31}},"70":{"start":{"line":71,"column":4},"end":{"line":71,"column":50}},"71":{"start":{"line":72,"column":4},"end":{"line":72,"column":91}},"72":{"start":{"line":74,"column":4},"end":{"line":74,"column":25}},"73":{"start":{"line":83,"column":2},"end":{"line":343,"column":6}},"74":{"start":{"line":86,"column":18},"end":{"line":86,"column":22}},"75":{"start":{"line":88,"column":6},"end":{"line":123,"column":11}},"76":{"start":{"line":89,"column":20},"end":{"line":118,"column":11}},"77":{"start":{"line":91,"column":10},"end":{"line":117,"column":22}},"78":{"start":{"line":92,"column":12},"end":{"line":116,"column":13}},"79":{"start":{"line":93,"column":14},"end":{"line":115,"column":15}},"80":{"start":{"line":95,"column":18},"end":{"line":95,"column":40}},"81":{"start":{"line":97,"column":18},"end":{"line":97,"column":36}},"82":{"start":{"line":98,"column":18},"end":{"line":98,"column":61}},"83":{"start":{"line":101,"column":18},"end":{"line":103,"column":21}},"84":{"start":{"line":102,"column":20},"end":{"line":102,"column":40}},"85":{"start":{"line":104,"column":18},"end":{"line":104,"column":47}},"86":{"start":{"line":106,"column":18},"end":{"line":106,"column":55}},"87":{"start":{"line":108,"column":18},"end":{"line":108,"column":40}},"88":{"start":{"line":110,"column":18},"end":{"line":110,"column":28}},"89":{"start":{"line":114,"column":18},"end":{"line":114,"column":41}},"90":{"start":{"line":120,"column":8},"end":{"line":122,"column":10}},"91":{"start":{"line":121,"column":10},"end":{"line":121,"column":46}},"92":{"start":{"line":128,"column":24},"end":{"line":176,"column":9}},"93":{"start":{"line":130,"column":8},"end":{"line":175,"column":27}},"94":{"start":{"line":131,"column":10},"end":{"line":174,"column":11}},"95":{"start":{"line":132,"column":12},"end":{"line":173,"column":13}},"96":{"start":{"line":134,"column":16},"end":{"line":137,"column":17}},"97":{"start":{"line":135,"column":18},"end":{"line":135,"column":38}},"98":{"start":{"line":136,"column":18},"end":{"line":136,"column":24}},"99":{"start":{"line":139,"column":16},"end":{"line":139,"column":90}},"100":{"start":{"line":140,"column":16},"end":{"line":140,"column":35}},"101":{"start":{"line":141,"column":16},"end":{"line":141,"column":44}},"102":{"start":{"line":144,"column":16},"end":{"line":144,"column":43}},"103":{"start":{"line":146,"column":16},"end":{"line":149,"column":17}},"104":{"start":{"line":147,"column":18},"end":{"line":147,"column":37}},"105":{"start":{"line":148,"column":18},"end":{"line":148,"column":24}},"106":{"start":{"line":151,"column":16},"end":{"line":151,"column":64}},"107":{"start":{"line":154,"column":16},"end":{"line":157,"column":17}},"108":{"start":{"line":155,"column":18},"end":{"line":155,"column":37}},"109":{"start":{"line":156,"column":18},"end":{"line":156,"column":24}},"110":{"start":{"line":159,"column":16},"end":{"line":159,"column":64}},"111":{"start":{"line":162,"column":16},"end":{"line":162,"column":44}},"112":{"start":{"line":163,"column":16},"end":{"line":163,"column":63}},"113":{"start":{"line":164,"column":16},"end":{"line":164,"column":36}},"114":{"start":{"line":165,"column":16},"end":{"line":165,"column":22}},"115":{"start":{"line":168,"column":16},"end":{"line":168,"column":29}},"116":{"start":{"line":172,"column":16},"end":{"line":172,"column":40}},"117":{"start":{"line":179,"column":8},"end":{"line":179,"column":50}},"118":{"start":{"line":182,"column":6},"end":{"line":182,"column":24}},"119":{"start":{"line":187,"column":17},"end":{"line":190,"column":7}},"120":{"start":{"line":191,"column":6},"end":{"line":193,"column":9}},"121":{"start":{"line":203,"column":6},"end":{"line":203,"column":32}},"122":{"start":{"line":208,"column":22},"end":{"line":211,"column":7}},"123":{"start":{"line":212,"column":6},"end":{"line":214,"column":9}},"124":{"start":{"line":224,"column":19},"end":{"line":224,"column":23}},"125":{"start":{"line":226,"column":6},"end":{"line":226,"column":31}},"126":{"start":{"line":227,"column":6},"end":{"line":229,"column":9}},"127":{"start":{"line":228,"column":8},"end":{"line":228,"column":58}},"128":{"start":{"line":231,"column":6},"end":{"line":233,"column":7}},"129":{"start":{"line":232,"column":8},"end":{"line":232,"column":39}},"130":{"start":{"line":235,"column":6},"end":{"line":235,"column":38}},"131":{"start":{"line":236,"column":6},"end":{"line":236,"column":22}},"132":{"start":{"line":246,"column":6},"end":{"line":246,"column":35}},"133":{"start":{"line":255,"column":22},"end":{"line":255,"column":64}},"134":{"start":{"line":258,"column":6},"end":{"line":267,"column":7}},"135":{"start":{"line":259,"column":8},"end":{"line":262,"column":9}},"136":{"start":{"line":260,"column":25},"end":{"line":260,"column":36}},"137":{"start":{"line":261,"column":10},"end":{"line":261,"column":34}},"138":{"start":{"line":264,"column":8},"end":{"line":264,"column":25}},"139":{"start":{"line":266,"column":8},"end":{"line":266,"column":22}},"140":{"start":{"line":269,"column":6},"end":{"line":269,"column":28}},"141":{"start":{"line":274,"column":6},"end":{"line":274,"column":29}},"142":{"start":{"line":285,"column":19},"end":{"line":285,"column":23}},"143":{"start":{"line":287,"column":6},"end":{"line":325,"column":11}},"144":{"start":{"line":288,"column":20},"end":{"line":320,"column":11}},"145":{"start":{"line":289,"column":10},"end":{"line":319,"column":23}},"146":{"start":{"line":290,"column":12},"end":{"line":318,"column":13}},"147":{"start":{"line":291,"column":14},"end":{"line":317,"column":15}},"148":{"start":{"line":293,"column":18},"end":{"line":296,"column":19}},"149":{"start":{"line":294,"column":20},"end":{"line":294,"column":39}},"150":{"start":{"line":295,"column":20},"end":{"line":295,"column":26}},"151":{"start":{"line":298,"column":18},"end":{"line":298,"column":44}},"152":{"start":{"line":300,"column":18},"end":{"line":300,"column":52}},"153":{"start":{"line":303,"column":18},"end":{"line":306,"column":19}},"154":{"start":{"line":304,"column":20},"end":{"line":304,"column":39}},"155":{"start":{"line":305,"column":20},"end":{"line":305,"column":26}},"156":{"start":{"line":308,"column":18},"end":{"line":308,"column":37}},"157":{"start":{"line":309,"column":18},"end":{"line":309,"column":41}},"158":{"start":{"line":312,"column":18},"end":{"line":312,"column":43}},"159":{"start":{"line":316,"column":18},"end":{"line":316,"column":42}},"160":{"start":{"line":322,"column":8},"end":{"line":324,"column":10}},"161":{"start":{"line":323,"column":10},"end":{"line":323,"column":46}},"162":{"start":{"line":330,"column":6},"end":{"line":330,"column":44}},"163":{"start":{"line":335,"column":6},"end":{"line":335,"column":25}},"164":{"start":{"line":336,"column":6},"end":{"line":336,"column":31}},"165":{"start":{"line":341,"column":6},"end":{"line":341,"column":39}},"166":{"start":{"line":344,"column":2},"end":{"line":344,"column":23}},"167":{"start":{"line":347,"column":0},"end":{"line":347,"column":38}}},"fnMap":{"0":{"name":"_createForOfIteratorHelper","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":35}},"loc":{"start":{"line":22,"column":55},"end":{"line":22,"column":997}},"line":22},"1":{"name":"F","decl":{"start":{"line":22,"column":296},"end":{"line":22,"column":297}},"loc":{"start":{"line":22,"column":300},"end":{"line":22,"column":302}},"line":22},"2":{"name":"n","decl":{"start":{"line":22,"column":331},"end":{"line":22,"column":332}},"loc":{"start":{"line":22,"column":335},"end":{"line":22,"column":419}},"line":22},"3":{"name":"e","decl":{"start":{"line":22,"column":433},"end":{"line":22,"column":434}},"loc":{"start":{"line":22,"column":439},"end":{"line":22,"column":452}},"line":22},"4":{"name":"s","decl":{"start":{"line":22,"column":695},"end":{"line":22,"column":696}},"loc":{"start":{"line":22,"column":699},"end":{"line":22,"column":729}},"line":22},"5":{"name":"n","decl":{"start":{"line":22,"column":743},"end":{"line":22,"column":744}},"loc":{"start":{"line":22,"column":747},"end":{"line":22,"column":815}},"line":22},"6":{"name":"e","decl":{"start":{"line":22,"column":829},"end":{"line":22,"column":830}},"loc":{"start":{"line":22,"column":836},"end":{"line":22,"column":865}},"line":22},"7":{"name":"f","decl":{"start":{"line":22,"column":879},"end":{"line":22,"column":880}},"loc":{"start":{"line":22,"column":883},"end":{"line":22,"column":992}},"line":22},"8":{"name":"_unsupportedIterableToArray","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":36}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":416}},"line":24},"9":{"name":"_arrayLikeToArray","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":183}},"line":26},"10":{"name":"(anonymous_10)","decl":{"start":{"line":44,"column":33},"end":{"line":44,"column":34}},"loc":{"start":{"line":44,"column":45},"end":{"line":345,"column":1}},"line":44},"11":{"name":"AirportSearch","decl":{"start":{"line":52,"column":11},"end":{"line":52,"column":24}},"loc":{"start":{"line":52,"column":27},"end":{"line":76,"column":3}},"line":52},"12":{"name":"update","decl":{"start":{"line":85,"column":20},"end":{"line":85,"column":26}},"loc":{"start":{"line":85,"column":29},"end":{"line":124,"column":5}},"line":85},"13":{"name":"(anonymous_13)","decl":{"start":{"line":88,"column":39},"end":{"line":88,"column":40}},"loc":{"start":{"line":88,"column":51},"end":{"line":123,"column":7}},"line":88},"14":{"name":"_callee","decl":{"start":{"line":89,"column":107},"end":{"line":89,"column":114}},"loc":{"start":{"line":89,"column":124},"end":{"line":118,"column":9}},"line":89},"15":{"name":"_callee$","decl":{"start":{"line":91,"column":55},"end":{"line":91,"column":63}},"loc":{"start":{"line":91,"column":74},"end":{"line":117,"column":11}},"line":91},"16":{"name":"(anonymous_16)","decl":{"start":{"line":101,"column":47},"end":{"line":101,"column":48}},"loc":{"start":{"line":101,"column":66},"end":{"line":103,"column":19}},"line":101},"17":{"name":"(anonymous_17)","decl":{"start":{"line":120,"column":15},"end":{"line":120,"column":16}},"loc":{"start":{"line":120,"column":29},"end":{"line":122,"column":9}},"line":120},"18":{"name":"(anonymous_18)","decl":{"start":{"line":127,"column":11},"end":{"line":127,"column":12}},"loc":{"start":{"line":127,"column":23},"end":{"line":183,"column":5}},"line":127},"19":{"name":"_callee2","decl":{"start":{"line":128,"column":111},"end":{"line":128,"column":119}},"loc":{"start":{"line":128,"column":122},"end":{"line":176,"column":7}},"line":128},"20":{"name":"_callee2$","decl":{"start":{"line":130,"column":53},"end":{"line":130,"column":62}},"loc":{"start":{"line":130,"column":74},"end":{"line":175,"column":9}},"line":130},"21":{"name":"initialize","decl":{"start":{"line":178,"column":15},"end":{"line":178,"column":25}},"loc":{"start":{"line":178,"column":28},"end":{"line":180,"column":7}},"line":178},"22":{"name":"writeAirportsLocalData","decl":{"start":{"line":186,"column":20},"end":{"line":186,"column":42}},"loc":{"start":{"line":186,"column":45},"end":{"line":194,"column":5}},"line":186},"23":{"name":"updateStatus","decl":{"start":{"line":202,"column":20},"end":{"line":202,"column":32}},"loc":{"start":{"line":202,"column":46},"end":{"line":204,"column":5}},"line":202},"24":{"name":"updateLocalData","decl":{"start":{"line":207,"column":20},"end":{"line":207,"column":35}},"loc":{"start":{"line":207,"column":46},"end":{"line":215,"column":5}},"line":207},"25":{"name":"updateAirports","decl":{"start":{"line":223,"column":20},"end":{"line":223,"column":34}},"loc":{"start":{"line":223,"column":59},"end":{"line":237,"column":5}},"line":223},"26":{"name":"(anonymous_26)","decl":{"start":{"line":227,"column":23},"end":{"line":227,"column":24}},"loc":{"start":{"line":227,"column":42},"end":{"line":229,"column":7}},"line":227},"27":{"name":"subscribe","decl":{"start":{"line":245,"column":20},"end":{"line":245,"column":29}},"loc":{"start":{"line":245,"column":40},"end":{"line":247,"column":5}},"line":245},"28":{"name":"dispatch","decl":{"start":{"line":254,"column":20},"end":{"line":254,"column":28}},"loc":{"start":{"line":254,"column":31},"end":{"line":270,"column":5}},"line":254},"29":{"name":"purgeResolvers","decl":{"start":{"line":273,"column":20},"end":{"line":273,"column":34}},"loc":{"start":{"line":273,"column":37},"end":{"line":275,"column":5}},"line":273},"30":{"name":"fetch","decl":{"start":{"line":284,"column":20},"end":{"line":284,"column":25}},"loc":{"start":{"line":284,"column":28},"end":{"line":326,"column":5}},"line":284},"31":{"name":"(anonymous_31)","decl":{"start":{"line":287,"column":39},"end":{"line":287,"column":40}},"loc":{"start":{"line":287,"column":51},"end":{"line":325,"column":7}},"line":287},"32":{"name":"_callee3","decl":{"start":{"line":288,"column":107},"end":{"line":288,"column":115}},"loc":{"start":{"line":288,"column":125},"end":{"line":320,"column":9}},"line":288},"33":{"name":"_callee3$","decl":{"start":{"line":289,"column":55},"end":{"line":289,"column":64}},"loc":{"start":{"line":289,"column":76},"end":{"line":319,"column":11}},"line":289},"34":{"name":"(anonymous_34)","decl":{"start":{"line":322,"column":15},"end":{"line":322,"column":16}},"loc":{"start":{"line":322,"column":30},"end":{"line":324,"column":9}},"line":322},"35":{"name":"getAirport","decl":{"start":{"line":329,"column":20},"end":{"line":329,"column":30}},"loc":{"start":{"line":329,"column":41},"end":{"line":331,"column":5}},"line":329},"36":{"name":"purge","decl":{"start":{"line":334,"column":20},"end":{"line":334,"column":25}},"loc":{"start":{"line":334,"column":28},"end":{"line":337,"column":5}},"line":334},"37":{"name":"dataLoaded","decl":{"start":{"line":340,"column":20},"end":{"line":340,"column":30}},"loc":{"start":{"line":340,"column":33},"end":{"line":342,"column":5}},"line":340}},"branchMap":{"0":{"loc":{"start":{"line":22,"column":65},"end":{"line":22,"column":623}},"type":"if","locations":[{"start":{"line":22,"column":65},"end":{"line":22,"column":623}},{"start":{"line":22,"column":65},"end":{"line":22,"column":623}}],"line":22},"1":{"loc":{"start":{"line":22,"column":69},"end":{"line":22,"column":128}},"type":"binary-expr","locations":[{"start":{"line":22,"column":69},"end":{"line":22,"column":98}},{"start":{"line":22,"column":102},"end":{"line":22,"column":128}}],"line":22},"2":{"loc":{"start":{"line":22,"column":132},"end":{"line":22,"column":463}},"type":"if","locations":[{"start":{"line":22,"column":132},"end":{"line":22,"column":463}},{"start":{"line":22,"column":132},"end":{"line":22,"column":463}}],"line":22},"3":{"loc":{"start":{"line":22,"column":136},"end":{"line":22,"column":248}},"type":"binary-expr","locations":[{"start":{"line":22,"column":136},"end":{"line":22,"column":152}},{"start":{"line":22,"column":157},"end":{"line":22,"column":192}},{"start":{"line":22,"column":197},"end":{"line":22,"column":211}},{"start":{"line":22,"column":215},"end":{"line":22,"column":216}},{"start":{"line":22,"column":220},"end":{"line":22,"column":248}}],"line":22},"4":{"loc":{"start":{"line":22,"column":252},"end":{"line":22,"column":267}},"type":"if","locations":[{"start":{"line":22,"column":252},"end":{"line":22,"column":267}},{"start":{"line":22,"column":252},"end":{"line":22,"column":267}}],"line":22},"5":{"loc":{"start":{"line":22,"column":337},"end":{"line":22,"column":378}},"type":"if","locations":[{"start":{"line":22,"column":337},"end":{"line":22,"column":378}},{"start":{"line":22,"column":337},"end":{"line":22,"column":378}}],"line":22},"6":{"loc":{"start":{"line":22,"column":891},"end":{"line":22,"column":953}},"type":"if","locations":[{"start":{"line":22,"column":891},"end":{"line":22,"column":953}},{"start":{"line":22,"column":891},"end":{"line":22,"column":953}}],"line":22},"7":{"loc":{"start":{"line":22,"column":895},"end":{"line":22,"column":936}},"type":"binary-expr","locations":[{"start":{"line":22,"column":895},"end":{"line":22,"column":912}},{"start":{"line":22,"column":916},"end":{"line":22,"column":936}}],"line":22},"8":{"loc":{"start":{"line":22,"column":966},"end":{"line":22,"column":988}},"type":"if","locations":[{"start":{"line":22,"column":966},"end":{"line":22,"column":988}},{"start":{"line":22,"column":966},"end":{"line":22,"column":988}}],"line":22},"9":{"loc":{"start":{"line":24,"column":50},"end":{"line":24,"column":65}},"type":"if","locations":[{"start":{"line":24,"column":50},"end":{"line":24,"column":65}},{"start":{"line":24,"column":50},"end":{"line":24,"column":65}}],"line":24},"10":{"loc":{"start":{"line":24,"column":66},"end":{"line":24,"column":129}},"type":"if","locations":[{"start":{"line":24,"column":66},"end":{"line":24,"column":129}},{"start":{"line":24,"column":66},"end":{"line":24,"column":129}}],"line":24},"11":{"loc":{"start":{"line":24,"column":186},"end":{"line":24,"column":246}},"type":"if","locations":[{"start":{"line":24,"column":186},"end":{"line":24,"column":246}},{"start":{"line":24,"column":186},"end":{"line":24,"column":246}}],"line":24},"12":{"loc":{"start":{"line":24,"column":190},"end":{"line":24,"column":221}},"type":"binary-expr","locations":[{"start":{"line":24,"column":190},"end":{"line":24,"column":204}},{"start":{"line":24,"column":208},"end":{"line":24,"column":221}}],"line":24},"13":{"loc":{"start":{"line":24,"column":247},"end":{"line":24,"column":300}},"type":"if","locations":[{"start":{"line":24,"column":247},"end":{"line":24,"column":300}},{"start":{"line":24,"column":247},"end":{"line":24,"column":300}}],"line":24},"14":{"loc":{"start":{"line":24,"column":251},"end":{"line":24,"column":277}},"type":"binary-expr","locations":[{"start":{"line":24,"column":251},"end":{"line":24,"column":262}},{"start":{"line":24,"column":266},"end":{"line":24,"column":277}}],"line":24},"15":{"loc":{"start":{"line":24,"column":301},"end":{"line":24,"column":414}},"type":"if","locations":[{"start":{"line":24,"column":301},"end":{"line":24,"column":414}},{"start":{"line":24,"column":301},"end":{"line":24,"column":414}}],"line":24},"16":{"loc":{"start":{"line":24,"column":305},"end":{"line":24,"column":376}},"type":"binary-expr","locations":[{"start":{"line":24,"column":305},"end":{"line":24,"column":322}},{"start":{"line":24,"column":326},"end":{"line":24,"column":376}}],"line":24},"17":{"loc":{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},"type":"if","locations":[{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},{"start":{"line":26,"column":39},"end":{"line":26,"column":93}}],"line":26},"18":{"loc":{"start":{"line":26,"column":43},"end":{"line":26,"column":74}},"type":"binary-expr","locations":[{"start":{"line":26,"column":43},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":74}}],"line":26},"19":{"loc":{"start":{"line":53,"column":15},"end":{"line":53,"column":85}},"type":"cond-expr","locations":[{"start":{"line":53,"column":68},"end":{"line":53,"column":80}},{"start":{"line":53,"column":83},"end":{"line":53,"column":85}}],"line":53},"20":{"loc":{"start":{"line":53,"column":15},"end":{"line":53,"column":65}},"type":"binary-expr","locations":[{"start":{"line":53,"column":15},"end":{"line":53,"column":35}},{"start":{"line":53,"column":39},"end":{"line":53,"column":65}}],"line":53},"21":{"loc":{"start":{"line":55,"column":17},"end":{"line":55,"column":69}},"type":"cond-expr","locations":[{"start":{"line":55,"column":42},"end":{"line":55,"column":55}},{"start":{"line":55,"column":58},"end":{"line":55,"column":69}}],"line":55},"22":{"loc":{"start":{"line":57,"column":24},"end":{"line":57,"column":86}},"type":"cond-expr","locations":[{"start":{"line":57,"column":56},"end":{"line":57,"column":65}},{"start":{"line":57,"column":68},"end":{"line":57,"column":86}}],"line":57},"23":{"loc":{"start":{"line":59,"column":23},"end":{"line":61,"column":25}},"type":"cond-expr","locations":[{"start":{"line":59,"column":54},"end":{"line":61,"column":5}},{"start":{"line":61,"column":8},"end":{"line":61,"column":25}}],"line":59},"24":{"loc":{"start":{"line":72,"column":33},"end":{"line":72,"column":90}},"type":"binary-expr","locations":[{"start":{"line":72,"column":33},"end":{"line":72,"column":67}},{"start":{"line":72,"column":71},"end":{"line":72,"column":90}}],"line":72},"25":{"loc":{"start":{"line":93,"column":14},"end":{"line":115,"column":15}},"type":"switch","locations":[{"start":{"line":94,"column":16},"end":{"line":98,"column":61}},{"start":{"line":100,"column":16},"end":{"line":110,"column":28}},{"start":{"line":112,"column":16},"end":{"line":112,"column":23}},{"start":{"line":113,"column":16},"end":{"line":114,"column":41}}],"line":93},"26":{"loc":{"start":{"line":132,"column":12},"end":{"line":173,"column":13}},"type":"switch","locations":[{"start":{"line":133,"column":14},"end":{"line":141,"column":44}},{"start":{"line":143,"column":14},"end":{"line":151,"column":64}},{"start":{"line":153,"column":14},"end":{"line":159,"column":64}},{"start":{"line":161,"column":14},"end":{"line":165,"column":22}},{"start":{"line":167,"column":14},"end":{"line":168,"column":29}},{"start":{"line":170,"column":14},"end":{"line":170,"column":22}},{"start":{"line":171,"column":14},"end":{"line":172,"column":40}}],"line":132},"27":{"loc":{"start":{"line":134,"column":16},"end":{"line":137,"column":17}},"type":"if","locations":[{"start":{"line":134,"column":16},"end":{"line":137,"column":17}},{"start":{"line":134,"column":16},"end":{"line":137,"column":17}}],"line":134},"28":{"loc":{"start":{"line":146,"column":16},"end":{"line":149,"column":17}},"type":"if","locations":[{"start":{"line":146,"column":16},"end":{"line":149,"column":17}},{"start":{"line":146,"column":16},"end":{"line":149,"column":17}}],"line":146},"29":{"loc":{"start":{"line":146,"column":22},"end":{"line":146,"column":51}},"type":"binary-expr","locations":[{"start":{"line":146,"column":22},"end":{"line":146,"column":32}},{"start":{"line":146,"column":36},"end":{"line":146,"column":51}}],"line":146},"30":{"loc":{"start":{"line":154,"column":16},"end":{"line":157,"column":17}},"type":"if","locations":[{"start":{"line":154,"column":16},"end":{"line":157,"column":17}},{"start":{"line":154,"column":16},"end":{"line":157,"column":17}}],"line":154},"31":{"loc":{"start":{"line":231,"column":6},"end":{"line":233,"column":7}},"type":"if","locations":[{"start":{"line":231,"column":6},"end":{"line":233,"column":7}},{"start":{"line":231,"column":6},"end":{"line":233,"column":7}}],"line":231},"32":{"loc":{"start":{"line":231,"column":10},"end":{"line":231,"column":43}},"type":"binary-expr","locations":[{"start":{"line":231,"column":10},"end":{"line":231,"column":27}},{"start":{"line":231,"column":31},"end":{"line":231,"column":43}}],"line":231},"33":{"loc":{"start":{"line":291,"column":14},"end":{"line":317,"column":15}},"type":"switch","locations":[{"start":{"line":292,"column":16},"end":{"line":300,"column":52}},{"start":{"line":302,"column":16},"end":{"line":309,"column":41}},{"start":{"line":311,"column":16},"end":{"line":312,"column":43}},{"start":{"line":314,"column":16},"end":{"line":314,"column":23}},{"start":{"line":315,"column":16},"end":{"line":316,"column":42}}],"line":291},"34":{"loc":{"start":{"line":293,"column":18},"end":{"line":296,"column":19}},"type":"if","locations":[{"start":{"line":293,"column":18},"end":{"line":296,"column":19}},{"start":{"line":293,"column":18},"end":{"line":296,"column":19}}],"line":293},"35":{"loc":{"start":{"line":303,"column":18},"end":{"line":306,"column":19}},"type":"if","locations":[{"start":{"line":303,"column":18},"end":{"line":306,"column":19}},{"start":{"line":303,"column":18},"end":{"line":306,"column":19}}],"line":303},"36":{"loc":{"start":{"line":303,"column":24},"end":{"line":303,"column":117}},"type":"binary-expr","locations":[{"start":{"line":303,"column":24},"end":{"line":303,"column":52}},{"start":{"line":303,"column":56},"end":{"line":303,"column":117}}],"line":303}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":1,"93":2,"94":4,"95":4,"96":2,"97":0,"98":0,"99":2,"100":2,"101":2,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":2,"117":2,"118":1,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":1,"167":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":2,"20":4,"21":2,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,1],"20":[1,0],"21":[1,0],"22":[1,0],"23":[1,0],"24":[1,1],"25":[0,0,0,0],"26":[2,0,0,0,0,0,2],"27":[0,2],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0,0,0,0],"34":[0,0],"35":[0,0],"36":[0,0]},"inputSourceMap":{"version":3,"sources":["AirportSearch.js"],"names":["defaultFilter","$and","$or","type","iataCode","$ne","AirportSearch","filter","updateTimeGap","localStorage","useLocalData","airports","airportsMap","Map","updatedAt","status","resolvers","Set","localDataValidityTime","exporter","Promise","resolve","updateStatus","Airport","find","map","airport","_doc","Date","updateAirports","Exporter","read","localData","date","fetch","data","run","JSON","stringify","statusLevel","fromDatabase","forEach","set","updateLocalData","console","log","dispatch","resolver","add","purgeResolvers","clear","subscribe","length","update","get","size"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\","sourcesContent":["import { Airport } from '../database/models/Airport';\r\nimport { Exporter } from './Exporter';\r\n\r\nlet defaultFilter = {$and: \r\n    [\r\n        {$or: [{type: 'medium_airport'}, {type: 'large_airport'}, {type: 'multi_airport'}]}, \r\n        {iataCode:{$ne: ''}}\r\n    ]\r\n};\r\n\r\nexport class AirportSearch{\r\n    /**\r\n     * Status\r\n     * 0 - Init\r\n     * 1 - Loading\r\n     * 2 - Complete\r\n     * @param {*} param0 \r\n     */\r\n    constructor({filter = defaultFilter, updateTimeGap = 24 * 3600, localStorage = {useLocalData: true}} = {}){\r\n        this.airports = [];\r\n        this.airportsMap = new Map();\r\n        this.filter = filter;\r\n        this.updatedAt = null;\r\n        this.updateTimeGap = updateTimeGap;\r\n\r\n        this.status = 0;\r\n        this.resolvers = new Set();\r\n\r\n        this.useLocalData = localStorage.useLocalData;\r\n        this.localDataValidityTime = localStorage.localDataValidityTime || 24 * 60 * 60 * 1000; //1 day\r\n        this.exporter = null;\r\n        //this.initLocalData();\r\n        //this.update();\r\n    }\r\n\r\n    /**\r\n     * Update the status to 'pending', fetch airports from the database\r\n     * Set the data then update status to 'complete'\r\n     */\r\n    update(){\r\n        return new Promise(async(resolve) => {\r\n            this.updateStatus(1);\r\n\r\n            let airports = (await Airport.find(this.filter)).map(airport => airport._doc);\r\n            this.updatedAt = new Date();\r\n\r\n            this.updateAirports(airports, true);\r\n            this.updateStatus(2);\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    async initialize(){\r\n        if(this.useLocalData){\r\n            this.exporter = new Exporter('airports', 'DATA', `/data`, null);\r\n\r\n            let localData = await this.exporter.read();\r\n\r\n            if(!localData || !localData.date) return this.fetch();\r\n\r\n            if(new Date - new Date(localData.date) > this.localDataValidityTime) return this.fetch();\r\n            this.updatedAt = new Date();\r\n            this.updateAirports(localData.airports, false);\r\n\r\n        }else{\r\n            this.fetch();\r\n        }\r\n    }\r\n\r\n    writeAirportsLocalData(){\r\n        let data = {\r\n            date: new Date(),\r\n            airports: this.airports\r\n        }\r\n        this.exporter.run({data: JSON.stringify(data)});\r\n    }\r\n\r\n    /**\r\n     * Update status and last update date\r\n     * @param {*} statusLevel \r\n     */\r\n    updateStatus(statusLevel){\r\n        this.status = statusLevel;\r\n    }\r\n\r\n    updateLocalData(airports){\r\n        let localData = {\r\n            date: new Date(),\r\n            airports\r\n        }\r\n        this.exporter.run({data: JSON.stringify(localData)})\r\n    }\r\n\r\n    /**\r\n     * Set airport to the data then dispatch the data\r\n     * @param {Array} data Contains airports objects\r\n     */\r\n    updateAirports(airports, fromDatabase){\r\n        this.airports = airports;\r\n        airports.forEach((airport) => {\r\n            this.airportsMap.set(airport.iataCode, airport);\r\n        });\r\n\r\n        if(this.useLocalData && fromDatabase){\r\n            this.updateLocalData(airports);\r\n        }\r\n\r\n        console.log('Airports loaded!');\r\n        this.dispatch();\r\n    }\r\n\r\n    /**\r\n     * Add a new subscriber\r\n     * @param {Function} resolver \r\n     */\r\n    subscribe(resolver){\r\n        this.resolvers.add(resolver);\r\n    }\r\n\r\n\r\n    /**\r\n     * Call all the subscribers regitered\r\n     */\r\n    dispatch(){\r\n        for(let resolver of this.resolvers){\r\n            resolver(this.airports);\r\n        }\r\n        this.purgeResolvers();\r\n    }\r\n\r\n    purgeResolvers(){\r\n        this.resolvers.clear();\r\n    }\r\n\r\n    /**\r\n     * Check status, if 1, a request is pending, so subscribe to the feed\r\n     * If no airport stored or last update too old, update the airport data\r\n     * Then return the data\r\n     */\r\n    fetch(){\r\n        return new Promise(async (resolve) => {\r\n            //If updating data, subscribe to the feed\r\n            if(this.status === 1){\r\n                this.subscribe(resolve);\r\n                return;\r\n            }\r\n\r\n            if(this.airports.length === 0 ||\r\n              ((new Date() - this.updatedAt) /1000) > this.updateTimeGap){\r\n                await this.update();\r\n            }\r\n\r\n            resolve(this.airports);\r\n        });\r\n    }\r\n\r\n    getAirport(iataCode){\r\n        return this.airportsMap.get(iataCode);\r\n    }\r\n\r\n    purge(){\r\n        this.airports = [];\r\n        this.airportsMap.clear();\r\n    }\r\n\r\n    dataLoaded(){\r\n        return this.airportsMap.size > 0;\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"44dec4b3f71ba1c792ed429d91b9bfa5a837695a","contentHash":"494b538877609f2c374523979701aaa3b48a3b7880552873961011c0ab8776c7"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\Exporter.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\Exporter.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":9},"end":{"line":18,"column":22}},"8":{"start":{"line":20,"column":28},"end":{"line":198,"column":3}},"9":{"start":{"line":22,"column":22},"end":{"line":22,"column":92}},"10":{"start":{"line":23,"column":4},"end":{"line":23,"column":53}},"11":{"start":{"line":24,"column":4},"end":{"line":24,"column":28}},"12":{"start":{"line":25,"column":4},"end":{"line":25,"column":20}},"13":{"start":{"line":26,"column":4},"end":{"line":26,"column":29}},"14":{"start":{"line":27,"column":4},"end":{"line":27,"column":25}},"15":{"start":{"line":28,"column":4},"end":{"line":28,"column":21}},"16":{"start":{"line":29,"column":4},"end":{"line":29,"column":38}},"17":{"start":{"line":30,"column":4},"end":{"line":30,"column":35}},"18":{"start":{"line":33,"column":2},"end":{"line":196,"column":6}},"19":{"start":{"line":36,"column":6},"end":{"line":39,"column":7}},"20":{"start":{"line":37,"column":19},"end":{"line":37,"column":35}},"21":{"start":{"line":38,"column":8},"end":{"line":38,"column":23}},"22":{"start":{"line":44,"column":6},"end":{"line":44,"column":30}},"23":{"start":{"line":49,"column":26},"end":{"line":49,"column":39}},"24":{"start":{"line":50,"column":21},"end":{"line":50,"column":77}},"25":{"start":{"line":51,"column":24},"end":{"line":51,"column":35}},"26":{"start":{"line":52,"column":19},"end":{"line":52,"column":69}},"27":{"start":{"line":53,"column":22},"end":{"line":53,"column":31}},"28":{"start":{"line":54,"column":17},"end":{"line":54,"column":61}},"29":{"start":{"line":55,"column":29},"end":{"line":55,"column":45}},"30":{"start":{"line":56,"column":24},"end":{"line":56,"column":89}},"31":{"start":{"line":57,"column":17},"end":{"line":57,"column":26}},"32":{"start":{"line":58,"column":31},"end":{"line":58,"column":49}},"33":{"start":{"line":59,"column":26},"end":{"line":59,"column":97}},"34":{"start":{"line":61,"column":6},"end":{"line":64,"column":7}},"35":{"start":{"line":62,"column":8},"end":{"line":62,"column":30}},"36":{"start":{"line":63,"column":8},"end":{"line":63,"column":15}},"37":{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},"38":{"start":{"line":67,"column":8},"end":{"line":67,"column":78}},"39":{"start":{"line":71,"column":6},"end":{"line":71,"column":29}},"40":{"start":{"line":72,"column":6},"end":{"line":79,"column":9}},"41":{"start":{"line":84,"column":6},"end":{"line":86,"column":8}},"42":{"start":{"line":91,"column":19},"end":{"line":137,"column":9}},"43":{"start":{"line":92,"column":20},"end":{"line":92,"column":24}},"44":{"start":{"line":95,"column":8},"end":{"line":136,"column":26}},"45":{"start":{"line":96,"column":10},"end":{"line":135,"column":11}},"46":{"start":{"line":97,"column":12},"end":{"line":134,"column":13}},"47":{"start":{"line":99,"column":16},"end":{"line":99,"column":173}},"48":{"start":{"line":101,"column":16},"end":{"line":104,"column":17}},"49":{"start":{"line":102,"column":18},"end":{"line":102,"column":36}},"50":{"start":{"line":103,"column":18},"end":{"line":103,"column":24}},"51":{"start":{"line":106,"column":16},"end":{"line":106,"column":31}},"52":{"start":{"line":107,"column":16},"end":{"line":107,"column":35}},"53":{"start":{"line":108,"column":16},"end":{"line":108,"column":22}},"54":{"start":{"line":111,"column":16},"end":{"line":111,"column":34}},"55":{"start":{"line":112,"column":16},"end":{"line":112,"column":57}},"56":{"start":{"line":115,"column":16},"end":{"line":115,"column":37}},"57":{"start":{"line":116,"column":16},"end":{"line":116,"column":68}},"58":{"start":{"line":116,"column":27},"end":{"line":116,"column":68}},"59":{"start":{"line":117,"column":16},"end":{"line":117,"column":67}},"60":{"start":{"line":121,"column":16},"end":{"line":129,"column":19}},"61":{"start":{"line":122,"column":18},"end":{"line":122,"column":43}},"62":{"start":{"line":124,"column":18},"end":{"line":124,"column":39}},"63":{"start":{"line":126,"column":18},"end":{"line":128,"column":19}},"64":{"start":{"line":127,"column":20},"end":{"line":127,"column":39}},"65":{"start":{"line":133,"column":16},"end":{"line":133,"column":39}},"66":{"start":{"line":140,"column":8},"end":{"line":140,"column":45}},"67":{"start":{"line":143,"column":6},"end":{"line":143,"column":19}},"68":{"start":{"line":148,"column":6},"end":{"line":148,"column":83}},"69":{"start":{"line":153,"column":6},"end":{"line":153,"column":38}},"70":{"start":{"line":154,"column":6},"end":{"line":154,"column":34}},"71":{"start":{"line":159,"column":21},"end":{"line":159,"column":61}},"72":{"start":{"line":161,"column":6},"end":{"line":165,"column":7}},"73":{"start":{"line":162,"column":8},"end":{"line":162,"column":55}},"74":{"start":{"line":164,"column":8},"end":{"line":164,"column":35}},"75":{"start":{"line":171,"column":6},"end":{"line":171,"column":62}},"76":{"start":{"line":176,"column":25},"end":{"line":176,"column":63}},"77":{"start":{"line":177,"column":6},"end":{"line":177,"column":78}},"78":{"start":{"line":182,"column":19},"end":{"line":182,"column":98}},"79":{"start":{"line":183,"column":21},"end":{"line":183,"column":102}},"80":{"start":{"line":184,"column":17},"end":{"line":184,"column":94}},"81":{"start":{"line":185,"column":21},"end":{"line":185,"column":61}},"82":{"start":{"line":186,"column":6},"end":{"line":194,"column":9}},"83":{"start":{"line":187,"column":8},"end":{"line":193,"column":11}},"84":{"start":{"line":188,"column":10},"end":{"line":190,"column":11}},"85":{"start":{"line":189,"column":12},"end":{"line":189,"column":33}},"86":{"start":{"line":192,"column":10},"end":{"line":192,"column":36}},"87":{"start":{"line":197,"column":2},"end":{"line":197,"column":18}},"88":{"start":{"line":200,"column":0},"end":{"line":200,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":20,"column":28},"end":{"line":20,"column":29}},"loc":{"start":{"line":20,"column":40},"end":{"line":198,"column":1}},"line":20},"1":{"name":"Exporter","decl":{"start":{"line":21,"column":11},"end":{"line":21,"column":19}},"loc":{"start":{"line":21,"column":44},"end":{"line":31,"column":3}},"line":21},"2":{"name":"executeStack","decl":{"start":{"line":35,"column":20},"end":{"line":35,"column":32}},"loc":{"start":{"line":35,"column":35},"end":{"line":40,"column":5}},"line":35},"3":{"name":"addStack","decl":{"start":{"line":43,"column":20},"end":{"line":43,"column":28}},"loc":{"start":{"line":43,"column":37},"end":{"line":45,"column":5}},"line":43},"4":{"name":"run","decl":{"start":{"line":48,"column":20},"end":{"line":48,"column":23}},"loc":{"start":{"line":48,"column":30},"end":{"line":80,"column":5}},"line":48},"5":{"name":"geEmptyFileData","decl":{"start":{"line":83,"column":20},"end":{"line":83,"column":35}},"loc":{"start":{"line":83,"column":38},"end":{"line":87,"column":5}},"line":83},"6":{"name":"(anonymous_6)","decl":{"start":{"line":90,"column":11},"end":{"line":90,"column":12}},"loc":{"start":{"line":90,"column":23},"end":{"line":144,"column":5}},"line":90},"7":{"name":"_callee","decl":{"start":{"line":91,"column":106},"end":{"line":91,"column":113}},"loc":{"start":{"line":91,"column":121},"end":{"line":137,"column":7}},"line":91},"8":{"name":"_callee$","decl":{"start":{"line":95,"column":53},"end":{"line":95,"column":61}},"loc":{"start":{"line":95,"column":72},"end":{"line":136,"column":9}},"line":95},"9":{"name":"(anonymous_9)","decl":{"start":{"line":121,"column":63},"end":{"line":121,"column":64}},"loc":{"start":{"line":121,"column":78},"end":{"line":129,"column":17}},"line":121},"10":{"name":"write","decl":{"start":{"line":139,"column":15},"end":{"line":139,"column":20}},"loc":{"start":{"line":139,"column":25},"end":{"line":141,"column":7}},"line":139},"11":{"name":"createNewFile","decl":{"start":{"line":147,"column":20},"end":{"line":147,"column":33}},"loc":{"start":{"line":147,"column":49},"end":{"line":149,"column":5}},"line":147},"12":{"name":"addNewData","decl":{"start":{"line":152,"column":20},"end":{"line":152,"column":30}},"loc":{"start":{"line":152,"column":59},"end":{"line":155,"column":5}},"line":152},"13":{"name":"saveFile","decl":{"start":{"line":158,"column":20},"end":{"line":158,"column":28}},"loc":{"start":{"line":158,"column":69},"end":{"line":166,"column":5}},"line":158},"14":{"name":"getFullFileName","decl":{"start":{"line":169,"column":20},"end":{"line":169,"column":35}},"loc":{"start":{"line":169,"column":54},"end":{"line":172,"column":5}},"line":169},"15":{"name":"getFilePath","decl":{"start":{"line":175,"column":20},"end":{"line":175,"column":31}},"loc":{"start":{"line":175,"column":56},"end":{"line":178,"column":5}},"line":175},"16":{"name":"read","decl":{"start":{"line":181,"column":20},"end":{"line":181,"column":24}},"loc":{"start":{"line":181,"column":27},"end":{"line":195,"column":5}},"line":181},"17":{"name":"(anonymous_17)","decl":{"start":{"line":186,"column":25},"end":{"line":186,"column":26}},"loc":{"start":{"line":186,"column":44},"end":{"line":194,"column":7}},"line":186},"18":{"name":"(anonymous_18)","decl":{"start":{"line":187,"column":38},"end":{"line":187,"column":39}},"loc":{"start":{"line":187,"column":59},"end":{"line":193,"column":9}},"line":187}},"branchMap":{"0":{"loc":{"start":{"line":22,"column":22},"end":{"line":22,"column":92}},"type":"cond-expr","locations":[{"start":{"line":22,"column":75},"end":{"line":22,"column":87}},{"start":{"line":22,"column":90},"end":{"line":22,"column":92}}],"line":22},"1":{"loc":{"start":{"line":22,"column":22},"end":{"line":22,"column":72}},"type":"binary-expr","locations":[{"start":{"line":22,"column":22},"end":{"line":22,"column":42}},{"start":{"line":22,"column":46},"end":{"line":22,"column":72}}],"line":22},"2":{"loc":{"start":{"line":36,"column":6},"end":{"line":39,"column":7}},"type":"if","locations":[{"start":{"line":36,"column":6},"end":{"line":39,"column":7}},{"start":{"line":36,"column":6},"end":{"line":39,"column":7}}],"line":36},"3":{"loc":{"start":{"line":36,"column":10},"end":{"line":36,"column":45}},"type":"binary-expr","locations":[{"start":{"line":36,"column":10},"end":{"line":36,"column":20}},{"start":{"line":36,"column":24},"end":{"line":36,"column":45}}],"line":36},"4":{"loc":{"start":{"line":50,"column":21},"end":{"line":50,"column":77}},"type":"cond-expr","locations":[{"start":{"line":50,"column":48},"end":{"line":50,"column":61}},{"start":{"line":50,"column":64},"end":{"line":50,"column":77}}],"line":50},"5":{"loc":{"start":{"line":52,"column":19},"end":{"line":52,"column":69}},"type":"cond-expr","locations":[{"start":{"line":52,"column":44},"end":{"line":52,"column":55}},{"start":{"line":52,"column":58},"end":{"line":52,"column":69}}],"line":52},"6":{"loc":{"start":{"line":54,"column":17},"end":{"line":54,"column":61}},"type":"cond-expr","locations":[{"start":{"line":54,"column":40},"end":{"line":54,"column":49}},{"start":{"line":54,"column":52},"end":{"line":54,"column":61}}],"line":54},"7":{"loc":{"start":{"line":56,"column":24},"end":{"line":56,"column":89}},"type":"cond-expr","locations":[{"start":{"line":56,"column":54},"end":{"line":56,"column":70}},{"start":{"line":56,"column":73},"end":{"line":56,"column":89}}],"line":56},"8":{"loc":{"start":{"line":59,"column":26},"end":{"line":59,"column":97}},"type":"cond-expr","locations":[{"start":{"line":59,"column":58},"end":{"line":59,"column":76}},{"start":{"line":59,"column":79},"end":{"line":59,"column":97}}],"line":59},"9":{"loc":{"start":{"line":61,"column":6},"end":{"line":64,"column":7}},"type":"if","locations":[{"start":{"line":61,"column":6},"end":{"line":64,"column":7}},{"start":{"line":61,"column":6},"end":{"line":64,"column":7}}],"line":61},"10":{"loc":{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},"type":"if","locations":[{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},{"start":{"line":66,"column":6},"end":{"line":68,"column":7}}],"line":66},"11":{"loc":{"start":{"line":66,"column":10},"end":{"line":66,"column":37}},"type":"binary-expr","locations":[{"start":{"line":66,"column":10},"end":{"line":66,"column":19}},{"start":{"line":66,"column":23},"end":{"line":66,"column":28}},{"start":{"line":66,"column":32},"end":{"line":66,"column":37}}],"line":66},"12":{"loc":{"start":{"line":97,"column":12},"end":{"line":134,"column":13}},"type":"switch","locations":[{"start":{"line":98,"column":14},"end":{"line":108,"column":22}},{"start":{"line":110,"column":14},"end":{"line":112,"column":57}},{"start":{"line":114,"column":14},"end":{"line":117,"column":67}},{"start":{"line":119,"column":14},"end":{"line":129,"column":19}},{"start":{"line":131,"column":14},"end":{"line":131,"column":22}},{"start":{"line":132,"column":14},"end":{"line":133,"column":39}}],"line":97},"13":{"loc":{"start":{"line":101,"column":16},"end":{"line":104,"column":17}},"type":"if","locations":[{"start":{"line":101,"column":16},"end":{"line":104,"column":17}},{"start":{"line":101,"column":16},"end":{"line":104,"column":17}}],"line":101},"14":{"loc":{"start":{"line":116,"column":16},"end":{"line":116,"column":68}},"type":"if","locations":[{"start":{"line":116,"column":16},"end":{"line":116,"column":68}},{"start":{"line":116,"column":16},"end":{"line":116,"column":68}}],"line":116},"15":{"loc":{"start":{"line":126,"column":18},"end":{"line":128,"column":19}},"type":"if","locations":[{"start":{"line":126,"column":18},"end":{"line":128,"column":19}},{"start":{"line":126,"column":18},"end":{"line":128,"column":19}}],"line":126},"16":{"loc":{"start":{"line":148,"column":13},"end":{"line":148,"column":82}},"type":"cond-expr","locations":[{"start":{"line":148,"column":51},"end":{"line":148,"column":66}},{"start":{"line":148,"column":69},"end":{"line":148,"column":82}}],"line":148},"17":{"loc":{"start":{"line":182,"column":19},"end":{"line":182,"column":98}},"type":"cond-expr","locations":[{"start":{"line":182,"column":72},"end":{"line":182,"column":84}},{"start":{"line":182,"column":87},"end":{"line":182,"column":98}}],"line":182},"18":{"loc":{"start":{"line":182,"column":19},"end":{"line":182,"column":69}},"type":"binary-expr","locations":[{"start":{"line":182,"column":19},"end":{"line":182,"column":39}},{"start":{"line":182,"column":43},"end":{"line":182,"column":69}}],"line":182},"19":{"loc":{"start":{"line":183,"column":21},"end":{"line":183,"column":102}},"type":"cond-expr","locations":[{"start":{"line":183,"column":74},"end":{"line":183,"column":86}},{"start":{"line":183,"column":89},"end":{"line":183,"column":102}}],"line":183},"20":{"loc":{"start":{"line":183,"column":21},"end":{"line":183,"column":71}},"type":"binary-expr","locations":[{"start":{"line":183,"column":21},"end":{"line":183,"column":41}},{"start":{"line":183,"column":45},"end":{"line":183,"column":71}}],"line":183},"21":{"loc":{"start":{"line":184,"column":17},"end":{"line":184,"column":94}},"type":"cond-expr","locations":[{"start":{"line":184,"column":70},"end":{"line":184,"column":82}},{"start":{"line":184,"column":85},"end":{"line":184,"column":94}}],"line":184},"22":{"loc":{"start":{"line":184,"column":17},"end":{"line":184,"column":67}},"type":"binary-expr","locations":[{"start":{"line":184,"column":17},"end":{"line":184,"column":37}},{"start":{"line":184,"column":41},"end":{"line":184,"column":67}}],"line":184},"23":{"loc":{"start":{"line":188,"column":10},"end":{"line":190,"column":11}},"type":"if","locations":[{"start":{"line":188,"column":10},"end":{"line":190,"column":11}},{"start":{"line":188,"column":10},"end":{"line":190,"column":11}}],"line":188},"24":{"loc":{"start":{"line":188,"column":14},"end":{"line":188,"column":26}},"type":"binary-expr","locations":[{"start":{"line":188,"column":14},"end":{"line":188,"column":17}},{"start":{"line":188,"column":21},"end":{"line":188,"column":26}}],"line":188}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":2,"14":2,"15":2,"16":2,"17":2,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":2,"76":2,"77":2,"78":2,"79":2,"80":2,"81":2,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1,"88":1},"f":{"0":1,"1":2,"2":0,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":2,"15":2,"16":2,"17":0,"18":0},"b":{"0":[2,0],"1":[2,2],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0,0,0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,2],"18":[2,0],"19":[0,2],"20":[2,0],"21":[0,2],"22":[2,0],"23":[0,0],"24":[0,0]},"inputSourceMap":{"version":3,"sources":["Exporter.js"],"names":["fs","require","Exporter","fileName","prefix","path","newDataPath","inProgress","stack","overwriteExistingFile","length","expt","pop","run","params","push","data","emptyFileData","addStack","Error","write","date","Date","newData","read","file","createNewFile","addNewData","saveFile","err","executeStack","console","error","JSON","stringify","callback","fullPath","getFilePath","writeFile","log","message","fullFileName","getFullFileName","__basedir","Promise","resolve","readFile","parse"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\","sourcesContent":["const fs = require('fs');\r\n\r\nexport class Exporter{\r\n    constructor(fileName, prefix, path, newDataPath = ''){\r\n        this.inProgress = false;\r\n        this.stack = [];\r\n\r\n        this.fileName = fileName;\r\n        this.prefix = prefix;\r\n        this.path = path;\r\n        this.overwriteExistingFile = true;\r\n        this.newDataPath = newDataPath;\r\n    }\r\n\r\n    executeStack(){\r\n        if(this.stack && this.stack.length > 0){\r\n            let expt = this.stack.pop();\r\n            this.run(expt);\r\n        }\r\n    }\r\n\r\n    addStack(params){\r\n        this.stack.push(params);\r\n    }\r\n\r\n    run({fileName = this.fileName, prefix = this.prefix, path = this.path, newDataPath = this.newDataPath, data, emptyFileData = this.emptyFileData}){\r\n        if(this.inProgress){\r\n            this.addStack(params);\r\n            return;\r\n        }\r\n\r\n        if(!fileName || !path || !data){\r\n            throw new Error('At least one of the required arguments is missing.');\r\n        }\r\n\r\n        //Default params can be overwrite\r\n        this.inProgress = true;\r\n        this.write({fileName, prefix, path, data, newDataPath, emptyFileData});\r\n    }\r\n\r\n    geEmptyFileData(){\r\n        return {\r\n            date: new Date()\r\n        }\r\n    }\r\n\r\n    async write({fileName, prefix, path, data, newDataPath, emptyFileData}){        \r\n        let newData;\r\n\r\n        if(this.overwriteExistingFile){\r\n            newData = data;\r\n        }else{\r\n            let file; \r\n            file = await this.read(prefix, fileName, path);\r\n            if(!file) file = this.createNewFile(emptyFileData);\r\n            newData = this.addNewData(data, file, newDataPath);\r\n        }\r\n\r\n        //let newData = this.overwriteExistingFile ? data : this.addNewData(data, file, newDataPath);\r\n\r\n        this.saveFile(prefix, fileName, path, newData, (err) => {\r\n            this.inProgress = false;\r\n            this.executeStack();\r\n            if(err){\r\n                console.error(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    createNewFile(emptyFileData){\r\n        return typeof emptyFileData === 'function' ? emptyFileData() : emptyFileData;\r\n    }\r\n\r\n    addNewData(newData, data, newDataPath){\r\n        data[newDataPath].push(newData);\r\n        return JSON.stringify(data); \r\n    }\r\n\r\n    saveFile(prefix, fileName, path, data, callback){\r\n        let fullPath = this.getFilePath(prefix, fileName, path);\r\n        try {\r\n            fs.writeFile(fullPath, data, 'utf8', callback);\r\n        } catch (error) {\r\n            console.log(error.message);\r\n        }\r\n        \r\n    }\r\n    \r\n    getFullFileName(prefix, fileName){\r\n        //let d = new Date();\r\n        return `${prefix}_${fileName}.json`; \r\n    }\r\n\r\n    getFilePath(prefix, fileName, path){\r\n        let fullFileName = this.getFullFileName(prefix, fileName)\r\n        return `${__basedir}/${path}/${fullFileName}`;\r\n    }\r\n\r\n    read(prefix = this.prefix, fileName = this.fileName, path = this.path){\r\n        let fullPath = this.getFilePath(prefix, fileName, path);\r\n        return new Promise((resolve) => {\r\n            \r\n            fs.readFile(fullPath, 'utf8', (err, data) => {\r\n                if(err || !data){\r\n                    return resolve(null);\r\n                }\r\n    \r\n                resolve(JSON.parse(data)); //now it an object\r\n            });\r\n        });\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0d19ffdc2bb3247a3111d17bc05f810bacbffaf2","contentHash":"9456e5f887c94fd4600ac7eb2acb00c377f56c6555f5bf2f67f8b6e14472b5e1"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\index.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":23}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":50}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":34}},"4":{"start":{"line":12,"column":13},"end":{"line":12,"column":32}},"5":{"start":{"line":14,"column":12},"end":{"line":29,"column":1}},"6":{"start":{"line":20,"column":4},"end":{"line":24,"column":7}},"7":{"start":{"line":27,"column":4},"end":{"line":27,"column":33}},"8":{"start":{"line":30,"column":0},"end":{"line":30,"column":22}},"9":{"start":{"line":31,"column":0},"end":{"line":35,"column":3}},"10":{"start":{"line":32,"column":2},"end":{"line":32,"column":33}},"11":{"start":{"line":34,"column":2},"end":{"line":34,"column":42}},"12":{"start":{"line":36,"column":0},"end":{"line":38,"column":3}},"13":{"start":{"line":37,"column":2},"end":{"line":37,"column":29}}},"fnMap":{"0":{"name":"connect","decl":{"start":{"line":15,"column":20},"end":{"line":15,"column":27}},"loc":{"start":{"line":15,"column":30},"end":{"line":25,"column":3}},"line":15},"1":{"name":"disconnect","decl":{"start":{"line":26,"column":23},"end":{"line":26,"column":33}},"loc":{"start":{"line":26,"column":36},"end":{"line":28,"column":3}},"line":26},"2":{"name":"(anonymous_2)","decl":{"start":{"line":31,"column":36},"end":{"line":31,"column":37}},"loc":{"start":{"line":31,"column":48},"end":{"line":35,"column":1}},"line":31},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":32},"end":{"line":36,"column":33}},"loc":{"start":{"line":36,"column":47},"end":{"line":38,"column":1}},"line":36}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":1,"10":2,"11":2,"12":1,"13":0},"f":{"0":1,"1":0,"2":2,"3":0},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["mongoose","require","config","mongo","connect","uri","useUnifiedTopology","useNewUrlParser","useCreateIndex","disconnect","connection","on","console","log","err"],"mappings":";;;;;;;AAGA;;AAHA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AAIO,IAAME,KAAK,GAAG;AACjBC,EAAAA,OAAO,EAAE,mBAAM;AACX;AACR;AACA;AACA;AAEQ,WAAOJ,QAAQ,CAACI,OAAT,CAAiBF,MAAM,CAACG,GAAxB,EAA6B;AAChCC,MAAAA,kBAAkB,EAAE,IADY;AAEhCC,MAAAA,eAAe,EAAE,IAFe;AAGhCC,MAAAA,cAAc,EAAE;AAHgB,KAA7B,CAAP;AAKH,GAZgB;AAajBC,EAAAA,UAAU,EAAE,sBAAM;AACd,WAAOT,QAAQ,CAACS,UAAT,EAAP;AACH;AAfgB,CAAd;;AAkBPT,QAAQ,CAACU,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAmC,YAAI;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EADmC,CAGnC;;AACA;AACH,CALD;AAOAb,QAAQ,CAACU,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAA+B,UAACG,GAAD,EAAO;AAClCF,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAUC,GAAtB;AACH,CAFD","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\","sourcesContent":["const mongoose = require('mongoose');\r\nconst config = require('./config');\r\n\r\nimport { initializeAirportSearch } from '../services/data/airport';\r\n\r\nexport const mongo = {\r\n    connect: () => {\r\n        /*return new Promise((resolve, reject) => {\r\n            console.log('Connection to the Db');\r\n            resolve('OK');\r\n        });*/\r\n\r\n        return mongoose.connect(config.uri, { \r\n            useUnifiedTopology: true, \r\n            useNewUrlParser: true, \r\n            useCreateIndex: true \r\n        });\r\n    },\r\n    disconnect: () => {\r\n        return mongoose.disconnect();\r\n    }\r\n}\r\n\r\nmongoose.connection.on('connected',()=>{\r\n    console.log(\"Connected to DB\");\r\n\r\n    //Load airports once connected to the Db\r\n    initializeAirportSearch();\r\n});\r\n\r\nmongoose.connection.on('error',(err)=>{\r\n    console.log(\"Error\" + err);\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"052c7eeea5c3998c53d53da263afbd2831358e33","contentHash":"afad1b819bf307abddf098f7674d7b3aca1c996fca03ab9e275d6d856b371e32"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\config.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\config.js","statementMap":{"0":{"start":{"line":3,"column":15},"end":{"line":3,"column":20}},"1":{"start":{"line":4,"column":15},"end":{"line":4,"column":33}},"2":{"start":{"line":5,"column":14},"end":{"line":5,"column":42}},"3":{"start":{"line":6,"column":13},"end":{"line":6,"column":25}},"4":{"start":{"line":7,"column":0},"end":{"line":9,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["config.js"],"names":["username","password","cluster","dbName","module","exports","uri"],"mappings":";;AAAA,IAAMA,QAAQ,GAAG,KAAjB;AACA,IAAMC,QAAQ,GAAG,kBAAjB;AACA,IAAMC,OAAO,GAAG,4BAAhB;AACA,IAAMC,MAAM,GAAG,YAAf;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,GAAG,0BAAmBN,QAAnB,cAA+BC,QAA/B,cAA2CC,OAA3C,cAAsDC,MAAtD;AADU,CAAjB","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\database\\","sourcesContent":["const username = 'lio';\r\nconst password = 'vg61w4tobQ0I8D6P';\r\nconst cluster = 'cluster0.aiy2g.mongodb.net';\r\nconst dbName = 'airTracker';\r\n\r\nmodule.exports = {\r\n    uri: `mongodb+srv://${username}:${password}@${cluster}/${dbName}?retryWrites=true&w=majority`,\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7b36829ca4bac7193d577fe169af30e31de4ce23","contentHash":"332a8e456830067926e18bdca1177d68c1aee26a86b66fb152127f1402de1bb7"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\form-validation\\tracker.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\form-validation\\tracker.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":18},"end":{"line":12,"column":85}},"5":{"start":{"line":14,"column":26},"end":{"line":14,"column":101}},"6":{"start":{"line":16,"column":22},"end":{"line":16,"column":93}},"7":{"start":{"line":18,"column":25},"end":{"line":18,"column":99}},"8":{"start":{"line":20,"column":15},"end":{"line":20,"column":55}},"9":{"start":{"line":22,"column":21},"end":{"line":22,"column":59}},"10":{"start":{"line":24,"column":24},"end":{"line":24,"column":65}},"11":{"start":{"line":26,"column":65},"end":{"line":26,"column":623}},"12":{"start":{"line":26,"column":132},"end":{"line":26,"column":463}},"13":{"start":{"line":26,"column":252},"end":{"line":26,"column":267}},"14":{"start":{"line":26,"column":260},"end":{"line":26,"column":267}},"15":{"start":{"line":26,"column":276},"end":{"line":26,"column":277}},"16":{"start":{"line":26,"column":287},"end":{"line":26,"column":302}},"17":{"start":{"line":26,"column":304},"end":{"line":26,"column":461}},"18":{"start":{"line":26,"column":337},"end":{"line":26,"column":378}},"19":{"start":{"line":26,"column":356},"end":{"line":26,"column":378}},"20":{"start":{"line":26,"column":379},"end":{"line":26,"column":417}},"21":{"start":{"line":26,"column":441},"end":{"line":26,"column":450}},"22":{"start":{"line":26,"column":464},"end":{"line":26,"column":621}},"23":{"start":{"line":26,"column":647},"end":{"line":26,"column":651}},"24":{"start":{"line":26,"column":662},"end":{"line":26,"column":667}},"25":{"start":{"line":26,"column":674},"end":{"line":26,"column":995}},"26":{"start":{"line":26,"column":701},"end":{"line":26,"column":727}},"27":{"start":{"line":26,"column":760},"end":{"line":26,"column":769}},"28":{"start":{"line":26,"column":771},"end":{"line":26,"column":800}},"29":{"start":{"line":26,"column":801},"end":{"line":26,"column":813}},"30":{"start":{"line":26,"column":838},"end":{"line":26,"column":852}},"31":{"start":{"line":26,"column":853},"end":{"line":26,"column":863}},"32":{"start":{"line":26,"column":885},"end":{"line":26,"column":990}},"33":{"start":{"line":26,"column":891},"end":{"line":26,"column":953}},"34":{"start":{"line":26,"column":938},"end":{"line":26,"column":953}},"35":{"start":{"line":26,"column":966},"end":{"line":26,"column":988}},"36":{"start":{"line":26,"column":978},"end":{"line":26,"column":988}},"37":{"start":{"line":28,"column":50},"end":{"line":28,"column":65}},"38":{"start":{"line":28,"column":58},"end":{"line":28,"column":65}},"39":{"start":{"line":28,"column":66},"end":{"line":28,"column":129}},"40":{"start":{"line":28,"column":93},"end":{"line":28,"column":129}},"41":{"start":{"line":28,"column":138},"end":{"line":28,"column":184}},"42":{"start":{"line":28,"column":186},"end":{"line":28,"column":246}},"43":{"start":{"line":28,"column":223},"end":{"line":28,"column":246}},"44":{"start":{"line":28,"column":247},"end":{"line":28,"column":300}},"45":{"start":{"line":28,"column":279},"end":{"line":28,"column":300}},"46":{"start":{"line":28,"column":301},"end":{"line":28,"column":414}},"47":{"start":{"line":28,"column":378},"end":{"line":28,"column":414}},"48":{"start":{"line":30,"column":39},"end":{"line":30,"column":93}},"49":{"start":{"line":30,"column":76},"end":{"line":30,"column":93}},"50":{"start":{"line":30,"column":94},"end":{"line":30,"column":168}},"51":{"start":{"line":30,"column":107},"end":{"line":30,"column":108}},"52":{"start":{"line":30,"column":117},"end":{"line":30,"column":131}},"53":{"start":{"line":30,"column":149},"end":{"line":30,"column":166}},"54":{"start":{"line":30,"column":169},"end":{"line":30,"column":181}},"55":{"start":{"line":32,"column":25},"end":{"line":69,"column":1}},"56":{"start":{"line":33,"column":23},"end":{"line":55,"column":3}},"57":{"start":{"line":43,"column":8},"end":{"line":43,"column":31}},"58":{"start":{"line":49,"column":8},"end":{"line":49,"column":31}},"59":{"start":{"line":56,"column":20},"end":{"line":66,"column":3}},"60":{"start":{"line":67,"column":30},"end":{"line":67,"column":88}},"61":{"start":{"line":68,"column":2},"end":{"line":68,"column":62}},"62":{"start":{"line":71,"column":25},"end":{"line":102,"column":1}},"63":{"start":{"line":72,"column":23},"end":{"line":88,"column":3}},"64":{"start":{"line":85,"column":8},"end":{"line":85,"column":31}},"65":{"start":{"line":89,"column":20},"end":{"line":99,"column":3}},"66":{"start":{"line":100,"column":30},"end":{"line":100,"column":45}},"67":{"start":{"line":101,"column":2},"end":{"line":101,"column":62}},"68":{"start":{"line":104,"column":38},"end":{"line":173,"column":3}},"69":{"start":{"line":105,"column":13},"end":{"line":168,"column":5}},"70":{"start":{"line":108,"column":4},"end":{"line":167,"column":16}},"71":{"start":{"line":109,"column":6},"end":{"line":166,"column":7}},"72":{"start":{"line":110,"column":8},"end":{"line":165,"column":9}},"73":{"start":{"line":112,"column":12},"end":{"line":115,"column":13}},"74":{"start":{"line":113,"column":14},"end":{"line":113,"column":32}},"75":{"start":{"line":114,"column":14},"end":{"line":114,"column":20}},"76":{"start":{"line":117,"column":12},"end":{"line":117,"column":55}},"77":{"start":{"line":118,"column":12},"end":{"line":118,"column":91}},"78":{"start":{"line":119,"column":12},"end":{"line":119,"column":53}},"79":{"start":{"line":120,"column":12},"end":{"line":120,"column":50}},"80":{"start":{"line":121,"column":12},"end":{"line":121,"column":60}},"81":{"start":{"line":122,"column":12},"end":{"line":122,"column":31}},"82":{"start":{"line":123,"column":12},"end":{"line":123,"column":18}},"83":{"start":{"line":126,"column":12},"end":{"line":129,"column":13}},"84":{"start":{"line":127,"column":14},"end":{"line":127,"column":33}},"85":{"start":{"line":128,"column":14},"end":{"line":128,"column":20}},"86":{"start":{"line":131,"column":12},"end":{"line":131,"column":55}},"87":{"start":{"line":132,"column":12},"end":{"line":132,"column":91}},"88":{"start":{"line":133,"column":12},"end":{"line":133,"column":53}},"89":{"start":{"line":134,"column":12},"end":{"line":134,"column":50}},"90":{"start":{"line":135,"column":12},"end":{"line":135,"column":60}},"91":{"start":{"line":136,"column":12},"end":{"line":136,"column":31}},"92":{"start":{"line":137,"column":12},"end":{"line":137,"column":18}},"93":{"start":{"line":140,"column":12},"end":{"line":143,"column":15}},"94":{"start":{"line":146,"column":12},"end":{"line":149,"column":83}},"95":{"start":{"line":150,"column":12},"end":{"line":150,"column":31}},"96":{"start":{"line":151,"column":12},"end":{"line":151,"column":46}},"97":{"start":{"line":154,"column":12},"end":{"line":154,"column":50}},"98":{"start":{"line":155,"column":12},"end":{"line":155,"column":48}},"99":{"start":{"line":156,"column":12},"end":{"line":156,"column":50}},"100":{"start":{"line":157,"column":12},"end":{"line":160,"column":15}},"101":{"start":{"line":164,"column":12},"end":{"line":164,"column":35}},"102":{"start":{"line":170,"column":2},"end":{"line":172,"column":4}},"103":{"start":{"line":171,"column":4},"end":{"line":171,"column":39}},"104":{"start":{"line":175,"column":0},"end":{"line":175,"column":48}},"105":{"start":{"line":177,"column":33},"end":{"line":212,"column":3}},"106":{"start":{"line":178,"column":14},"end":{"line":207,"column":5}},"107":{"start":{"line":180,"column":4},"end":{"line":206,"column":17}},"108":{"start":{"line":181,"column":6},"end":{"line":205,"column":7}},"109":{"start":{"line":182,"column":8},"end":{"line":204,"column":9}},"110":{"start":{"line":184,"column":12},"end":{"line":184,"column":31}},"111":{"start":{"line":185,"column":12},"end":{"line":187,"column":15}},"112":{"start":{"line":190,"column":12},"end":{"line":190,"column":41}},"113":{"start":{"line":191,"column":12},"end":{"line":191,"column":140}},"114":{"start":{"line":191,"column":30},"end":{"line":191,"column":140}},"115":{"start":{"line":192,"column":12},"end":{"line":192,"column":31}},"116":{"start":{"line":193,"column":12},"end":{"line":195,"column":15}},"117":{"start":{"line":198,"column":12},"end":{"line":198,"column":39}},"118":{"start":{"line":199,"column":12},"end":{"line":199,"column":136}},"119":{"start":{"line":199,"column":28},"end":{"line":199,"column":136}},"120":{"start":{"line":203,"column":12},"end":{"line":203,"column":36}},"121":{"start":{"line":209,"column":2},"end":{"line":211,"column":4}},"122":{"start":{"line":210,"column":4},"end":{"line":210,"column":40}},"123":{"start":{"line":214,"column":20},"end":{"line":239,"column":1}},"124":{"start":{"line":215,"column":30},"end":{"line":233,"column":3}},"125":{"start":{"line":216,"column":20},"end":{"line":216,"column":53}},"126":{"start":{"line":219,"column":4},"end":{"line":232,"column":5}},"127":{"start":{"line":220,"column":6},"end":{"line":227,"column":7}},"128":{"start":{"line":221,"column":19},"end":{"line":221,"column":30}},"129":{"start":{"line":223,"column":8},"end":{"line":226,"column":9}},"130":{"start":{"line":224,"column":10},"end":{"line":224,"column":93}},"131":{"start":{"line":225,"column":10},"end":{"line":225,"column":16}},"132":{"start":{"line":229,"column":6},"end":{"line":229,"column":23}},"133":{"start":{"line":231,"column":6},"end":{"line":231,"column":20}},"134":{"start":{"line":235,"column":2},"end":{"line":238,"column":3}},"135":{"start":{"line":236,"column":4},"end":{"line":236,"column":46}},"136":{"start":{"line":237,"column":4},"end":{"line":237,"column":44}},"137":{"start":{"line":241,"column":33},"end":{"line":250,"column":1}},"138":{"start":{"line":242,"column":2},"end":{"line":249,"column":3}},"139":{"start":{"line":242,"column":15},"end":{"line":242,"column":16}},"140":{"start":{"line":243,"column":4},"end":{"line":248,"column":5}},"141":{"start":{"line":243,"column":17},"end":{"line":243,"column":18}},"142":{"start":{"line":244,"column":6},"end":{"line":247,"column":7}},"143":{"start":{"line":245,"column":8},"end":{"line":245,"column":117}},"144":{"start":{"line":246,"column":8},"end":{"line":246,"column":15}}},"fnMap":{"0":{"name":"_createForOfIteratorHelper","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":35}},"loc":{"start":{"line":26,"column":55},"end":{"line":26,"column":997}},"line":26},"1":{"name":"F","decl":{"start":{"line":26,"column":296},"end":{"line":26,"column":297}},"loc":{"start":{"line":26,"column":300},"end":{"line":26,"column":302}},"line":26},"2":{"name":"n","decl":{"start":{"line":26,"column":331},"end":{"line":26,"column":332}},"loc":{"start":{"line":26,"column":335},"end":{"line":26,"column":419}},"line":26},"3":{"name":"e","decl":{"start":{"line":26,"column":433},"end":{"line":26,"column":434}},"loc":{"start":{"line":26,"column":439},"end":{"line":26,"column":452}},"line":26},"4":{"name":"s","decl":{"start":{"line":26,"column":695},"end":{"line":26,"column":696}},"loc":{"start":{"line":26,"column":699},"end":{"line":26,"column":729}},"line":26},"5":{"name":"n","decl":{"start":{"line":26,"column":743},"end":{"line":26,"column":744}},"loc":{"start":{"line":26,"column":747},"end":{"line":26,"column":815}},"line":26},"6":{"name":"e","decl":{"start":{"line":26,"column":829},"end":{"line":26,"column":830}},"loc":{"start":{"line":26,"column":836},"end":{"line":26,"column":865}},"line":26},"7":{"name":"f","decl":{"start":{"line":26,"column":879},"end":{"line":26,"column":880}},"loc":{"start":{"line":26,"column":883},"end":{"line":26,"column":992}},"line":26},"8":{"name":"_unsupportedIterableToArray","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":36}},"loc":{"start":{"line":28,"column":48},"end":{"line":28,"column":416}},"line":28},"9":{"name":"_arrayLikeToArray","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":26}},"loc":{"start":{"line":30,"column":37},"end":{"line":30,"column":183}},"line":30},"10":{"name":"NTrackerValidators","decl":{"start":{"line":32,"column":34},"end":{"line":32,"column":52}},"loc":{"start":{"line":32,"column":55},"end":{"line":69,"column":1}},"line":32},"11":{"name":"condition","decl":{"start":{"line":42,"column":26},"end":{"line":42,"column":35}},"loc":{"start":{"line":42,"column":40},"end":{"line":44,"column":7}},"line":42},"12":{"name":"condition","decl":{"start":{"line":48,"column":26},"end":{"line":48,"column":35}},"loc":{"start":{"line":48,"column":40},"end":{"line":50,"column":7}},"line":48},"13":{"name":"FTrackerValidators","decl":{"start":{"line":71,"column":34},"end":{"line":71,"column":52}},"loc":{"start":{"line":71,"column":55},"end":{"line":102,"column":1}},"line":71},"14":{"name":"condition","decl":{"start":{"line":84,"column":26},"end":{"line":84,"column":35}},"loc":{"start":{"line":84,"column":40},"end":{"line":86,"column":7}},"line":84},"15":{"name":"(anonymous_15)","decl":{"start":{"line":104,"column":38},"end":{"line":104,"column":39}},"loc":{"start":{"line":104,"column":50},"end":{"line":173,"column":1}},"line":104},"16":{"name":"_callee","decl":{"start":{"line":105,"column":100},"end":{"line":105,"column":107}},"loc":{"start":{"line":105,"column":117},"end":{"line":168,"column":3}},"line":105},"17":{"name":"_callee$","decl":{"start":{"line":108,"column":49},"end":{"line":108,"column":57}},"loc":{"start":{"line":108,"column":68},"end":{"line":167,"column":5}},"line":108},"18":{"name":"validateNewTracker","decl":{"start":{"line":170,"column":18},"end":{"line":170,"column":36}},"loc":{"start":{"line":170,"column":41},"end":{"line":172,"column":3}},"line":170},"19":{"name":"(anonymous_19)","decl":{"start":{"line":177,"column":33},"end":{"line":177,"column":34}},"loc":{"start":{"line":177,"column":45},"end":{"line":212,"column":1}},"line":177},"20":{"name":"_callee2","decl":{"start":{"line":178,"column":101},"end":{"line":178,"column":109}},"loc":{"start":{"line":178,"column":127},"end":{"line":207,"column":3}},"line":178},"21":{"name":"_callee2$","decl":{"start":{"line":180,"column":49},"end":{"line":180,"column":58}},"loc":{"start":{"line":180,"column":70},"end":{"line":206,"column":5}},"line":180},"22":{"name":"airportsExist","decl":{"start":{"line":209,"column":18},"end":{"line":209,"column":31}},"loc":{"start":{"line":209,"column":42},"end":{"line":211,"column":3}},"line":209},"23":{"name":"validateDates","decl":{"start":{"line":214,"column":29},"end":{"line":214,"column":42}},"loc":{"start":{"line":214,"column":60},"end":{"line":239,"column":1}},"line":214},"24":{"name":"checkDatesAreInFuture","decl":{"start":{"line":215,"column":39},"end":{"line":215,"column":60}},"loc":{"start":{"line":215,"column":68},"end":{"line":233,"column":3}},"line":215},"25":{"name":"endDatesAreAfterStartDates","decl":{"start":{"line":241,"column":42},"end":{"line":241,"column":68}},"loc":{"start":{"line":241,"column":86},"end":{"line":250,"column":1}},"line":241}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":65},"end":{"line":26,"column":623}},"type":"if","locations":[{"start":{"line":26,"column":65},"end":{"line":26,"column":623}},{"start":{"line":26,"column":65},"end":{"line":26,"column":623}}],"line":26},"1":{"loc":{"start":{"line":26,"column":69},"end":{"line":26,"column":128}},"type":"binary-expr","locations":[{"start":{"line":26,"column":69},"end":{"line":26,"column":98}},{"start":{"line":26,"column":102},"end":{"line":26,"column":128}}],"line":26},"2":{"loc":{"start":{"line":26,"column":132},"end":{"line":26,"column":463}},"type":"if","locations":[{"start":{"line":26,"column":132},"end":{"line":26,"column":463}},{"start":{"line":26,"column":132},"end":{"line":26,"column":463}}],"line":26},"3":{"loc":{"start":{"line":26,"column":136},"end":{"line":26,"column":248}},"type":"binary-expr","locations":[{"start":{"line":26,"column":136},"end":{"line":26,"column":152}},{"start":{"line":26,"column":157},"end":{"line":26,"column":192}},{"start":{"line":26,"column":197},"end":{"line":26,"column":211}},{"start":{"line":26,"column":215},"end":{"line":26,"column":216}},{"start":{"line":26,"column":220},"end":{"line":26,"column":248}}],"line":26},"4":{"loc":{"start":{"line":26,"column":252},"end":{"line":26,"column":267}},"type":"if","locations":[{"start":{"line":26,"column":252},"end":{"line":26,"column":267}},{"start":{"line":26,"column":252},"end":{"line":26,"column":267}}],"line":26},"5":{"loc":{"start":{"line":26,"column":337},"end":{"line":26,"column":378}},"type":"if","locations":[{"start":{"line":26,"column":337},"end":{"line":26,"column":378}},{"start":{"line":26,"column":337},"end":{"line":26,"column":378}}],"line":26},"6":{"loc":{"start":{"line":26,"column":891},"end":{"line":26,"column":953}},"type":"if","locations":[{"start":{"line":26,"column":891},"end":{"line":26,"column":953}},{"start":{"line":26,"column":891},"end":{"line":26,"column":953}}],"line":26},"7":{"loc":{"start":{"line":26,"column":895},"end":{"line":26,"column":936}},"type":"binary-expr","locations":[{"start":{"line":26,"column":895},"end":{"line":26,"column":912}},{"start":{"line":26,"column":916},"end":{"line":26,"column":936}}],"line":26},"8":{"loc":{"start":{"line":26,"column":966},"end":{"line":26,"column":988}},"type":"if","locations":[{"start":{"line":26,"column":966},"end":{"line":26,"column":988}},{"start":{"line":26,"column":966},"end":{"line":26,"column":988}}],"line":26},"9":{"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":65}},"type":"if","locations":[{"start":{"line":28,"column":50},"end":{"line":28,"column":65}},{"start":{"line":28,"column":50},"end":{"line":28,"column":65}}],"line":28},"10":{"loc":{"start":{"line":28,"column":66},"end":{"line":28,"column":129}},"type":"if","locations":[{"start":{"line":28,"column":66},"end":{"line":28,"column":129}},{"start":{"line":28,"column":66},"end":{"line":28,"column":129}}],"line":28},"11":{"loc":{"start":{"line":28,"column":186},"end":{"line":28,"column":246}},"type":"if","locations":[{"start":{"line":28,"column":186},"end":{"line":28,"column":246}},{"start":{"line":28,"column":186},"end":{"line":28,"column":246}}],"line":28},"12":{"loc":{"start":{"line":28,"column":190},"end":{"line":28,"column":221}},"type":"binary-expr","locations":[{"start":{"line":28,"column":190},"end":{"line":28,"column":204}},{"start":{"line":28,"column":208},"end":{"line":28,"column":221}}],"line":28},"13":{"loc":{"start":{"line":28,"column":247},"end":{"line":28,"column":300}},"type":"if","locations":[{"start":{"line":28,"column":247},"end":{"line":28,"column":300}},{"start":{"line":28,"column":247},"end":{"line":28,"column":300}}],"line":28},"14":{"loc":{"start":{"line":28,"column":251},"end":{"line":28,"column":277}},"type":"binary-expr","locations":[{"start":{"line":28,"column":251},"end":{"line":28,"column":262}},{"start":{"line":28,"column":266},"end":{"line":28,"column":277}}],"line":28},"15":{"loc":{"start":{"line":28,"column":301},"end":{"line":28,"column":414}},"type":"if","locations":[{"start":{"line":28,"column":301},"end":{"line":28,"column":414}},{"start":{"line":28,"column":301},"end":{"line":28,"column":414}}],"line":28},"16":{"loc":{"start":{"line":28,"column":305},"end":{"line":28,"column":376}},"type":"binary-expr","locations":[{"start":{"line":28,"column":305},"end":{"line":28,"column":322}},{"start":{"line":28,"column":326},"end":{"line":28,"column":376}}],"line":28},"17":{"loc":{"start":{"line":30,"column":39},"end":{"line":30,"column":93}},"type":"if","locations":[{"start":{"line":30,"column":39},"end":{"line":30,"column":93}},{"start":{"line":30,"column":39},"end":{"line":30,"column":93}}],"line":30},"18":{"loc":{"start":{"line":30,"column":43},"end":{"line":30,"column":74}},"type":"binary-expr","locations":[{"start":{"line":30,"column":43},"end":{"line":30,"column":54}},{"start":{"line":30,"column":58},"end":{"line":30,"column":74}}],"line":30},"19":{"loc":{"start":{"line":110,"column":8},"end":{"line":165,"column":9}},"type":"switch","locations":[{"start":{"line":111,"column":10},"end":{"line":123,"column":18}},{"start":{"line":125,"column":10},"end":{"line":137,"column":18}},{"start":{"line":139,"column":10},"end":{"line":143,"column":15}},{"start":{"line":145,"column":10},"end":{"line":151,"column":46}},{"start":{"line":153,"column":10},"end":{"line":160,"column":15}},{"start":{"line":162,"column":10},"end":{"line":162,"column":18}},{"start":{"line":163,"column":10},"end":{"line":164,"column":35}}],"line":110},"20":{"loc":{"start":{"line":112,"column":12},"end":{"line":115,"column":13}},"type":"if","locations":[{"start":{"line":112,"column":12},"end":{"line":115,"column":13}},{"start":{"line":112,"column":12},"end":{"line":115,"column":13}}],"line":112},"21":{"loc":{"start":{"line":126,"column":12},"end":{"line":129,"column":13}},"type":"if","locations":[{"start":{"line":126,"column":12},"end":{"line":129,"column":13}},{"start":{"line":126,"column":12},"end":{"line":129,"column":13}}],"line":126},"22":{"loc":{"start":{"line":182,"column":8},"end":{"line":204,"column":9}},"type":"switch","locations":[{"start":{"line":183,"column":10},"end":{"line":187,"column":15}},{"start":{"line":189,"column":10},"end":{"line":195,"column":15}},{"start":{"line":197,"column":10},"end":{"line":199,"column":136}},{"start":{"line":201,"column":10},"end":{"line":201,"column":17}},{"start":{"line":202,"column":10},"end":{"line":203,"column":36}}],"line":182},"23":{"loc":{"start":{"line":191,"column":12},"end":{"line":191,"column":140}},"type":"if","locations":[{"start":{"line":191,"column":12},"end":{"line":191,"column":140}},{"start":{"line":191,"column":12},"end":{"line":191,"column":140}}],"line":191},"24":{"loc":{"start":{"line":199,"column":12},"end":{"line":199,"column":136}},"type":"if","locations":[{"start":{"line":199,"column":12},"end":{"line":199,"column":136}},{"start":{"line":199,"column":12},"end":{"line":199,"column":136}}],"line":199},"25":{"loc":{"start":{"line":223,"column":8},"end":{"line":226,"column":9}},"type":"if","locations":[{"start":{"line":223,"column":8},"end":{"line":226,"column":9}},{"start":{"line":223,"column":8},"end":{"line":226,"column":9}}],"line":223},"26":{"loc":{"start":{"line":235,"column":2},"end":{"line":238,"column":3}},"type":"if","locations":[{"start":{"line":235,"column":2},"end":{"line":238,"column":3}},{"start":{"line":235,"column":2},"end":{"line":238,"column":3}}],"line":235},"27":{"loc":{"start":{"line":244,"column":6},"end":{"line":247,"column":7}},"type":"if","locations":[{"start":{"line":244,"column":6},"end":{"line":247,"column":7}},{"start":{"line":244,"column":6},"end":{"line":247,"column":7}}],"line":244}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":4,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":4,"24":4,"25":4,"26":4,"27":9,"28":9,"29":9,"30":0,"31":0,"32":4,"33":4,"34":0,"35":4,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":2,"57":2,"58":2,"59":2,"60":2,"61":2,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":1,"70":2,"71":6,"72":8,"73":2,"74":0,"75":0,"76":2,"77":2,"78":2,"79":2,"80":2,"81":2,"82":2,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":2,"95":2,"96":2,"97":2,"98":2,"99":2,"100":2,"101":2,"102":1,"103":2,"104":1,"105":1,"106":1,"107":2,"108":6,"109":6,"110":2,"111":2,"112":2,"113":2,"114":0,"115":2,"116":2,"117":2,"118":2,"119":0,"120":2,"121":1,"122":2,"123":1,"124":2,"125":4,"126":4,"127":4,"128":5,"129":5,"130":0,"131":0,"132":0,"133":4,"134":2,"135":2,"136":2,"137":1,"138":2,"139":2,"140":2,"141":2,"142":3,"143":1,"144":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":4,"5":9,"6":0,"7":4,"8":0,"9":0,"10":2,"11":2,"12":2,"13":0,"14":0,"15":1,"16":2,"17":6,"18":2,"19":1,"20":2,"21":6,"22":2,"23":2,"24":4,"25":2},"b":{"0":[0,4],"1":[4,4],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,4],"7":[4,0],"8":[0,4],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[2,0,0,2,2,0,2],"20":[0,2],"21":[0,0],"22":[2,2,2,2,2],"23":[0,2],"24":[0,2],"25":[0,5],"26":[2,0],"27":[1,2]},"inputSourceMap":{"version":3,"sources":["tracker.js"],"names":["NTrackerValidators","requiredFields","from","type","to","startDates","condition","tr","endDates","valueFields","min","Date","possibleValues","additionnalValidators","validateDates","endDatesAreAfterStartDates","airportsExist","FTrackerValidators","occurrences","validateNewTracker","tracker","valid","errors","InputError","trackerValidator","FormValidator","execute","Airport","findOne","iataCode","fromAirport","push","toAirport","checkDatesAreInFuture","dates","date","i","length","j"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\form-validation\\","sourcesContent":["//import { tracker } from '../../typeDefs/tracker';\r\nimport { Airport } from '../../database/models/Airport';\r\n\r\nimport { FormValidator } from '../../classes/FormValidator';\r\nimport { InputError } from '../../classes/RequestOperation';\r\n\r\nconst NTrackerValidators = () => {\r\n    const requiredFields = {\r\n        from:       {type: 'string'},\r\n        to:         {type: 'string'},\r\n        startDates: {type: 'object', condition: (tr) => tr.type === 'N'},\r\n        endDates:   {type: 'object', condition: (tr) => tr.type === 'N'},\r\n        type:       {type: 'string'},\r\n    };\r\n\r\n    const valueFields = {\r\n        startDates: {min: new Date()},\r\n        endDates:   {min: new Date()},\r\n        type:       {possibleValues: ['N']},\r\n    }\r\n\r\n    const additionnalValidators = [validateDates, endDatesAreAfterStartDates, airportsExist];\r\n\r\n    return [requiredFields, valueFields, additionnalValidators];\r\n};\r\n\r\nconst FTrackerValidators = () => {\r\n    const requiredFields = {\r\n        from:         {type: 'string'},\r\n        to:           {type: 'string'},\r\n        type:         {type: 'string'},\r\n        occurrences:  {type: 'object', condition: (tr) => tr.type === 'F'},\r\n    };\r\n\r\n    const valueFields = {\r\n        startDates: {min: new Date()},\r\n        endDates:   {min: new Date()},\r\n        type:       {possibleValues: ['F']},\r\n    }\r\n\r\n    const additionnalValidators = [airportsExist];\r\n\r\n    return [requiredFields, valueFields, additionnalValidators];\r\n};\r\n\r\nexport const validateNewTracker = async (tracker) => {\r\n    let requiredFields, valueFields, additionnalValidators;\r\n\r\n    if(tracker.type === 'N'){\r\n        [requiredFields, valueFields, additionnalValidators] = NTrackerValidators();\r\n    }else if (tracker.type ===\"F\"){\r\n        [requiredFields, valueFields, additionnalValidators] = FTrackerValidators();\r\n    }else{\r\n        return {valid: false, errors: [new InputError(null, \"Tracker type unknow\")]};\r\n    }\r\n    \r\n    let trackerValidator = new FormValidator(tracker, {requiredFields, valueFields}, ...additionnalValidators);\r\n    let { valid, errors } = await trackerValidator.execute();\r\n\r\n    return { valid, errors};\r\n\r\n    //Check if the dates are in the future, and end dates > start dates    \r\n\r\n\r\n    //Tracker.findOne({iataCode: tracker.from})\r\n    //Check if from and to (iataCodes) are valid\r\n};\r\n\r\nconst airportsExist = async (tracker, errors) => {\r\n    let fromAirport = await Airport.findOne({iataCode: tracker.from});\r\n    if(!fromAirport) errors.push(new InputError(null, `The airport: ${tracker.from} does not exist.`));\r\n\r\n    let toAirport = await Airport.findOne({iataCode: tracker.to});\r\n    if(!toAirport) errors.push(new InputError(null, `The airport: ${tracker.to} does not exist.`));\r\n};\r\n\r\nconst validateDates = (tracker, errors) => {\r\n    const checkDatesAreInFuture = (dates) => {\r\n        for(let date of dates){\r\n            if(new Date(date) < new Date()){\r\n                errors.push(new InputError(null, `Dates must be in the future`));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if(tracker.type === 'N'){\r\n        checkDatesAreInFuture(tracker.startDates);\r\n        checkDatesAreInFuture(tracker.endDates);\r\n    }\r\n};\r\n\r\nconst endDatesAreAfterStartDates = (tracker, errors) => {\r\n    for(let i = 0; i < tracker.startDates.length; i++){\r\n        for(let j = 0; j < tracker.endDates.length; j++){\r\n            if(tracker.startDates[i] > tracker.endDates[j]){\r\n                errors.push(new InputError(null, `The return dates must be prior to the departure dates`));\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7920b93bb0fee6bf9c747546ddf576b07b51173f","contentHash":"c862230d1961753192ac3ed5713b80c962171274f008afa4bb56e7b702fdb43f"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\FormValidator.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\FormValidator.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":79}},"4":{"start":{"line":12,"column":19},"end":{"line":12,"column":80}},"5":{"start":{"line":14,"column":25},"end":{"line":14,"column":99}},"6":{"start":{"line":16,"column":23},"end":{"line":16,"column":95}},"7":{"start":{"line":18,"column":20},"end":{"line":18,"column":89}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":55}},"9":{"start":{"line":22,"column":65},"end":{"line":22,"column":623}},"10":{"start":{"line":22,"column":132},"end":{"line":22,"column":463}},"11":{"start":{"line":22,"column":252},"end":{"line":22,"column":267}},"12":{"start":{"line":22,"column":260},"end":{"line":22,"column":267}},"13":{"start":{"line":22,"column":276},"end":{"line":22,"column":277}},"14":{"start":{"line":22,"column":287},"end":{"line":22,"column":302}},"15":{"start":{"line":22,"column":304},"end":{"line":22,"column":461}},"16":{"start":{"line":22,"column":337},"end":{"line":22,"column":378}},"17":{"start":{"line":22,"column":356},"end":{"line":22,"column":378}},"18":{"start":{"line":22,"column":379},"end":{"line":22,"column":417}},"19":{"start":{"line":22,"column":441},"end":{"line":22,"column":450}},"20":{"start":{"line":22,"column":464},"end":{"line":22,"column":621}},"21":{"start":{"line":22,"column":647},"end":{"line":22,"column":651}},"22":{"start":{"line":22,"column":662},"end":{"line":22,"column":667}},"23":{"start":{"line":22,"column":674},"end":{"line":22,"column":995}},"24":{"start":{"line":22,"column":701},"end":{"line":22,"column":727}},"25":{"start":{"line":22,"column":760},"end":{"line":22,"column":769}},"26":{"start":{"line":22,"column":771},"end":{"line":22,"column":800}},"27":{"start":{"line":22,"column":801},"end":{"line":22,"column":813}},"28":{"start":{"line":22,"column":838},"end":{"line":22,"column":852}},"29":{"start":{"line":22,"column":853},"end":{"line":22,"column":863}},"30":{"start":{"line":22,"column":885},"end":{"line":22,"column":990}},"31":{"start":{"line":22,"column":891},"end":{"line":22,"column":953}},"32":{"start":{"line":22,"column":938},"end":{"line":22,"column":953}},"33":{"start":{"line":22,"column":966},"end":{"line":22,"column":988}},"34":{"start":{"line":22,"column":978},"end":{"line":22,"column":988}},"35":{"start":{"line":24,"column":50},"end":{"line":24,"column":65}},"36":{"start":{"line":24,"column":58},"end":{"line":24,"column":65}},"37":{"start":{"line":24,"column":66},"end":{"line":24,"column":129}},"38":{"start":{"line":24,"column":93},"end":{"line":24,"column":129}},"39":{"start":{"line":24,"column":138},"end":{"line":24,"column":184}},"40":{"start":{"line":24,"column":186},"end":{"line":24,"column":246}},"41":{"start":{"line":24,"column":223},"end":{"line":24,"column":246}},"42":{"start":{"line":24,"column":247},"end":{"line":24,"column":300}},"43":{"start":{"line":24,"column":279},"end":{"line":24,"column":300}},"44":{"start":{"line":24,"column":301},"end":{"line":24,"column":414}},"45":{"start":{"line":24,"column":378},"end":{"line":24,"column":414}},"46":{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},"47":{"start":{"line":26,"column":76},"end":{"line":26,"column":93}},"48":{"start":{"line":26,"column":94},"end":{"line":26,"column":168}},"49":{"start":{"line":26,"column":107},"end":{"line":26,"column":108}},"50":{"start":{"line":26,"column":117},"end":{"line":26,"column":131}},"51":{"start":{"line":26,"column":149},"end":{"line":26,"column":166}},"52":{"start":{"line":26,"column":169},"end":{"line":26,"column":181}},"53":{"start":{"line":38,"column":33},"end":{"line":202,"column":3}},"54":{"start":{"line":47,"column":30},"end":{"line":47,"column":49}},"55":{"start":{"line":48,"column":25},"end":{"line":48,"column":82}},"56":{"start":{"line":49,"column":27},"end":{"line":49,"column":43}},"57":{"start":{"line":50,"column":22},"end":{"line":50,"column":73}},"58":{"start":{"line":51,"column":4},"end":{"line":51,"column":58}},"59":{"start":{"line":52,"column":4},"end":{"line":52,"column":21}},"60":{"start":{"line":53,"column":4},"end":{"line":53,"column":41}},"61":{"start":{"line":54,"column":4},"end":{"line":54,"column":35}},"62":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"63":{"start":{"line":56,"column":20},"end":{"line":56,"column":36}},"64":{"start":{"line":56,"column":62},"end":{"line":56,"column":96}},"65":{"start":{"line":56,"column":105},"end":{"line":56,"column":106}},"66":{"start":{"line":57,"column":6},"end":{"line":57,"column":56}},"67":{"start":{"line":60,"column":4},"end":{"line":60,"column":55}},"68":{"start":{"line":61,"column":4},"end":{"line":61,"column":21}},"69":{"start":{"line":64,"column":2},"end":{"line":200,"column":6}},"70":{"start":{"line":67,"column":21},"end":{"line":145,"column":9}},"71":{"start":{"line":70,"column":8},"end":{"line":144,"column":45}},"72":{"start":{"line":71,"column":10},"end":{"line":143,"column":11}},"73":{"start":{"line":72,"column":12},"end":{"line":142,"column":13}},"74":{"start":{"line":74,"column":16},"end":{"line":74,"column":43}},"75":{"start":{"line":75,"column":16},"end":{"line":75,"column":40}},"76":{"start":{"line":77,"column":16},"end":{"line":80,"column":17}},"77":{"start":{"line":78,"column":18},"end":{"line":78,"column":37}},"78":{"start":{"line":79,"column":18},"end":{"line":79,"column":24}},"79":{"start":{"line":82,"column":16},"end":{"line":82,"column":83}},"80":{"start":{"line":83,"column":16},"end":{"line":83,"column":34}},"81":{"start":{"line":85,"column":16},"end":{"line":85,"column":30}},"82":{"start":{"line":88,"column":16},"end":{"line":91,"column":17}},"83":{"start":{"line":89,"column":18},"end":{"line":89,"column":37}},"84":{"start":{"line":90,"column":18},"end":{"line":90,"column":24}},"85":{"start":{"line":93,"column":16},"end":{"line":93,"column":32}},"86":{"start":{"line":95,"column":16},"end":{"line":98,"column":17}},"87":{"start":{"line":96,"column":18},"end":{"line":96,"column":37}},"88":{"start":{"line":97,"column":18},"end":{"line":97,"column":24}},"89":{"start":{"line":100,"column":16},"end":{"line":103,"column":17}},"90":{"start":{"line":101,"column":18},"end":{"line":101,"column":37}},"91":{"start":{"line":102,"column":18},"end":{"line":102,"column":24}},"92":{"start":{"line":105,"column":16},"end":{"line":105,"column":35}},"93":{"start":{"line":106,"column":16},"end":{"line":106,"column":49}},"94":{"start":{"line":109,"column":16},"end":{"line":109,"column":35}},"95":{"start":{"line":110,"column":16},"end":{"line":110,"column":22}},"96":{"start":{"line":113,"column":16},"end":{"line":113,"column":42}},"97":{"start":{"line":116,"column":16},"end":{"line":116,"column":34}},"98":{"start":{"line":117,"column":16},"end":{"line":117,"column":22}},"99":{"start":{"line":120,"column":16},"end":{"line":120,"column":35}},"100":{"start":{"line":121,"column":16},"end":{"line":121,"column":22}},"101":{"start":{"line":124,"column":16},"end":{"line":124,"column":35}},"102":{"start":{"line":125,"column":16},"end":{"line":125,"column":51}},"103":{"start":{"line":127,"column":16},"end":{"line":127,"column":41}},"104":{"start":{"line":130,"column":16},"end":{"line":130,"column":35}},"105":{"start":{"line":132,"column":16},"end":{"line":132,"column":30}},"106":{"start":{"line":134,"column":16},"end":{"line":134,"column":43}},"107":{"start":{"line":137,"column":16},"end":{"line":137,"column":63}},"108":{"start":{"line":141,"column":16},"end":{"line":141,"column":39}},"109":{"start":{"line":148,"column":8},"end":{"line":148,"column":47}},"110":{"start":{"line":151,"column":6},"end":{"line":151,"column":21}},"111":{"start":{"line":156,"column":6},"end":{"line":159,"column":8}},"112":{"start":{"line":164,"column":6},"end":{"line":178,"column":7}},"113":{"start":{"line":165,"column":24},"end":{"line":165,"column":50}},"114":{"start":{"line":166,"column":25},"end":{"line":166,"column":102}},"115":{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},"116":{"start":{"line":169,"column":10},"end":{"line":169,"column":19}},"117":{"start":{"line":173,"column":8},"end":{"line":177,"column":9}},"118":{"start":{"line":174,"column":10},"end":{"line":174,"column":71}},"119":{"start":{"line":175,"column":15},"end":{"line":177,"column":9}},"120":{"start":{"line":176,"column":10},"end":{"line":176,"column":170}},"121":{"start":{"line":186,"column":6},"end":{"line":198,"column":7}},"122":{"start":{"line":187,"column":21},"end":{"line":187,"column":44}},"123":{"start":{"line":188,"column":20},"end":{"line":188,"column":36}},"124":{"start":{"line":189,"column":8},"end":{"line":189,"column":29}},"125":{"start":{"line":189,"column":20},"end":{"line":189,"column":29}},"126":{"start":{"line":191,"column":8},"end":{"line":197,"column":9}},"127":{"start":{"line":192,"column":10},"end":{"line":192,"column":77}},"128":{"start":{"line":193,"column":15},"end":{"line":197,"column":9}},"129":{"start":{"line":194,"column":10},"end":{"line":194,"column":75}},"130":{"start":{"line":195,"column":15},"end":{"line":197,"column":9}},"131":{"start":{"line":196,"column":10},"end":{"line":196,"column":100}},"132":{"start":{"line":201,"column":2},"end":{"line":201,"column":23}},"133":{"start":{"line":204,"column":0},"end":{"line":204,"column":38}}},"fnMap":{"0":{"name":"_createForOfIteratorHelper","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":35}},"loc":{"start":{"line":22,"column":55},"end":{"line":22,"column":997}},"line":22},"1":{"name":"F","decl":{"start":{"line":22,"column":296},"end":{"line":22,"column":297}},"loc":{"start":{"line":22,"column":300},"end":{"line":22,"column":302}},"line":22},"2":{"name":"n","decl":{"start":{"line":22,"column":331},"end":{"line":22,"column":332}},"loc":{"start":{"line":22,"column":335},"end":{"line":22,"column":419}},"line":22},"3":{"name":"e","decl":{"start":{"line":22,"column":433},"end":{"line":22,"column":434}},"loc":{"start":{"line":22,"column":439},"end":{"line":22,"column":452}},"line":22},"4":{"name":"s","decl":{"start":{"line":22,"column":695},"end":{"line":22,"column":696}},"loc":{"start":{"line":22,"column":699},"end":{"line":22,"column":729}},"line":22},"5":{"name":"n","decl":{"start":{"line":22,"column":743},"end":{"line":22,"column":744}},"loc":{"start":{"line":22,"column":747},"end":{"line":22,"column":815}},"line":22},"6":{"name":"e","decl":{"start":{"line":22,"column":829},"end":{"line":22,"column":830}},"loc":{"start":{"line":22,"column":836},"end":{"line":22,"column":865}},"line":22},"7":{"name":"f","decl":{"start":{"line":22,"column":879},"end":{"line":22,"column":880}},"loc":{"start":{"line":22,"column":883},"end":{"line":22,"column":992}},"line":22},"8":{"name":"_unsupportedIterableToArray","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":36}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":416}},"line":24},"9":{"name":"_arrayLikeToArray","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":183}},"line":26},"10":{"name":"(anonymous_10)","decl":{"start":{"line":38,"column":33},"end":{"line":38,"column":34}},"loc":{"start":{"line":38,"column":45},"end":{"line":202,"column":1}},"line":38},"11":{"name":"FormValidator","decl":{"start":{"line":46,"column":11},"end":{"line":46,"column":24}},"loc":{"start":{"line":46,"column":37},"end":{"line":62,"column":3}},"line":46},"12":{"name":"(anonymous_12)","decl":{"start":{"line":66,"column":11},"end":{"line":66,"column":12}},"loc":{"start":{"line":66,"column":23},"end":{"line":152,"column":5}},"line":66},"13":{"name":"_callee","decl":{"start":{"line":67,"column":108},"end":{"line":67,"column":115}},"loc":{"start":{"line":67,"column":118},"end":{"line":145,"column":7}},"line":67},"14":{"name":"_callee$","decl":{"start":{"line":70,"column":53},"end":{"line":70,"column":61}},"loc":{"start":{"line":70,"column":72},"end":{"line":144,"column":9}},"line":70},"15":{"name":"execute","decl":{"start":{"line":147,"column":15},"end":{"line":147,"column":22}},"loc":{"start":{"line":147,"column":25},"end":{"line":149,"column":7}},"line":147},"16":{"name":"valid","decl":{"start":{"line":155,"column":20},"end":{"line":155,"column":25}},"loc":{"start":{"line":155,"column":28},"end":{"line":160,"column":5}},"line":155},"17":{"name":"checkRequiredFields","decl":{"start":{"line":163,"column":20},"end":{"line":163,"column":39}},"loc":{"start":{"line":163,"column":42},"end":{"line":179,"column":5}},"line":163},"18":{"name":"checkTypeFields","decl":{"start":{"line":182,"column":20},"end":{"line":182,"column":35}},"loc":{"start":{"line":182,"column":38},"end":{"line":182,"column":40}},"line":182},"19":{"name":"checkValueFields","decl":{"start":{"line":185,"column":20},"end":{"line":185,"column":36}},"loc":{"start":{"line":185,"column":39},"end":{"line":199,"column":5}},"line":185}},"branchMap":{"0":{"loc":{"start":{"line":22,"column":65},"end":{"line":22,"column":623}},"type":"if","locations":[{"start":{"line":22,"column":65},"end":{"line":22,"column":623}},{"start":{"line":22,"column":65},"end":{"line":22,"column":623}}],"line":22},"1":{"loc":{"start":{"line":22,"column":69},"end":{"line":22,"column":128}},"type":"binary-expr","locations":[{"start":{"line":22,"column":69},"end":{"line":22,"column":98}},{"start":{"line":22,"column":102},"end":{"line":22,"column":128}}],"line":22},"2":{"loc":{"start":{"line":22,"column":132},"end":{"line":22,"column":463}},"type":"if","locations":[{"start":{"line":22,"column":132},"end":{"line":22,"column":463}},{"start":{"line":22,"column":132},"end":{"line":22,"column":463}}],"line":22},"3":{"loc":{"start":{"line":22,"column":136},"end":{"line":22,"column":248}},"type":"binary-expr","locations":[{"start":{"line":22,"column":136},"end":{"line":22,"column":152}},{"start":{"line":22,"column":157},"end":{"line":22,"column":192}},{"start":{"line":22,"column":197},"end":{"line":22,"column":211}},{"start":{"line":22,"column":215},"end":{"line":22,"column":216}},{"start":{"line":22,"column":220},"end":{"line":22,"column":248}}],"line":22},"4":{"loc":{"start":{"line":22,"column":252},"end":{"line":22,"column":267}},"type":"if","locations":[{"start":{"line":22,"column":252},"end":{"line":22,"column":267}},{"start":{"line":22,"column":252},"end":{"line":22,"column":267}}],"line":22},"5":{"loc":{"start":{"line":22,"column":337},"end":{"line":22,"column":378}},"type":"if","locations":[{"start":{"line":22,"column":337},"end":{"line":22,"column":378}},{"start":{"line":22,"column":337},"end":{"line":22,"column":378}}],"line":22},"6":{"loc":{"start":{"line":22,"column":891},"end":{"line":22,"column":953}},"type":"if","locations":[{"start":{"line":22,"column":891},"end":{"line":22,"column":953}},{"start":{"line":22,"column":891},"end":{"line":22,"column":953}}],"line":22},"7":{"loc":{"start":{"line":22,"column":895},"end":{"line":22,"column":936}},"type":"binary-expr","locations":[{"start":{"line":22,"column":895},"end":{"line":22,"column":912}},{"start":{"line":22,"column":916},"end":{"line":22,"column":936}}],"line":22},"8":{"loc":{"start":{"line":22,"column":966},"end":{"line":22,"column":988}},"type":"if","locations":[{"start":{"line":22,"column":966},"end":{"line":22,"column":988}},{"start":{"line":22,"column":966},"end":{"line":22,"column":988}}],"line":22},"9":{"loc":{"start":{"line":24,"column":50},"end":{"line":24,"column":65}},"type":"if","locations":[{"start":{"line":24,"column":50},"end":{"line":24,"column":65}},{"start":{"line":24,"column":50},"end":{"line":24,"column":65}}],"line":24},"10":{"loc":{"start":{"line":24,"column":66},"end":{"line":24,"column":129}},"type":"if","locations":[{"start":{"line":24,"column":66},"end":{"line":24,"column":129}},{"start":{"line":24,"column":66},"end":{"line":24,"column":129}}],"line":24},"11":{"loc":{"start":{"line":24,"column":186},"end":{"line":24,"column":246}},"type":"if","locations":[{"start":{"line":24,"column":186},"end":{"line":24,"column":246}},{"start":{"line":24,"column":186},"end":{"line":24,"column":246}}],"line":24},"12":{"loc":{"start":{"line":24,"column":190},"end":{"line":24,"column":221}},"type":"binary-expr","locations":[{"start":{"line":24,"column":190},"end":{"line":24,"column":204}},{"start":{"line":24,"column":208},"end":{"line":24,"column":221}}],"line":24},"13":{"loc":{"start":{"line":24,"column":247},"end":{"line":24,"column":300}},"type":"if","locations":[{"start":{"line":24,"column":247},"end":{"line":24,"column":300}},{"start":{"line":24,"column":247},"end":{"line":24,"column":300}}],"line":24},"14":{"loc":{"start":{"line":24,"column":251},"end":{"line":24,"column":277}},"type":"binary-expr","locations":[{"start":{"line":24,"column":251},"end":{"line":24,"column":262}},{"start":{"line":24,"column":266},"end":{"line":24,"column":277}}],"line":24},"15":{"loc":{"start":{"line":24,"column":301},"end":{"line":24,"column":414}},"type":"if","locations":[{"start":{"line":24,"column":301},"end":{"line":24,"column":414}},{"start":{"line":24,"column":301},"end":{"line":24,"column":414}}],"line":24},"16":{"loc":{"start":{"line":24,"column":305},"end":{"line":24,"column":376}},"type":"binary-expr","locations":[{"start":{"line":24,"column":305},"end":{"line":24,"column":322}},{"start":{"line":24,"column":326},"end":{"line":24,"column":376}}],"line":24},"17":{"loc":{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},"type":"if","locations":[{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},{"start":{"line":26,"column":39},"end":{"line":26,"column":93}}],"line":26},"18":{"loc":{"start":{"line":26,"column":43},"end":{"line":26,"column":74}},"type":"binary-expr","locations":[{"start":{"line":26,"column":43},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":74}}],"line":26},"19":{"loc":{"start":{"line":48,"column":25},"end":{"line":48,"column":82}},"type":"cond-expr","locations":[{"start":{"line":48,"column":58},"end":{"line":48,"column":60}},{"start":{"line":48,"column":63},"end":{"line":48,"column":82}}],"line":48},"20":{"loc":{"start":{"line":50,"column":22},"end":{"line":50,"column":73}},"type":"cond-expr","locations":[{"start":{"line":50,"column":52},"end":{"line":50,"column":54}},{"start":{"line":50,"column":57},"end":{"line":50,"column":73}}],"line":50},"21":{"loc":{"start":{"line":56,"column":72},"end":{"line":56,"column":95}},"type":"cond-expr","locations":[{"start":{"line":56,"column":83},"end":{"line":56,"column":91}},{"start":{"line":56,"column":94},"end":{"line":56,"column":95}}],"line":56},"22":{"loc":{"start":{"line":72,"column":12},"end":{"line":142,"column":13}},"type":"switch","locations":[{"start":{"line":73,"column":14},"end":{"line":85,"column":30}},{"start":{"line":87,"column":14},"end":{"line":106,"column":49}},{"start":{"line":108,"column":14},"end":{"line":110,"column":22}},{"start":{"line":112,"column":14},"end":{"line":113,"column":42}},{"start":{"line":115,"column":14},"end":{"line":117,"column":22}},{"start":{"line":119,"column":14},"end":{"line":121,"column":22}},{"start":{"line":123,"column":14},"end":{"line":127,"column":41}},{"start":{"line":129,"column":14},"end":{"line":134,"column":43}},{"start":{"line":136,"column":14},"end":{"line":137,"column":63}},{"start":{"line":139,"column":14},"end":{"line":139,"column":22}},{"start":{"line":140,"column":14},"end":{"line":141,"column":39}}],"line":72},"23":{"loc":{"start":{"line":77,"column":16},"end":{"line":80,"column":17}},"type":"if","locations":[{"start":{"line":77,"column":16},"end":{"line":80,"column":17}},{"start":{"line":77,"column":16},"end":{"line":80,"column":17}}],"line":77},"24":{"loc":{"start":{"line":88,"column":16},"end":{"line":91,"column":17}},"type":"if","locations":[{"start":{"line":88,"column":16},"end":{"line":91,"column":17}},{"start":{"line":88,"column":16},"end":{"line":91,"column":17}}],"line":88},"25":{"loc":{"start":{"line":95,"column":16},"end":{"line":98,"column":17}},"type":"if","locations":[{"start":{"line":95,"column":16},"end":{"line":98,"column":17}},{"start":{"line":95,"column":16},"end":{"line":98,"column":17}}],"line":95},"26":{"loc":{"start":{"line":100,"column":16},"end":{"line":103,"column":17}},"type":"if","locations":[{"start":{"line":100,"column":16},"end":{"line":103,"column":17}},{"start":{"line":100,"column":16},"end":{"line":103,"column":17}}],"line":100},"27":{"loc":{"start":{"line":166,"column":25},"end":{"line":166,"column":102}},"type":"binary-expr","locations":[{"start":{"line":166,"column":25},"end":{"line":166,"column":44}},{"start":{"line":166,"column":48},"end":{"line":166,"column":78}},{"start":{"line":166,"column":82},"end":{"line":166,"column":102}}],"line":166},"28":{"loc":{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},{"start":{"line":168,"column":8},"end":{"line":170,"column":9}}],"line":168},"29":{"loc":{"start":{"line":173,"column":8},"end":{"line":177,"column":9}},"type":"if","locations":[{"start":{"line":173,"column":8},"end":{"line":177,"column":9}},{"start":{"line":173,"column":8},"end":{"line":177,"column":9}}],"line":173},"30":{"loc":{"start":{"line":173,"column":12},"end":{"line":173,"column":43}},"type":"binary-expr","locations":[{"start":{"line":173,"column":12},"end":{"line":173,"column":22}},{"start":{"line":173,"column":26},"end":{"line":173,"column":43}}],"line":173},"31":{"loc":{"start":{"line":175,"column":15},"end":{"line":177,"column":9}},"type":"if","locations":[{"start":{"line":175,"column":15},"end":{"line":177,"column":9}},{"start":{"line":175,"column":15},"end":{"line":177,"column":9}}],"line":175},"32":{"loc":{"start":{"line":175,"column":19},"end":{"line":175,"column":98}},"type":"binary-expr","locations":[{"start":{"line":175,"column":19},"end":{"line":175,"column":33}},{"start":{"line":175,"column":37},"end":{"line":175,"column":98}}],"line":175},"33":{"loc":{"start":{"line":189,"column":8},"end":{"line":189,"column":29}},"type":"if","locations":[{"start":{"line":189,"column":8},"end":{"line":189,"column":29}},{"start":{"line":189,"column":8},"end":{"line":189,"column":29}}],"line":189},"34":{"loc":{"start":{"line":191,"column":8},"end":{"line":197,"column":9}},"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":197,"column":9}},{"start":{"line":191,"column":8},"end":{"line":197,"column":9}}],"line":191},"35":{"loc":{"start":{"line":191,"column":12},"end":{"line":191,"column":63}},"type":"binary-expr","locations":[{"start":{"line":191,"column":12},"end":{"line":191,"column":28}},{"start":{"line":191,"column":32},"end":{"line":191,"column":63}}],"line":191},"36":{"loc":{"start":{"line":193,"column":15},"end":{"line":197,"column":9}},"type":"if","locations":[{"start":{"line":193,"column":15},"end":{"line":197,"column":9}},{"start":{"line":193,"column":15},"end":{"line":197,"column":9}}],"line":193},"37":{"loc":{"start":{"line":193,"column":19},"end":{"line":193,"column":70}},"type":"binary-expr","locations":[{"start":{"line":193,"column":19},"end":{"line":193,"column":35}},{"start":{"line":193,"column":39},"end":{"line":193,"column":70}}],"line":193},"38":{"loc":{"start":{"line":195,"column":15},"end":{"line":197,"column":9}},"type":"if","locations":[{"start":{"line":195,"column":15},"end":{"line":197,"column":9}},{"start":{"line":195,"column":15},"end":{"line":197,"column":9}}],"line":195},"39":{"loc":{"start":{"line":195,"column":19},"end":{"line":195,"column":87}},"type":"binary-expr","locations":[{"start":{"line":195,"column":19},"end":{"line":195,"column":40}},{"start":{"line":195,"column":44},"end":{"line":195,"column":87}}],"line":195}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":2,"22":2,"23":2,"24":2,"25":8,"26":8,"27":8,"28":0,"29":0,"30":2,"31":2,"32":0,"33":2,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":2,"55":2,"56":2,"57":2,"58":2,"59":2,"60":2,"61":2,"62":2,"63":2,"64":2,"65":2,"66":6,"67":2,"68":2,"69":1,"70":1,"71":2,"72":8,"73":24,"74":2,"75":2,"76":2,"77":0,"78":0,"79":2,"80":2,"81":2,"82":8,"83":2,"84":2,"85":6,"86":6,"87":0,"88":0,"89":6,"90":4,"91":4,"92":2,"93":2,"94":2,"95":2,"96":4,"97":6,"98":6,"99":2,"100":2,"101":0,"102":0,"103":0,"104":2,"105":2,"106":2,"107":2,"108":2,"109":2,"110":1,"111":2,"112":2,"113":10,"114":10,"115":10,"116":0,"117":10,"118":0,"119":10,"120":0,"121":2,"122":6,"123":6,"124":6,"125":0,"126":6,"127":0,"128":6,"129":0,"130":6,"131":0,"132":1,"133":1},"f":{"0":2,"1":0,"2":0,"3":0,"4":2,"5":8,"6":0,"7":2,"8":0,"9":0,"10":1,"11":2,"12":1,"13":2,"14":8,"15":2,"16":2,"17":2,"18":0,"19":2},"b":{"0":[0,2],"1":[2,2],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,2],"7":[2,0],"8":[0,2],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,2],"20":[0,2],"21":[2,0],"22":[2,8,2,4,6,2,0,2,2,0,2],"23":[0,2],"24":[2,6],"25":[0,6],"26":[4,2],"27":[10,4,6],"28":[0,10],"29":[0,10],"30":[10,10],"31":[0,10],"32":[10,10],"33":[0,6],"34":[0,6],"35":[6,0],"36":[0,6],"37":[6,0],"38":[0,6],"39":[6,2]},"inputSourceMap":{"version":3,"sources":["FormValidator.js"],"names":["FormValidator","form","requiredFields","valueFields","additionalValidations","errors","checkRequiredFields","checkValueFields","v","valid","length","field","fieldConf","isRequired","condition","push","type","params","value","minLength","maxLength","possibleValues","indexOf"],"mappings":"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","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\","sourcesContent":["import { isAsyncFunction } from '../services/helpers/function';\r\n\r\n/**\r\n * Check the required fields\r\n * @param {Object} rFields \r\n * @param {Object} obj \r\n * @param {Array} errors \r\n */\r\n\r\n/**\r\n * \r\n */\r\nexport class FormValidator {\r\n    /**\r\n     * \r\n     * @param {Object} form Object to validate\r\n     * @param {Object} requiredFields Required fields configuration\r\n     * @param {Object} valueFields Value fields configuration\r\n     * @param  {Functions} additionalValidations Additional validations functions to execute\r\n     */\r\n    constructor(form, {requiredFields = {}, valueFields = {}}, ...additionalValidations){\r\n        this.form = form;\r\n        this.requiredFields = requiredFields;\r\n        this.valueFields = valueFields;\r\n        this.additionalValidations = additionalValidations;\r\n        this.errors = [];\r\n    }\r\n\r\n    async execute(){\r\n        this.checkRequiredFields();\r\n\r\n        this.checkValueFields();\r\n\r\n        if(this.additionalValidations){\r\n            for(let v of this.additionalValidations){\r\n                if(typeof v === 'function'){\r\n                    if(isAsyncFunction(v)) await v(this.form, this.errors)\r\n                    else v(this.form, this.errors);\r\n                } \r\n            }\r\n        }\r\n\r\n        return this.valid();\r\n    }\r\n\r\n    valid(){\r\n        return { valid: this.errors.length === 0, errors: this.errors };\r\n    }\r\n\r\n    checkRequiredFields(){\r\n        for(let field in this.requiredFields){\r\n            let fieldConf = this.requiredFields[field];\r\n            let isRequired = (fieldConf.condition && fieldConf.condition(this.form)) \r\n                          || (!fieldConf.condition);\r\n    \r\n            if(!isRequired){\r\n                continue;\r\n            }\r\n\r\n            //Check if required\r\n            if(isRequired && !this.form[field]){\r\n                this.errors.push(`The field ${field} is required`);\r\n            //Check the type\r\n            }else if(fieldConf.type && typeof this.form[field] !== fieldConf.type){\r\n                this.errors.push(`Incorrect type for the field ${field}, ${typeof this.form[field]} instead of ${fieldConf.type}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    checkTypeFields(){\r\n\r\n    }\r\n\r\n    checkValueFields(){\r\n        for(let field in this.valueFields){\r\n            let params = this.valueFields[field];\r\n            let value = this.form[field];\r\n            if(!value) continue;\r\n\r\n            if(params.minLength && value.length < params.minLength){\r\n                this.errors.push(`Length must be greater than ${minLength}`);\r\n            }else if(params.maxLength && value.length > params.maxLength){\r\n                this.errors.push(`Length must be lower than ${maxLength}`);\r\n            }else if(params.possibleValues && params.possibleValues.indexOf(value) === -1){\r\n                this.errors.push(`The value: '${value}' is not authorized  for ${field}`);\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e2668600008cad72a4bc3d9f20c2ed788cdc6d61","contentHash":"f7c64556dabc1171cf4dc7c7a8eb34d25002cd2a6c98a96fb056e24dee0f90c9"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\helpers\\function.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\helpers\\function.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"2":{"start":{"line":8,"column":22},"end":{"line":15,"column":1}},"3":{"start":{"line":9,"column":15},"end":{"line":9,"column":37}},"4":{"start":{"line":10,"column":2},"end":{"line":14,"column":4}},"5":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}}},"fnMap":{"0":{"name":"isAsyncFunction","decl":{"start":{"line":8,"column":31},"end":{"line":8,"column":46}},"loc":{"start":{"line":8,"column":53},"end":{"line":15,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":2},"end":{"line":12,"column":42}},"type":"binary-expr","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":25}},{"start":{"line":12,"column":2},"end":{"line":12,"column":42}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":6,"4":6,"5":1},"f":{"0":6},"b":{"0":[6,6]},"inputSourceMap":{"version":3,"sources":["function.js"],"names":["isAsyncFunction","func","string","toString","trim","match"],"mappings":";;;;;;;AAAO,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AACrC,MAAMC,MAAM,GAAGD,IAAI,CAACE,QAAL,GAAgBC,IAAhB,EAAf;AAEA,SAAO,CAAC,GACJ;AACAF,EAAAA,MAAM,CAACG,KAAP,CAAa,SAAb,KACA;AACAH,EAAAA,MAAM,CAACG,KAAP,CAAa,0BAAb,CAJI,CAKJ;AAEA;AAPI,GAAR;AASH,CAZM","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\services\\helpers\\","sourcesContent":["export const isAsyncFunction = (func) => {\r\n    const string = func.toString().trim();\r\n\r\n    return !!(\r\n        // native\r\n        string.match(/^async /) ||\r\n        // babel (this may change, but hey...)\r\n        string.match(/return _ref[^\\.]*\\.apply/)\r\n        // insert your other dirty transpiler check\r\n\r\n        // there are other more complex situations that maybe require you to check the return line for a *promise*\r\n    );\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"96895cabe73c34cbfb09100c5712499a53247ca6","contentHash":"54b721968d19fe9da94e363432e1d126c9293a3dd26bec29982bbea070b14210"},"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\RequestOperation.js":{"path":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\RequestOperation.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":342}},"3":{"start":{"line":10,"column":17},"end":{"line":10,"column":83}},"4":{"start":{"line":12,"column":34},"end":{"line":12,"column":117}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":23},"end":{"line":16,"column":95}},"7":{"start":{"line":18,"column":65},"end":{"line":18,"column":92}},"8":{"start":{"line":18,"column":94},"end":{"line":18,"column":474}},"9":{"start":{"line":18,"column":147},"end":{"line":18,"column":188}},"10":{"start":{"line":18,"column":198},"end":{"line":18,"column":405}},"11":{"start":{"line":18,"column":247},"end":{"line":18,"column":297}},"12":{"start":{"line":18,"column":299},"end":{"line":18,"column":355}},"13":{"start":{"line":18,"column":365},"end":{"line":18,"column":403}},"14":{"start":{"line":18,"column":406},"end":{"line":18,"column":471}},"15":{"start":{"line":20,"column":39},"end":{"line":20,"column":110}},"16":{"start":{"line":20,"column":97},"end":{"line":20,"column":110}},"17":{"start":{"line":20,"column":111},"end":{"line":20,"column":152}},"18":{"start":{"line":20,"column":139},"end":{"line":20,"column":152}},"19":{"start":{"line":20,"column":153},"end":{"line":20,"column":198}},"20":{"start":{"line":20,"column":186},"end":{"line":20,"column":198}},"21":{"start":{"line":20,"column":199},"end":{"line":20,"column":322}},"22":{"start":{"line":20,"column":205},"end":{"line":20,"column":279}},"23":{"start":{"line":20,"column":280},"end":{"line":20,"column":292}},"24":{"start":{"line":20,"column":307},"end":{"line":20,"column":320}},"25":{"start":{"line":22,"column":12},"end":{"line":27,"column":1}},"26":{"start":{"line":23,"column":2},"end":{"line":23,"column":48}},"27":{"start":{"line":24,"column":2},"end":{"line":24,"column":19}},"28":{"start":{"line":25,"column":2},"end":{"line":25,"column":25}},"29":{"start":{"line":26,"column":2},"end":{"line":26,"column":23}},"30":{"start":{"line":29,"column":0},"end":{"line":29,"column":22}},"31":{"start":{"line":31,"column":34},"end":{"line":46,"column":8}},"32":{"start":{"line":32,"column":2},"end":{"line":32,"column":53}},"33":{"start":{"line":34,"column":15},"end":{"line":34,"column":43}},"34":{"start":{"line":39,"column":4},"end":{"line":39,"column":59}},"35":{"start":{"line":40,"column":4},"end":{"line":40,"column":51}},"36":{"start":{"line":41,"column":4},"end":{"line":41,"column":26}},"37":{"start":{"line":42,"column":4},"end":{"line":42,"column":17}},"38":{"start":{"line":45,"column":2},"end":{"line":45,"column":24}},"39":{"start":{"line":48,"column":0},"end":{"line":48,"column":40}},"40":{"start":{"line":50,"column":35},"end":{"line":65,"column":8}},"41":{"start":{"line":51,"column":2},"end":{"line":51,"column":55}},"42":{"start":{"line":53,"column":16},"end":{"line":53,"column":45}},"43":{"start":{"line":58,"column":4},"end":{"line":58,"column":60}},"44":{"start":{"line":59,"column":4},"end":{"line":59,"column":58}},"45":{"start":{"line":60,"column":4},"end":{"line":60,"column":27}},"46":{"start":{"line":61,"column":4},"end":{"line":61,"column":18}},"47":{"start":{"line":64,"column":2},"end":{"line":64,"column":25}},"48":{"start":{"line":67,"column":0},"end":{"line":67,"column":42}},"49":{"start":{"line":69,"column":35},"end":{"line":84,"column":8}},"50":{"start":{"line":70,"column":2},"end":{"line":70,"column":55}},"51":{"start":{"line":72,"column":16},"end":{"line":72,"column":45}},"52":{"start":{"line":77,"column":4},"end":{"line":77,"column":60}},"53":{"start":{"line":78,"column":4},"end":{"line":78,"column":58}},"54":{"start":{"line":79,"column":4},"end":{"line":79,"column":27}},"55":{"start":{"line":80,"column":4},"end":{"line":80,"column":18}},"56":{"start":{"line":83,"column":2},"end":{"line":83,"column":25}},"57":{"start":{"line":86,"column":0},"end":{"line":86,"column":42}},"58":{"start":{"line":88,"column":39},"end":{"line":103,"column":8}},"59":{"start":{"line":89,"column":2},"end":{"line":89,"column":59}},"60":{"start":{"line":91,"column":16},"end":{"line":91,"column":49}},"61":{"start":{"line":96,"column":4},"end":{"line":96,"column":64}},"62":{"start":{"line":97,"column":4},"end":{"line":97,"column":62}},"63":{"start":{"line":98,"column":4},"end":{"line":98,"column":27}},"64":{"start":{"line":99,"column":4},"end":{"line":99,"column":18}},"65":{"start":{"line":102,"column":2},"end":{"line":102,"column":29}},"66":{"start":{"line":105,"column":0},"end":{"line":105,"column":50}},"67":{"start":{"line":107,"column":19},"end":{"line":113,"column":1}},"68":{"start":{"line":108,"column":2},"end":{"line":108,"column":55}},"69":{"start":{"line":109,"column":2},"end":{"line":109,"column":22}},"70":{"start":{"line":110,"column":2},"end":{"line":110,"column":15}},"71":{"start":{"line":111,"column":2},"end":{"line":111,"column":19}},"72":{"start":{"line":112,"column":2},"end":{"line":112,"column":21}},"73":{"start":{"line":115,"column":0},"end":{"line":115,"column":36}},"74":{"start":{"line":117,"column":22},"end":{"line":121,"column":1}},"75":{"start":{"line":118,"column":2},"end":{"line":118,"column":58}},"76":{"start":{"line":119,"column":2},"end":{"line":119,"column":25}},"77":{"start":{"line":120,"column":2},"end":{"line":120,"column":19}},"78":{"start":{"line":123,"column":0},"end":{"line":123,"column":42}},"79":{"start":{"line":125,"column":29},"end":{"line":129,"column":1}},"80":{"start":{"line":126,"column":2},"end":{"line":126,"column":65}},"81":{"start":{"line":127,"column":2},"end":{"line":127,"column":22}},"82":{"start":{"line":128,"column":2},"end":{"line":128,"column":25}},"83":{"start":{"line":131,"column":0},"end":{"line":131,"column":56}},"84":{"start":{"line":133,"column":22},"end":{"line":138,"column":1}},"85":{"start":{"line":134,"column":2},"end":{"line":134,"column":58}},"86":{"start":{"line":135,"column":2},"end":{"line":135,"column":25}},"87":{"start":{"line":136,"column":2},"end":{"line":136,"column":19}},"88":{"start":{"line":137,"column":2},"end":{"line":137,"column":21}},"89":{"start":{"line":140,"column":0},"end":{"line":140,"column":42}},"90":{"start":{"line":142,"column":27},"end":{"line":148,"column":1}},"91":{"start":{"line":143,"column":2},"end":{"line":143,"column":63}},"92":{"start":{"line":144,"column":2},"end":{"line":144,"column":25}},"93":{"start":{"line":145,"column":2},"end":{"line":145,"column":49}},"94":{"start":{"line":146,"column":2},"end":{"line":146,"column":45}},"95":{"start":{"line":147,"column":2},"end":{"line":147,"column":21}},"96":{"start":{"line":150,"column":0},"end":{"line":150,"column":52}},"97":{"start":{"line":152,"column":34},"end":{"line":167,"column":8}},"98":{"start":{"line":153,"column":2},"end":{"line":153,"column":54}},"99":{"start":{"line":155,"column":16},"end":{"line":155,"column":44}},"100":{"start":{"line":160,"column":4},"end":{"line":160,"column":59}},"101":{"start":{"line":161,"column":4},"end":{"line":161,"column":60}},"102":{"start":{"line":162,"column":4},"end":{"line":162,"column":41}},"103":{"start":{"line":163,"column":4},"end":{"line":163,"column":18}},"104":{"start":{"line":166,"column":2},"end":{"line":166,"column":24}},"105":{"start":{"line":169,"column":0},"end":{"line":169,"column":40}},"106":{"start":{"line":171,"column":23},"end":{"line":174,"column":1}},"107":{"start":{"line":172,"column":2},"end":{"line":172,"column":59}},"108":{"start":{"line":173,"column":2},"end":{"line":173,"column":22}},"109":{"start":{"line":176,"column":0},"end":{"line":176,"column":44}},"110":{"start":{"line":178,"column":17},"end":{"line":182,"column":1}},"111":{"start":{"line":179,"column":2},"end":{"line":179,"column":53}},"112":{"start":{"line":180,"column":2},"end":{"line":180,"column":23}},"113":{"start":{"line":181,"column":2},"end":{"line":181,"column":25}},"114":{"start":{"line":184,"column":0},"end":{"line":184,"column":32}}},"fnMap":{"0":{"name":"_createSuper","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":21}},"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":476}},"line":18},"1":{"name":"_createSuperInternal","decl":{"start":{"line":18,"column":110},"end":{"line":18,"column":130}},"loc":{"start":{"line":18,"column":133},"end":{"line":18,"column":473}},"line":18},"2":{"name":"_isNativeReflectConstruct","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":34}},"loc":{"start":{"line":20,"column":37},"end":{"line":20,"column":324}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":262},"end":{"line":20,"column":263}},"loc":{"start":{"line":20,"column":274},"end":{"line":20,"column":276}},"line":20},"4":{"name":"Error","decl":{"start":{"line":22,"column":21},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":42},"end":{"line":27,"column":1}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":31,"column":34},"end":{"line":31,"column":35}},"loc":{"start":{"line":31,"column":52},"end":{"line":46,"column":1}},"line":31},"6":{"name":"UserInputError","decl":{"start":{"line":36,"column":11},"end":{"line":36,"column":25}},"loc":{"start":{"line":36,"column":40},"end":{"line":43,"column":3}},"line":36},"7":{"name":"(anonymous_7)","decl":{"start":{"line":50,"column":35},"end":{"line":50,"column":36}},"loc":{"start":{"line":50,"column":54},"end":{"line":65,"column":1}},"line":50},"8":{"name":"ValidationError","decl":{"start":{"line":55,"column":11},"end":{"line":55,"column":26}},"loc":{"start":{"line":55,"column":41},"end":{"line":62,"column":3}},"line":55},"9":{"name":"(anonymous_9)","decl":{"start":{"line":69,"column":35},"end":{"line":69,"column":36}},"loc":{"start":{"line":69,"column":54},"end":{"line":84,"column":1}},"line":69},"10":{"name":"UnexpectedError","decl":{"start":{"line":74,"column":11},"end":{"line":74,"column":26}},"loc":{"start":{"line":74,"column":41},"end":{"line":81,"column":3}},"line":74},"11":{"name":"(anonymous_11)","decl":{"start":{"line":88,"column":39},"end":{"line":88,"column":40}},"loc":{"start":{"line":88,"column":58},"end":{"line":103,"column":1}},"line":88},"12":{"name":"AuthenticationError","decl":{"start":{"line":93,"column":11},"end":{"line":93,"column":30}},"loc":{"start":{"line":93,"column":45},"end":{"line":100,"column":3}},"line":93},"13":{"name":"LoginSuccess","decl":{"start":{"line":107,"column":28},"end":{"line":107,"column":40}},"loc":{"start":{"line":107,"column":58},"end":{"line":113,"column":1}},"line":107},"14":{"name":"RegisterSuccess","decl":{"start":{"line":117,"column":31},"end":{"line":117,"column":46}},"loc":{"start":{"line":117,"column":62},"end":{"line":121,"column":1}},"line":117},"15":{"name":"TrackerCreationSuccess","decl":{"start":{"line":125,"column":38},"end":{"line":125,"column":60}},"loc":{"start":{"line":125,"column":70},"end":{"line":129,"column":1}},"line":125},"16":{"name":"OperationResult","decl":{"start":{"line":133,"column":31},"end":{"line":133,"column":46}},"loc":{"start":{"line":133,"column":69},"end":{"line":138,"column":1}},"line":133},"17":{"name":"TrackerCreationCheck","decl":{"start":{"line":142,"column":36},"end":{"line":142,"column":56}},"loc":{"start":{"line":142,"column":113},"end":{"line":148,"column":1}},"line":142},"18":{"name":"(anonymous_18)","decl":{"start":{"line":152,"column":34},"end":{"line":152,"column":35}},"loc":{"start":{"line":152,"column":53},"end":{"line":167,"column":1}},"line":152},"19":{"name":"OperationError","decl":{"start":{"line":157,"column":11},"end":{"line":157,"column":25}},"loc":{"start":{"line":157,"column":50},"end":{"line":164,"column":3}},"line":157},"20":{"name":"OperationSuccess","decl":{"start":{"line":171,"column":32},"end":{"line":171,"column":48}},"loc":{"start":{"line":171,"column":59},"end":{"line":174,"column":1}},"line":171},"21":{"name":"InputError","decl":{"start":{"line":178,"column":26},"end":{"line":178,"column":36}},"loc":{"start":{"line":178,"column":54},"end":{"line":182,"column":1}},"line":178}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":198},"end":{"line":18,"column":405}},"type":"if","locations":[{"start":{"line":18,"column":198},"end":{"line":18,"column":405}},{"start":{"line":18,"column":198},"end":{"line":18,"column":405}}],"line":18},"1":{"loc":{"start":{"line":20,"column":39},"end":{"line":20,"column":110}},"type":"if","locations":[{"start":{"line":20,"column":39},"end":{"line":20,"column":110}},{"start":{"line":20,"column":39},"end":{"line":20,"column":110}}],"line":20},"2":{"loc":{"start":{"line":20,"column":43},"end":{"line":20,"column":95}},"type":"binary-expr","locations":[{"start":{"line":20,"column":43},"end":{"line":20,"column":73}},{"start":{"line":20,"column":77},"end":{"line":20,"column":95}}],"line":20},"3":{"loc":{"start":{"line":20,"column":111},"end":{"line":20,"column":152}},"type":"if","locations":[{"start":{"line":20,"column":111},"end":{"line":20,"column":152}},{"start":{"line":20,"column":111},"end":{"line":20,"column":152}}],"line":20},"4":{"loc":{"start":{"line":20,"column":153},"end":{"line":20,"column":198}},"type":"if","locations":[{"start":{"line":20,"column":153},"end":{"line":20,"column":198}},{"start":{"line":20,"column":153},"end":{"line":20,"column":198}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":5,"8":5,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":5,"16":0,"17":5,"18":0,"19":5,"20":5,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":1,"41":1,"42":1,"43":0,"44":0,"45":0,"46":0,"47":1,"48":1,"49":1,"50":1,"51":1,"52":0,"53":0,"54":0,"55":0,"56":1,"57":1,"58":1,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":1,"66":1,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1,"74":1,"75":0,"76":0,"77":0,"78":1,"79":1,"80":0,"81":0,"82":0,"83":1,"84":1,"85":0,"86":0,"87":0,"88":0,"89":1,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":1,"98":1,"99":1,"100":0,"101":0,"102":0,"103":0,"104":1,"105":1,"106":1,"107":0,"108":0,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1},"f":{"0":5,"1":0,"2":5,"3":0,"4":0,"5":1,"6":0,"7":1,"8":0,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":1},"b":{"0":[0,0],"1":[0,5],"2":[5,5],"3":[0,5],"4":[5,0]},"inputSourceMap":{"version":3,"sources":["RequestOperation.js"],"names":["Error","type","message","success","UserInputError","errors","ValidationError","UnexpectedError","AuthenticationError","LoginSuccess","id","user","token","RegisterSuccess","TrackerCreationSuccess","tracker","OperationResult","error","TrackerCreationCheck","canCreateNewTracker","nbTrackersCreated","OperationError","operationType","OperationSuccess","resource","InputError","target"],"mappings":";;;;;;;;;;;;;;;;;;;;;IAAaA,K,GACT,eAAYC,IAAZ,EAAkBC,OAAlB,EAA0B;AAAA;AACtB,OAAKD,IAAL,GAAYA,IAAZ;AACA,OAAKC,OAAL,GAAeA,OAAf;AACA,OAAKC,OAAL,GAAe,KAAf;AACH,C;;;;IAGQC,c;;;;;AACT,0BAAYH,IAAZ,EAAkBI,MAAlB,EAAyB;AAAA;;AAAA;AACrB,8BAAMJ,IAAN,EAAY,aAAZ;AACA,UAAKI,MAAL,GAAcA,MAAd;AAFqB;AAGxB;;;EAJ+BL,K;;;;IAOvBM,e;;;;;AACT,2BAAYL,IAAZ,EAAkBI,MAAlB,EAAyB;AAAA;;AAAA;AACrB,gCAAMJ,IAAN,EAAY,kBAAZ;AACA,WAAKI,MAAL,GAAcA,MAAd;AAFqB;AAGxB;;;EAJgCL,K;;;;IAOxBO,e;;;;;AACT,2BAAYN,IAAZ,EAAkBI,MAAlB,EAAyB;AAAA;;AAAA;AACrB,gCAAMJ,IAAN,EAAY,kBAAZ;AACA,WAAKI,MAAL,GAAcA,MAAd;AAFqB;AAGxB;;;EAJgCL,K;;;;IAOxBQ,mB;;;;;AACT,+BAAYP,IAAZ,EAAkBI,MAAlB,EAAyB;AAAA;;AAAA;AACrB,gCAAMJ,IAAN,EAAY,sBAAZ;AACA,WAAKI,MAAL,GAAcA,MAAd;AAFqB;AAGxB;;;EAJoCL,K;;;;IAO5BS,Y,GACT,sBAAYC,EAAZ,EAAgBC,IAAhB,EAAsBC,KAAtB,EAA4B;AAAA;AACxB,OAAKT,OAAL,GAAe,IAAf;AACA,OAAKO,EAAL,GAAUA,EAAV;AACA,OAAKC,IAAL,GAAYA,IAAZ;AACA,OAAKC,KAAL,GAAaA,KAAb;AACH,C;;;;IAGQC,e,GACT,yBAAYV,OAAZ,EAAqBQ,IAArB,EAA0B;AAAA;AACtB,OAAKR,OAAL,GAAeA,OAAf;AACA,OAAKQ,IAAL,GAAYA,IAAZ;AACH,C;;;;IAGQG,sB,GACT,gCAAYC,OAAZ,EAAoB;AAAA;AAChB,OAAKZ,OAAL,GAAe,IAAf;AACA,OAAKY,OAAL,GAAeA,OAAf;AACH,C;;;;IAGQC,e,GACT,yBAAYb,OAAZ,EAAqBF,IAArB,EAA2BgB,KAA3B,EAAiC;AAAA;AAC7B,OAAKd,OAAL,GAAeA,OAAf;AACA,OAAKF,IAAL,GAAYA,IAAZ;AACA,OAAKgB,KAAL,GAAaA,KAAb;AACH,C;;;;IAGQC,oB,GACT,8BAAYf,OAAZ,EAAqBgB,mBAArB,EAA0CC,iBAA1C,EAA6DH,KAA7D,EAAmE;AAAA;AAC/D,OAAKd,OAAL,GAAeA,OAAf;AACA,OAAKgB,mBAAL,GAA2BA,mBAA3B;AACA,OAAKC,iBAAL,GAAyBA,iBAAzB;AACA,OAAKH,KAAL,GAAaA,KAAb;AACH,C;;;;IAGQI,c;;;;;AACT,0BAAYnB,OAAZ,EAAqBoB,aAArB,EAAmC;AAAA;;AAAA;AAC/B,gCAAM,iBAAN,EAAyBpB,OAAzB;AACA,WAAKoB,aAAL,GAAqBA,aAArB;AAF+B;AAGlC;;;EAJ+BtB,K;;;;IAOvBuB,gB,GACT,0BAAYC,QAAZ,EAAqB;AAAA;AACjB,OAAKrB,OAAL,GAAe,IAAf;AACH,C;;;;IAGQsB,U,GACT,oBAAYC,MAAZ,EAAoBxB,OAApB,EAA4B;AAAA;AACxB,OAAKwB,MAAL,GAAcA,MAAd;AACA,OAAKxB,OAAL,GAAeA,OAAf;AACH,C","sourceRoot":"C:\\Users\\Leo\\Desktop\\Web\\AirTracker\\Server\\src\\classes\\","sourcesContent":["export class Error{\r\n    constructor(type, message){\r\n        this.type = type;\r\n        this.message = message;\r\n        this.success = false;\r\n    }\r\n}\r\n\r\nexport class UserInputError extends Error{\r\n    constructor(type, errors){\r\n        super(type, 'Input error');\r\n        this.errors = errors;\r\n    }\r\n}\r\n\r\nexport class ValidationError extends Error{\r\n    constructor(type, errors){\r\n        super(type, 'Validation error');\r\n        this.errors = errors;\r\n    }\r\n}\r\n\r\nexport class UnexpectedError extends Error{\r\n    constructor(type, errors){\r\n        super(type, 'Unexpected error');\r\n        this.errors = errors;\r\n    }\r\n}\r\n\r\nexport class AuthenticationError extends Error{\r\n    constructor(type, errors){\r\n        super(type, 'Authentication error');\r\n        this.errors = errors;\r\n    }\r\n}\r\n\r\nexport class LoginSuccess{\r\n    constructor(id, user, token){\r\n        this.success = true;\r\n        this.id = id;\r\n        this.user = user;\r\n        this.token = token;\r\n    }\r\n}\r\n\r\nexport class RegisterSuccess{\r\n    constructor(success, user){\r\n        this.success = success;\r\n        this.user = user;\r\n    }\r\n}\r\n\r\nexport class TrackerCreationSuccess{\r\n    constructor(tracker){\r\n        this.success = true;\r\n        this.tracker = tracker;\r\n    }\r\n}\r\n\r\nexport class OperationResult{\r\n    constructor(success, type, error){\r\n        this.success = success;\r\n        this.type = type;\r\n        this.error = error;\r\n    }\r\n}\r\n\r\nexport class TrackerCreationCheck {\r\n    constructor(success, canCreateNewTracker, nbTrackersCreated, error){\r\n        this.success = success;\r\n        this.canCreateNewTracker = canCreateNewTracker;\r\n        this.nbTrackersCreated = nbTrackersCreated;\r\n        this.error = error;\r\n    }\r\n}\r\n\r\nexport class OperationError extends Error{\r\n    constructor(message, operationType){\r\n        super(\"OPERATION_ERROR\", message);\r\n        this.operationType = operationType;\r\n    }\r\n}\r\n\r\nexport class OperationSuccess{\r\n    constructor(resource){\r\n        this.success = true;\r\n    }\r\n}\r\n\r\nexport class InputError{\r\n    constructor(target, message){\r\n        this.target = target;\r\n        this.message = message;\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e19c95d4fb02b5bcd9d83e8a6965c5e84e41583d","contentHash":"fb588260833810acd6cc242757f030ea5f53a72badd0ce1d3cec14f0a4abd723"}}